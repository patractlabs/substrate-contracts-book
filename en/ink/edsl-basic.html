<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ink! eDSL basic elements</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/substrate-contracts-book/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta content="https://www.patract.io/social-preview.png" property="og:image">
    
    <link rel="preload" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css" as="style"><link rel="preload" href="/substrate-contracts-book/assets/js/app.488f6983.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/3.66b4543a.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/1.293685b3.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/89.6776e035.js" as="script"><link rel="prefetch" href="/substrate-contracts-book/assets/js/10.d378fa38.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/100.e2b9146f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/101.1e3769c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/102.5393ed6e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/103.1d0f07db.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/104.ec59702b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/105.e1c82ef2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/106.79bdf6a0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/107.ae03e01e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/108.58c92bf0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/109.7c40f2a5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/11.3c93daad.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/110.7b17606a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/111.5c23b5f4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/112.a5be63e8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/113.bddd2e27.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/114.67c0f118.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/115.a07b7a10.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/116.5edc4b00.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/117.8fcf34a3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/118.8a5f0b5a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/119.6a506a48.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/12.3d9c1fd1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/120.f067b892.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/121.787d1b80.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/122.a5a611bd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/123.cd8ea40d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/124.cd411d52.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/125.1d0b0cfc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/126.a605a2ab.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/127.72e07267.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/128.881179cc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/129.db3496d3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/13.1049a388.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/130.5a0d07c2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/131.415346ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/132.30dcd25e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/133.5565f793.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/134.3b2fa095.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/135.6c383eec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/136.0273f3ec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/137.7b538351.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/138.014828fa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/139.7c1c82dc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/14.fb4228cb.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/140.f2012d15.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/141.3208960a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/142.717fd043.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/143.0e67e97b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/144.76f6664d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/145.d691d07d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/146.d5dadfa0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/147.f03416ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/148.d49f10bc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/149.f02caa99.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/15.153ddbe9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/150.2ace7c69.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/151.a78c6a00.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/152.a00c03db.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/153.f245ad47.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/154.fa740ba7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/155.96c1af67.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/156.f888f3ba.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/157.4a915330.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/158.9c9506e4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/159.cb5fb652.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/16.42dde0a2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/160.9c65a9bf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/161.fa603059.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/162.d2903d7b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/163.7e10660a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/164.1dbbab29.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/165.9452a4c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/166.90831ef2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/167.bf65c426.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/168.a2f3a272.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/169.b3e6be19.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/17.f0431e88.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/170.3669dfb8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/171.402e3eea.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/172.5fb7ab3f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/173.55ac3f8a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/174.06e9a81c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/175.d3bb64e3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/176.4e4a1390.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/177.a0b50bb3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/178.61882827.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/179.63e760f7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/18.7ad8aa6c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/180.f1728e90.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/181.8f85f27d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/182.dc3cfd1c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/183.a75458dc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/184.be9ccf49.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/185.18c090ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/186.5530526d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/187.3f7226d0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/188.cee0db96.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/189.2cefb2ae.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/19.4332d471.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/20.c4400ab0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/21.259ebc1d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/22.60e28638.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/23.cc21aafc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/24.38148646.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/25.f0ec1f1e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/26.3c1b7f4d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/27.4b2f849c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/28.99ae462a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/29.af898c62.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/30.8cb061ec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/31.16587799.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/32.43b3f420.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/33.efaadc95.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/34.beeabb40.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/35.c692f404.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/36.6fb3f75e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/37.403862c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/38.3a10d692.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/39.fae3351a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/4.0f42cc7f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/40.f817baef.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/41.8f6290b2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/42.3c61a965.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/43.12298a85.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/44.ae76a3aa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/45.debc6ea9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/46.70777adf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/47.6ce13be0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/48.968f9d01.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/49.9a5b7931.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/5.cd1c6494.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/50.2f15e09a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/51.a34af9cf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/52.962b9dac.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/53.f67f9ca3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/54.6e0f212b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/55.6a51c802.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/56.e44543e0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/57.3779a99c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/58.1acc9a26.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/59.010f3c6a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/6.83312519.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/60.b86a4a23.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/61.6ef664f7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/62.9c277e9d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/63.8f3705b9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/64.f00d9c8d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/65.7231f456.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/66.ed6d3ffa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/67.7f3b97cd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/68.0f016857.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/69.0c875676.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/7.c6c67365.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/70.0fcee255.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/71.b4b25221.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/72.0d6a26ab.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/73.6976838c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/74.3727eaff.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/75.2c2db848.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/76.33dc1fde.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/77.7a54af28.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/78.1b813995.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/79.fe0b5e46.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/8.b0e58df3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/80.473a66b1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/81.b56d6f08.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/82.c81e3344.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/83.1a5956b1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/84.76b78f9d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/85.3ce8457a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/86.8e2f8c49.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/87.2d34eba9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/88.1d736b60.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/9.344f2c05.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/90.18526865.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/91.8a69d4ce.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/92.8cac047b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/93.39a99e1f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/94.cbbc2372.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/95.8a170e44.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/96.709dff5b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/97.68fc85ca.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/98.368cb03c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/99.b6ec13b2.js">
    <link rel="stylesheet" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/substrate-contracts-book/en/" class="home-link router-link-active"><img src="/substrate-contracts-book/logo.svg" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  Official Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/en/" class="nav-link"><i class="undefined"></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/ink/edsl-basic.html" class="nav-link"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/ink/edsl-basic.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><!----> <h3 class="name" data-v-828910c6>
    patractlabs
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>180</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  Official Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/en/" class="nav-link"><i class="undefined"></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/ink/edsl-basic.html" class="nav-link"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/ink/edsl-basic.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><a href="/substrate-contracts-book/en/" aria-current="page" class="sidebar-link">Summary</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/introduction" class="sidebar-heading clickable"><span>Introduction</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/contracts/overview.html" class="sidebar-link">Contract overview</a></li><li><a href="/substrate-contracts-book/en/contracts/model.html" class="sidebar-link">Contract model</a></li><li><a href="/substrate-contracts-book/en/contracts/language.html" class="sidebar-link">Contract language</a></li><li><a href="/substrate-contracts-book/en/contracts/wasm_first_step.html" class="sidebar-link">Brief introduction of Wasm</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/ink/introduction" class="sidebar-heading clickable open"><span>ink!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ink/tutorial.html" class="sidebar-link">ink! tutorial</a></li><li><a href="/substrate-contracts-book/en/ink/framework.html" class="sidebar-link">ink! Framework</a></li><li><a href="/substrate-contracts-book/en/ink/edsl-basic.html" aria-current="page" class="active sidebar-link">ink! eDSL basic elements</a></li><li><a href="/substrate-contracts-book/en/ink/call-contracts.html" class="sidebar-link">Cross-call for ink!</a></li><li><a href="/substrate-contracts-book/en/ink/ink-solidity.html" class="sidebar-link">Compare ink! and solidity</a></li><li><a href="/substrate-contracts-book/en/ink/cargo-contract.html" class="sidebar-link">cargo-contract</a></li><li><a href="/substrate-contracts-book/en/ink/trap.html" class="sidebar-link">Current problem for ink!</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/ask/introduction" class="sidebar-heading clickable"><span>ask!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ask/tutorial.html" class="sidebar-link">Getting Started</a></li><li><a href="/substrate-contracts-book/en/ask/design.html" class="sidebar-link">Design</a></li><li><a href="/substrate-contracts-book/en/ask/basics.html" class="sidebar-link">Basics</a></li><li><a href="/substrate-contracts-book/en/ask/decorators.html" class="sidebar-link">Ask! decorator</a></li><li><a href="/substrate-contracts-book/en/ask/storage-data-structure.html" class="sidebar-link">Storage</a></li><li><a href="/substrate-contracts-book/en/ask/ask-cli.html" class="sidebar-link">Ask-cli</a></li><li><a href="/substrate-contracts-book/en/ask/ask-vs-ink.html" class="sidebar-link">Ask! and ink! Comparison of characteristics</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/ask/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html" class="sidebar-link">Report for Ask! v0.1</a></li><li><a href="/substrate-contracts-book/en/ask/reports/v0.2Report.html" class="sidebar-link">Report for Ask! v0.2</a></li></ul></section></li></ul></section></li><li><a href="/substrate-contracts-book/en/solang/introduction.html" class="sidebar-link">Solang</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/redspot/introduction" class="sidebar-heading clickable"><span>Redspot</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/tutorial.html" class="sidebar-link">Redspot tutorial</a></li><li><a href="/substrate-contracts-book/en/redspot/overview.html" class="sidebar-link">Introduction</a></li><li><a href="/substrate-contracts-book/en/redspot/configuration.html" class="sidebar-link">Configuration information</a></li><li><a href="/substrate-contracts-book/en/redspot/tasks.html" class="sidebar-link">Tasks</a></li><li><a href="/substrate-contracts-book/en/redspot/runtime-environment.html" class="sidebar-link">Runtime Environment</a></li><li><a href="/substrate-contracts-book/en/redspot/console.html" class="sidebar-link">Console</a></li><li><a href="/substrate-contracts-book/en/redspot/q-and-a.html" class="sidebar-link">Common problem</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/redspot/plugin" class="sidebar-heading clickable"><span>Plugin</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-decimals.html" class="sidebar-link">@redspot_decimals plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-known-types.html" class="sidebar-link">@redspot_known-types plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-chai.html" class="sidebar-link">@redspot_chai  plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-gas-reporter.html" class="sidebar-link">@redspot_gas-reporter plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-patract.html" class="sidebar-link">@redspot_patract plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-explorer.html" class="sidebar-link">@redspot_explorer plug-in</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/redspot/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/reports/v0.1Report.html" class="sidebar-link">Report for Redspot v0.1</a></li><li><a href="/substrate-contracts-book/en/redspot/reports/v0.2Report.html" class="sidebar-link">Report for Redspot v0.2</a></li><li><a href="/substrate-contracts-book/en/redspot/reports/v0.3Report.html" class="sidebar-link">Report for Redspot v0.3</a></li><li><a href="/substrate-contracts-book/en/redspot/reports/v0.4Report.html" class="sidebar-link">Report for Redspot v0.4</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/europa/introduction" class="sidebar-heading clickable"><span>Europa</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/europa/tutorial.html" class="sidebar-link">Europa tutorial</a></li><li><a href="/substrate-contracts-book/en/europa/execution_info.html" class="sidebar-link">Europa contract execution log analysis</a></li><li><a href="/substrate-contracts-book/en/europa/sample.html" class="sidebar-link">Europa debugging example</a></li><li><a href="/substrate-contracts-book/en/europa/wasm_executor.html" class="sidebar-link">Europa Wasm executor</a></li><li><a href="/substrate-contracts-book/en/europa/wasm_backtrace.html" class="sidebar-link">Europa's Wasm Backtrace</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/europa/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/europa/reports/v0.1Report.html" class="sidebar-link">Report for Europa v0.1</a></li><li><a href="/substrate-contracts-book/en/europa/reports/v0.2Report.html" class="sidebar-link">Report for Europa v0.2</a></li><li><a href="/substrate-contracts-book/en/europa/reports/v0.3Report.html" class="sidebar-link">Report for Europa v0.3</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/zkmega/introduction" class="sidebar-heading clickable"><span>zkMega</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/zkmega/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/en/zkmega/contract.html" class="sidebar-link">Contract</a></li><li><a href="/substrate-contracts-book/en/zkmega/example.html" class="sidebar-link">Example</a></li><li><a href="/substrate-contracts-book/en/zkmega/benchmark.html" class="sidebar-link">Benchmark</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/zkmega/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/zkmega/reports/v0.1Report.html" class="sidebar-link">Report for zkMega v0.1（original Megaclite v0.1 )</a></li><li><a href="/substrate-contracts-book/en/zkmega/reports/v0.2Report.html" class="sidebar-link">Report for zkMega v0.2（original Megaclite v0.2 )</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/himalia/introduction" class="sidebar-heading clickable"><span>Himalia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/himalia/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/en/himalia/go-patract.html" class="sidebar-link">go-patract</a></li><li><a href="/substrate-contracts-book/en/himalia/py-patract.html" class="sidebar-link">py-patract</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/himalia/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/himalia/reports/v0.1Report.html" class="sidebar-link">Report for  Himalia v0.1 &amp; v0.2</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/metis/introduction" class="sidebar-heading clickable"><span>Metis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/metis/tokens.html" class="sidebar-link">ERC20</a></li><li><a href="/substrate-contracts-book/en/metis/access-control.html" class="sidebar-link">Access Control</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/metis/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/metis/reports/M1Report.html" class="sidebar-link">Patract's proposal about Metis (ink! and Ask! Standard Library)</a></li></ul></section></li></ul></section></li><li><a href="/substrate-contracts-book/en/carpo/introduction.html" class="sidebar-link">Carpo</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/elara/introduction" class="sidebar-heading clickable"><span>Elara</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/elara/tutorial.html" class="sidebar-link">Tutorial</a></li><li><a href="/substrate-contracts-book/en/elara/design.html" class="sidebar-link">Design Brief</a></li><li><a href="/substrate-contracts-book/en/elara/API.html" class="sidebar-link">API access</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/elara/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/elara/reports/v0.1Report.html" class="sidebar-link">Report for Elara v0.1</a></li><li><a href="/substrate-contracts-book/en/elara/reports/v0.2Report.html" class="sidebar-link">Report for Elara v0.2</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/patra-store/introduction" class="sidebar-heading clickable"><span>PatraStore</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/patra-store/overview.html" class="sidebar-link">Overview</a></li><li><a href="/substrate-contracts-book/en/patra-store/getting-starter.html" class="sidebar-link">Getting started</a></li><li><a href="/substrate-contracts-book/en/patra-store/publish-dapps.html" class="sidebar-link">Publish DApp</a></li></ul></section></li><li><a href="/substrate-contracts-book/en/patract/introduction.html" class="sidebar-link">Patract</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">ink! eDSL basic elements</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>patractlabs</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="ink-edsl-basic-elements"><a href="#ink-edsl-basic-elements" class="header-anchor">#</a> ink! eDSL basic elements</h1> <p>The elements of ink! eDSL design are actually relatively similar to those of Solidity, because the contract model structure of Contracts Pallet and the contract model of EVM are relatively similar.</p> <p>Therefore, the design of ink! can find a lot of shadows similar to Solidity (the same applies to the Runtime design of Substrate). When describing the ink characteristics later, I will try to compare with the characteristics of Solidity, which is convenient for readers to understand.</p> <h2 id="elements-of-edsl"><a href="#elements-of-edsl" class="header-anchor">#</a> Elements of eDSL</h2> <p>From the example provided by ink! documentation or ink!, the code shows that ink! also proposes the following three basic elements on the Contracts Pallet model:</p> <ul><li><code>constructor</code>/<code>message</code></li> <li><code>storage</code></li> <li><code>event</code></li></ul> <p>However, due to the design relationship of the Rust process macro, you can see that ink! First requires a contract to be under a <code>mod</code>, and add the <code>#[ink::contract]</code> macro to this <code>mod</code>:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>#[ink::contract]
mod erc20 {
    // ...
}
</code></pre></div><p>In this way, it is equivalent to telling ink! What is in this mod is to be processed according to the eDSL of ink.</p> <h3 id="ink-contract"><a href="#ink-contract" class="header-anchor">#</a> <code>#[ink::contract]</code></h3> <p>Therefore, when you encounter the macro <code>#[ink::contract]</code>, it appears that this is the &quot;contract part&quot; identified by ink!. Therefore, we can see that many imports of <code>use xxx</code> will be placed under the scope of <code>mod</code> in <code>#[ink::contract]</code>.</p> <p>And the current ink! design is that, under a <code>crate</code> package, only one <code>#[ink::contract]</code> can appear, so it means that ink! thinks that the dimension of a contract is based on rust's <code>crate</code>, that is If in the same <code>crate</code>, whether in the same file (for example, under <code>lib.rs</code>) or in different files, more than two are defined by <code>#[ink::contract]</code> The <code>mod</code>, for example:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>#[ink::contract]
mod erc20 {
    // ...
}

#[ink::contract]
mod another_define {
    // ...
}
</code></pre></div><p>Analogous to solidity:</p> <div class="language-solidity,ignore extra-class"><pre class="language-text"><code>// a.sol defines multiple `contract` in the same file
contract A {

}
contract B {

}
</code></pre></div><p>Then in the compilation of ink!, this situation will be considered illegal.</p> <p>Of course, as opposed to this, as long as there is only one <code>mod</code> modified by <code>#[ink::contract]</code> in the current <code>crate</code>, other <code>mod</code>s should be used normally, so the contract modified by ink! <code>crate</code> can still do a good job of code isolation, enhance readability and maintainability**. This ability is important for <strong>maintaining large and complex contracts</strong>, such as:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>#[ink::contract]
mod erc20 {
    use crete::another_define::*;
}

mod another_define {
    // ...
}
</code></pre></div><p>For example, the following example:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>mod fxck {
    use crate::erc20::Erc20;
    use ::ink_lang::Env; // Note that `ink_lang::Env` needs to be introduced here
    impl Erc20 {
        pub fn tmp(&amp;self) {
            self.env().caller(); // 
        }
    }
}

#[ink::contract]
mod erc20 {
    #[ink(storage)]
    pub struct Erc20 {...}

    impl Erc20 {
        #[ink(constructor)]
        pub fn new(initial_supply: Balance) -&gt; Self {...}
        #[ink(message)]
        pub fn transfer(&amp;mut self, initial_supply: Balance) -&gt; Self {
            self.tmp(); // call methods defined in other `mod`
        }
    }
}
</code></pre></div><p>This model can achieve some code isolation that cannot be done under Solidity, and enhance maintainability. (Because Solidity's library can only be used for pure function calculations)</p> <p>In summary, under the ink! system:</p> <ul><li>A contract is in a <code>crate</code> unit, and only one <code>#[ink::contract]</code> definition can appear in a <code>crate</code>;</li> <li><code>#[ink::contract]</code> modified <code>mod</code> represents the content of the contract, and also represents <strong>the basic elements of the contract must be defined under this <code>mod</code></strong>;</li> <li>All parts other than <code>mod</code> modified by <code>#[ink::contract]</code> (other <code>mod</code>, functions, types) follow the rules of rust, and good code isolation can be done to improve maintainability;</li> <li>In practice, the <code>mod</code> modified by <code>#[ink::contract]</code> can be used as the entry point of the contract, and the implemented logic can be distributed to other <code>mod</code>s.</li></ul> <p>The following uses &quot;contract mod&quot; to indicate a <code>mod</code> modified by <code>#[ink::contract]</code></p> <h3 id="storage"><a href="#storage" class="header-anchor">#</a> <code>storage</code></h3> <p>In the contract mod, a structure must be defined, and this structure is modified by <code>#[ink(storage)]</code>, indicating that the storage of the contract is defined.</p> <p>At the same time, this structure definition modified by <code>#[ink(storage)]</code> is also regarded as an operable contract entity**, so all contract-related resources, types, and operations will be ** and this structure The body is bound together**. When the contract calls the contract, the type of the called contract is also represented by this structure.</p> <p>Therefore, this structure can be understood as a contract entity.</p> <blockquote><p>Although the part that modifies <code>mod</code> is the contract, because <code>mod</code> can only represent the scope in rust, so for practical use, use the structure modified by <code>#[ink(storage)]</code> to indicate that it can be operated Contract entity.</p> <p>In this context, the <code>mod</code> modified by <code>#[ink::contract]</code> can be understood as the concept of &quot;opening the contract domain&quot;, while the <code>stuct</code> modified by <code>#[ink(storage)]</code> It is a contract under this contract domain.</p></blockquote> <p>Here, the concept of storage defined by ink! is consistent with the concept of “storage” defined in Solidity, which means that the attributes defined here are the final state written to the <strong>chain</strong>. The purpose of writing all contract logic is to modify the state defined here.</p> <p>However, because the current ink! uses a structure to carry the contract state, all the states of the current contract can only be defined in this structure. When the contract is designed to be relatively large and complicated, the maintainability here will decrease.</p> <p>An example of defining storage is as follows:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>#[ink(storage)]
pub struct Erc20 {
    /// Total token supply.
    total_supply: Lazy&lt;Balance&gt;,
    /// Mapping from owner to number of owned token.
    balances: StorageHashMap&lt;AccountId, Balance&gt;,
    /// Mapping of the token amount which an account is allowed to withdraw
    /// from another account.
    allowances: StorageHashMap&lt;(AccountId, AccountId), Balance&gt;,
}
</code></pre></div><p>Structures modified by <code>#[ink(storage)]</code> are collectively referred to as contract structures in the following text.</p> <p>Here are a few features that need to be paid special attention to:</p> <ol><li><p>The type of the attribute defined in the contract structure must be a type that has implemented <code>SpreadLayout</code> (or more accurately, a type that implements <code>PackedLayout</code>, because <code>PackedLayout</code> is inherited from the definition of <code>SpreadLayout</code>):</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>/// Types that can be stored to and loaded from the contract storage.
pub trait SpreadLayout {
}
</code></pre></div><blockquote><p>The reason why only the type that implements this trait can be used here is very simple, because storage is different from the general type, it must contain the information of the &quot;chain&quot; in it, so the contract implementation of different chains must have a part for processing The storage (that is, state) allocation problem in the contract.</p> <p>For example, during the compilation process of Solidity, the key of the state is actually assigned according to the upper and lower order defined by the storage in the contract. If the <code>SpredLayout</code> or <code>PackedLayout</code> type has been implemented here, there will be an approximate process for state allocation.</p></blockquote> <p>Ink! has done basic implementations for general types, but <strong>for collection types (<code>Vec</code>, <code>HashMap</code>, etc.), because the state of the contract needs to hook the process of reading and writing</strong>, it cannot be implemented for collection types This <code>trait</code>. Therefore, in ink!, all the commonly used collection types in the standard library have been re-implemented, and the attribute types of the structure modified by <code>#[ink(storage)]</code> must be used if the collection type is used. The collection type provided by ink!**.</p> <blockquote><p>Since Solidity is relatively rudimentary, the storage map defined by Solidity cannot be traversed. (Caused by a defect in the Solidity design)</p> <p>ink! has done a lot of things when designing this piece, so the collection types <code>Vec</code>, <code>BTreeMap</code>, <code>HashMap</code> and so on provided by ink! are all <strong>traversable</strong>. Compared with the functions that Solidity can achieve, it is a considerable improvement.</p></blockquote></li> <li><p>Even based on the above design, the nested collection type is still difficult to implement (because the state structure of Substrate uses the k/v model). Therefore, in the design, we can only try to avoid nested collection types. If you must nest the collection type, you need to flatten the nesting level, merge the second-level key and the first-level key together, and use tuples instead (equivalent to <code>double_map</code> in Substrate Runtime)</p> <div class="language-Solidity,ignore extra-class"><pre class="language-text"><code>// solidity
contract A {
    mapping (uint =&gt; mapping (uint =&gt; uint))
}
</code></pre></div><p>The similar code in ink! should be:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>#[ink(storage)]
pub struct Erc20 {
    // Note that the key here uses the tuple `(AccountId, AccountId)`
    allowances: StorageHashMap&lt;(AccountId, AccountId), Balance&gt;,
}
</code></pre></div></li> <li><p>A model of <code>Lazy</code> is provided in storage, which allows developers to use <code>Lazy</code> to wrap a type so that the state data can be loaded when it is used:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>/// A lazy storage entity.
///
/// This loads its value from storage upon first use.
///
/// # Note
///
/// Use this if the storage field doesn't need to be loaded in some or most cases.
#[derive(Debug)]
pub struct Lazy&lt;T&gt;
where
    T: SpreadLayout,
{
    cell: LazyCell&lt;T&gt;,
}
</code></pre></div><p>How to use:</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>#[ink(storage)]
pub struct Erc20 {
    /// Total token supply.
    total_supply: Lazy&lt;Balance&gt;,
}
</code></pre></div></li></ol> <h3 id="constructor-message"><a href="#constructor-message" class="header-anchor">#</a> <code>constructor</code>/<code>message</code></h3> <p><code>constructor</code>/<code>message</code> is the entry function that triggers the contract state change. In other words, <code>constructor</code>/<code>message</code> is the state transition function of the contract state.</p> <p><code>constructor</code>/<code>message</code> can only modify the methods of the contract structure**, and cannot be used to modify the methods of other structures or other pure functions.</p> <p>In the contract mod, there is at least one method for the contract structure modified by <code>constructor</code> and <code>message</code>. If there are less than one respectively, it will cause compilation error.</p> <p>among them:</p> <ul><li><p><code>constructor</code> corresponds to the constructor in the Solidity contract. When the contract is deployed (in Contracts Pallet currently represents the process of doing <code>instantiate</code> from the uploaded contract code), a call to the corresponding constructor will be triggered.</p> <blockquote><p>It needs to be emphasized here that the call of the constructor and the instantiation of the contract are two conceptual things. This process is <strong>not atomic</strong> in the coordination process of ink! and Contracts Pallet. Therefore, the constructor may not be called, but the contract address will be generated, and the contract instance for which the constructor has not been called can be called normally.</p> <p>A typical example is the wrong code parameter passed in when calling <code>instantiate</code>.</p></blockquote></li> <li><p><code>message</code> corresponds to the call methods such as <code>public</code>/<code>external</code> in the Solidity contract. Due to the characteristics of Rust's mutable/immutable methods, <code>message</code> uses the ** feature to indicate whether this method will modify the state of the contract**.</p> <p>So if the method of <code>message</code> modification is</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>// Note that the first parameter of the method is `&amp;self`
#[ink(message)]
pub fn total_supply(&amp;self) -&gt; Balance {
    *self.total_supply
}
</code></pre></div><p>It means that the call of this method will not modify the state (controlled by the rust syntax), which is consistent with Ethereum. This type of method is mostly used for rpc calls to return the storage of a contract or return some storage-based calculation results.</p> <p>If the modification is</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>// Note that the first parameter of the method is `&amp;mut self`
pub fn transfer(&amp;mut self, to: AccountId, value: Balance) -&gt; Result&lt;()&gt; {
    let from = self.env().caller();
    self.transfer_from_to(from, to, value)
}
</code></pre></div><p>It means that the call of this method will modify the state, so if this method is called and executed in the form of a packaged transaction call, it will trigger a state change. If it is called by rpc, it means that the simulation has been executed once.</p> <p>At the same time, metadata.json (corresponding to the ABI of Solidity) will be generated after the contract is compiled. In this metadata, there will be a <code>mutates</code> field for the message part to indicate whether the method is variable.</p></li></ul> <h4 id="message-s-selector"><a href="#message-s-selector" class="header-anchor">#</a> message's <code>selector</code></h4> <p>For the generation of the ABI of the contract method, Solidity uses the method name plus the parameter type as a function signature to piece together into a string and then make a hash to take the first 4 bytes.</p> <div class="language-text extra-class"><pre class="language-text"><code>call = &quot;func_name(param1_type,param2_type,...)&quot;
bytes4(keccak256(call), a, b)
</code></pre></div><p>In ink!, this concept that allows contracts to distinguish call trigger points is called <code>selector</code>.</p> <p>Since rust does not support function overloading, a relatively simple design is adopted in ink!, which directly hashes the string of the function name and takes the first 4 bytes:</p> <div class="language-text extra-class"><pre class="language-text"><code>call = &quot;func_name&quot;
blake2_512(call)[0..4]
</code></pre></div><blockquote><p>The author believes that this design has caused problems with other contract language designs. Because rust does not support overloading, it does not mean that other languages ​​do not support overloading. After Solang compiles Solidity to Wasm, if it wants to be compatible with ink!'s metadata, problems will arise when calling each other.</p></blockquote> <p>On the other hand, <code>selector</code> can also run the contract developer's own definition</p> <div class="language-rust,json extra-class"><pre class="language-text"><code>#[ink(message, selector = &quot;0xCAFEBABE&quot;)]
pub fn was_it_ten(&amp;self) -&gt; bool {...}
</code></pre></div><h4 id="message-of-payable"><a href="#message-of-payable" class="header-anchor">#</a> message of <code>payable</code></h4> <p>There is a <code>payable</code> modifier for the method in Solidity, which is used to indicate that the method can accept a certain amount of money.</p> <p>Therefore, <code>payable</code> is also provided in ink! to indicate whether it is possible to transfer a certain amount of <strong>local currency</strong> while calling this method. In the current design of ink!, if a non-payable message is called with an amount at the same time, the calling process will be regarded as an error.</p> <p>By default, <code>paybale</code> is considered to be <code>false</code>, and it is <code>true</code> only when the contract developer specifies <code>payable</code>.</p> <p>The case for specifying a message to be callable is:</p> <div class="language-rust,json extra-class"><pre class="language-text"><code>#[ink(message, playable)]
pub fn was_it_ten(&amp;self) -&gt; bool {...}
</code></pre></div><p>On the other hand, in metadata, there will be a <code>payable</code> field for the message part to indicate whether this method requires payment.</p> <h3 id="event"><a href="#event" class="header-anchor">#</a> <code>event</code></h3> <p>The concept of event is not necessary in the state machine model. However, because <strong>blockchain is an asynchronous system</strong>, after sending a transaction to trigger a state change, the result of the change cannot be immediately known, and it can only rely on monitoring an element to determine the execution result. <code>event</code> is an element designed at the stage of Solidity, and this design is also inherited from Substrate Runtime and ink!.</p> <blockquote><p>I don't think event is a good design. In theory, there are other better ways, or variants of event. Event will cause abuse by developers to a certain extent.</p></blockquote> <p>The <code>event</code> of ink! in Contracts Pallet finally prints the event defined by the contract to the event of the chain through the <code>host function</code>.</p> <p>The event design of ink! is nothing special compared to Solidity, but because it is a contract running in Wasm, the event of the printing contract needs to interact with the chain through the host function, so the calling method needs to be passed through. env()` to call.</p> <div class="language-rust,ignore extra-class"><pre class="language-text"><code>Self::env().emit_event(...);
// or use
self.env().emit_event(...);
</code></pre></div></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/patractlabs/substrate-contracts-book/edit/master/en/ink/edsl-basic.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/30/2021, 5:11:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/substrate-contracts-book/en/ink/framework.html" class="prev">
            ink! Framework
          </a></span> <span class="next"><a href="/substrate-contracts-book/en/ink/call-contracts.html">
            Cross-call for ink!
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/ink/edsl-basic.html#elements-of-edsl" class="sidebar-link reco-side-elements-of-edsl" data-v-70334359>Elements of eDSL</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/ink/edsl-basic.html#ink-contract" class="sidebar-link reco-side-ink-contract" data-v-70334359>#[ink::contract]</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/ink/edsl-basic.html#storage" class="sidebar-link reco-side-storage" data-v-70334359>storage</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/ink/edsl-basic.html#constructor-message" class="sidebar-link reco-side-constructor-message" data-v-70334359>constructor/message</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/ink/edsl-basic.html#event" class="sidebar-link reco-side-event" data-v-70334359>event</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/substrate-contracts-book/assets/js/app.488f6983.js" defer></script><script src="/substrate-contracts-book/assets/js/3.66b4543a.js" defer></script><script src="/substrate-contracts-book/assets/js/1.293685b3.js" defer></script><script src="/substrate-contracts-book/assets/js/89.6776e035.js" defer></script>
  </body>
</html>

<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">v0.2Report | Substrate Contracts Book</title><meta data-react-helmet="true" property="og:url" content="https://docs.patract.io/substrate-contracts-book/ask/reports/v0.2Report"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="v0.2Report | Substrate Contracts Book"><meta data-react-helmet="true" name="description" content="Ask! v0.2 æŠ¥å‘Š"><meta data-react-helmet="true" property="og:description" content="Ask! v0.2 æŠ¥å‘Š"><link data-react-helmet="true" rel="shortcut icon" href="/substrate-contracts-book/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.patract.io/substrate-contracts-book/ask/reports/v0.2Report"><link data-react-helmet="true" rel="alternate" href="https://docs.patract.io/substrate-contracts-book/ask/reports/v0.2Report" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://docs.patract.io/substrate-contracts-book/en/ask/reports/v0.2Report" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.patract.io/substrate-contracts-book/ask/reports/v0.2Report" hreflang="x-default"><link rel="stylesheet" href="/substrate-contracts-book/assets/css/styles.4aa6c65a.css">
<link rel="preload" href="/substrate-contracts-book/assets/js/runtime~main.83f58760.js" as="script">
<link rel="preload" href="/substrate-contracts-book/assets/js/main.ee6e64d2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/substrate-contracts-book/"><img src="/substrate-contracts-book/img/logo.svg" alt="Substrate Contracts Book" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/substrate-contracts-book/img/logo.svg" alt="Substrate Contracts Book" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://www.patract.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>ä¸»é¡µ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>åšå®¢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/substrate-contracts-book/ask/reports/v0.2Report" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">ä¸­æ–‡</a></li><li><a href="/substrate-contracts-book/en/ask/reports/v0.2Report" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/">Summary</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">ä»‹ç»</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/contracts/introduction">Substrate åˆçº¦ä¹¦</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/contracts/overview">åˆçº¦ç»¼è¿°</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/contracts/model">åˆçº¦æ¨¡å‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/contracts/language">åˆçº¦è¯­è¨€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/contracts/wasm_first_step">Wasmç®€è¦ä»‹ç»</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ink!</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">ask!</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/introduction">ä»€ä¹ˆæ˜¯Ask! æ™ºèƒ½åˆçº¦ç¼–ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/tutorial">Ask!æ•™ç¨‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/design">è®¾è®¡</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/basics">åŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/decorators">Ask! è£…é¥°å™¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/storage-data-structure">å­˜å‚¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/ask-cli">Ask-cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/ask-vs-ink">Ask!å’Œink!çš„ç‰¹æ€§æ¯”è¾ƒ</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Reports</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/reports">Ask!è®®ä¼šææ¡ˆæŠ¥å‘Š</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/ask/reports/v0.1Report">v0.1Report</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/substrate-contracts-book/ask/reports/v0.2Report">v0.2Report</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/solang/introduction">Solang</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Redspot</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Europa</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">zkMega</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Himalia</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Metis</a></li><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/carpo/introduction">Carpo</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Elara</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Jupiter</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">PatraStore</a></li><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/patract/introduction">Patract</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">v0.2Report</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ask-v02-æŠ¥å‘Š"></a>Ask! v0.2 æŠ¥å‘Š<a class="hash-link" href="#ask-v02-æŠ¥å‘Š" title="Direct link to heading">#</a></h2><p>12 weeks ago, <a href="https://patract.io" target="_blank" rel="noopener noreferrer">Patract</a>æäº¤äº†Kusamaå›½åº“çš„<a href="https://kusama.polkassembly.io/treasury/81" target="_blank" rel="noopener noreferrer">ç¬¬#81å·</a>ææ¡ˆï¼Œå…³äºAsk! v0.2çš„çš„å®ç°ç›®æ ‡, åŸç†åŠè¿‡ç¨‹ã€‚åœ¨é‚£ä»½ææ¡ˆä¸­, æˆ‘ä»¬å°†åœ¨v0.2ç‰ˆæœ¬ä¸­å®Œæˆä»¥ä¸‹åŠŸèƒ½:  </p><blockquote><p><strong>v0.2ç›®æ ‡: å®Œå–„å¹¶å¢å¼ºAsk!çš„åŠŸèƒ½, å¯ä»¥ç¼–å†™å®ç”¨çš„åˆçº¦</strong></p><ul><li>å®Œå–„<code>@storage</code>, <code>@message</code>æ³¨è§£çš„å­é€‰é¡¹, å¢åŠ <code>@event</code>æ³¨è§£.</li><li>å¢åŠ å¤åˆæ•°æ®ç±»å‹<code>StorableMap</code>, <code>StorableArray</code>.</li><li>å®ç°åˆçº¦ç»§æ‰¿.</li><li>å®ç°é€šè¿‡<code>@dynamic</code>æ³¨è§£å®Œæˆè·¨åˆçº¦è°ƒç”¨åŠŸèƒ½.</li><li>æä¾›<code>erc20</code>, <code>erc721</code>ç­‰ç¤ºä¾‹åˆçº¦.</li></ul></blockquote><p>æˆ‘ä»¬å·²ç»å®ç°çš„æºç åœ¨<a href="https://github.com/patractlabs/ask" target="_blank" rel="noopener noreferrer">Ask!</a>é¡¹ç›®ä»“ä½ä¸­, ç¤ºä¾‹åˆçº¦åœ¨<a href="https://github.com/patractlabs/ask/tree/master/examples" target="_blank" rel="noopener noreferrer">examples</a>ç›®å½•ä¸‹,éƒ¨åˆ†æ–‡æ¡£åœ¨<a href="https://docs.patract.io" target="_blank" rel="noopener noreferrer">https://docs.patract.io</a>, è¯·åœ¨<strong>v0.2-review</strong>åˆ†æ”¯ä¸Šreview, å®Œæˆä¹‹åå°†åˆå¹¶åˆ°mainåˆ†æ”¯.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è®¾è®¡ä¸å®ç°"></a>è®¾è®¡ä¸å®ç°<a class="hash-link" href="#è®¾è®¡ä¸å®ç°" title="Direct link to heading">#</a></h2><p>Ask! v0.2æ²¿ç”¨v0.1ä¸­ä½¿ç”¨çš„æ³¨è§£è§£æå’Œç¼–è¯‘æ–¹å¼, æ·»åŠ æ–°çš„åŠŸèƒ½.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ³¨è§£åŠŸèƒ½å®Œå–„"></a>æ³¨è§£åŠŸèƒ½å®Œå–„<a class="hash-link" href="#æ³¨è§£åŠŸèƒ½å®Œå–„" title="Direct link to heading">#</a></h3><ul><li><p><code>@storage</code>æ³¨è§£ä½œç”¨äºclass, æä¾›äº†<code>@packed</code>å’Œ<code>@ignore</code>å­é€‰é¡¹.</p><ul><li><code>@packed</code>æ³¨è§£ä½¿ç”¨äºMapå’ŒArrayç±»å‹çš„æ•°æ®. æ ‡è®°ä¸º<code>@packed</code>çš„æ•°æ®,ä¼šä½œä¸ºä¸€ä¸ªæ•´ä½“å­˜å–. å®ƒçš„å®ç°åŸç†å°†åœ¨#å¤åˆç±»å‹æ•°æ®å­˜å–ç« èŠ‚è¯¦ç»†æè¿°.  </li><li><code>@ignore</code>æ³¨è§£æ ‡è®°çš„ç±», åªä¿å­˜åœ¨memoryä¸­, ä¸ä¼šä¿å­˜åˆ°é“¾ä¸Š, æ‰§è¡Œç¯å¢ƒé€€å‡ºä¹‹å, å³é”€æ¯.  </li></ul></li><li><p><code>@message</code>æ³¨è§£ä½œç”¨äºç±»çš„æ–¹æ³•, æä¾›äº†<code>mutates</code>, <code>payable</code>å’Œ<code>selector</code>é€‰é¡¹.<br>
ä¸€ä¸ªå®Œæ•´çš„<code>@message</code>æ³¨è§£å¦‚: <code>@message(payable, mutates = false, selector = &quot;0xabcdef12&quot;)</code>  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `payable`é€‰é¡¹è¡¨æ˜æ–¹æ³•å¯ä»¥æ¥å—value, é»˜è®¤ä¸æ¥å—. å®ƒçš„å®ç°æ–¹å¼æ˜¯, åœ¨æ‰§è¡Œæ–¹æ³•å‰æ’å…¥ä¸€æ®µé€»è¾‘, åˆ¤æ–­è°ƒç”¨æ–¹æ³•æ—¶æ˜¯å¦æœ‰valueå‘é€. å¦‚æœvalueä¸ä¸º0, åˆæ²¡æœ‰æ³¨è§£ä¸ºpayable, åˆ™æ–¹æ³•æ‰§è¡Œæ—¶ä¼šé€šè¿‡assertæ–¹æ³•é€€å‡º.  </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `mutates`é€‰é¡¹è¡¨æ˜æ–¹æ³•æ˜¯å¦èƒ½å¤Ÿæ”¹å˜çŠ¶æ€å˜é‡çš„å€¼. mutatesçš„é»˜è®¤å€¼ä¸ºtrue, å¹¶ä¸”å¯ä»¥çœç•¥. å®ƒçš„å®ç°æ–¹å¼æ˜¯, å¦‚æœæŒ‡å®šäº†`mutates = false`, é‚£ä¹ˆä¼šåœ¨`seal_set_storage`æ–¹æ³•ä¸­æ‰§è¡Œä¸€ä¸ªassert, ä¸å…è®¸åœ¨è¿™æ ·çš„æ–¹æ³•ä¸­å†™å…¥æ•°æ®åˆ°é“¾ä¸Š.  </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `selector`é€‰é¡¹ç”¨äºè¡¨æ˜è¿™ä¸ªæ–¹æ³•ä½¿ç”¨å›ºå®šçš„å€¼ä½œä¸ºselector, ä¸ç”¨æ ¹æ®çœŸå®çš„æ–¹æ³•åè®¡ç®—ç”Ÿæˆ. å®ƒæ—¢ç”¨æ¥ç”Ÿæˆmetadata.jsonä¸­è¿™ä¸ªæ–¹æ³•çš„`selector`, åŒæ—¶åœ¨è°ƒç”¨åˆçº¦å…¥å£æ–¹æ³•`call`æ—¶, ä¹Ÿä½¿ç”¨å®ƒæ¥ä½œä¸ºæ–¹æ³•dispatchçš„åˆ¤æ–­æ¡ä»¶.  </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨å®ƒä»¬çš„å®ç°æ–¹å¼ä¸­, æ¡ä»¶æ£€æŸ¥åªèƒ½åœ¨<strong>è¿è¡Œæ—¶</strong>æ£€æŸ¥, æš‚æ—¶è¿˜ä¸èƒ½åœ¨<strong>ç¼–è¯‘æ—¶</strong>æ£€æŸ¥.</p></li><li><p>å¢åŠ <code>@event</code>æ³¨è§£, æ”¯æŒå‘å‡ºeventåŠŸèƒ½.<br>
<code>@event</code>æ³¨è§£ä½œç”¨äºclassä¸Š, é¢„å¤„ç†å™¨éœ€è¦ä¸ºè¿™ä¸ªç±»ç”Ÿæˆç¬¦åˆè¦æ±‚çš„é€»è¾‘.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">* `@topic`å­æ³¨è§£ä½œç”¨äºç±»ä¸Šçš„ä¸€ä¸ªæˆå‘˜å˜é‡, è¡¨ç¤ºè¿™ä¸ªå˜é‡å¯ä»¥åœ¨é“¾ä¸Šè¢«è¿‡æ»¤å‡ºæ¥. å®ƒçš„å®ç°æ–¹å¼æ˜¯, åœ¨topic bufferä¸­å­˜æ”¾topicå˜é‡çš„hash, åœ¨data bufferä¸­å­˜æ”¾æ‰€æœ‰å˜é‡çš„å€¼, ç„¶åé€šè¿‡`seal_deposit_event`æ–¹æ³•å‘é€åˆ°é“¾ä¸Š.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å¤åˆæ•°æ®ç±»å‹å­˜å–"></a>å¤åˆæ•°æ®ç±»å‹å­˜å–<a class="hash-link" href="#å¤åˆæ•°æ®ç±»å‹å­˜å–" title="Direct link to heading">#</a></h3><p>å¤åˆæ•°æ®ç±»å‹åœ¨v0.2ç‰ˆæœ¬ä¸­æ”¯æŒäº†<code>StorableMap</code>, <code>StorableArray</code>ä»¥åŠè‡ªå®šä¹‰çš„classå¯¹è±¡(éœ€è¦å®ç°<code>Codec</code>æ¥å£).<br>
å¤åˆæ•°æ®ç±»å‹æ”¯æŒ<code>@spread</code>å’Œ<code>@packed</code>ä¸¤ç§å­˜å‚¨æ¨¡å¼.<br>
å¯¹äº<code>@spread</code>å­˜å‚¨æ¨¡å¼, æ¯ä¸€ä¸ªå­˜å‚¨å•ä½éƒ½æœ‰è‡ªå·±çš„å­˜å‚¨åœ°å€, åªæœ‰åœ¨éœ€è¦çš„æ—¶å€™æ‰ä¼šè½½å…¥.<br>
å¯¹äº<code>@packed</code>å­˜å‚¨æ¨¡å¼, éœ€è¦å°†æ‰€æœ‰çš„å­˜å‚¨å•ä½åºåˆ—åŒ–ä¸ºä¸€ç»„æ•°æ®æµ, å­˜å‚¨åœ¨å…±äº«çš„åœ°å€. æ‰€æœ‰çš„å­˜å‚¨å•å…ƒä¸€èµ·å­˜å–. è¿™ç§æ¨¡å¼ä¸é€‚åˆå¤§æ•°æ®å­˜å–.  </p><ul><li><code>StorableMap</code><br><code>SpreadStorableMap</code>å’Œ<code>PackedStorableMap</code>æ˜¯Mapçš„å°è£…ç±», å¹¶æ·»åŠ äº†æ•°æ®æŒä¹…åŒ–åŠŸèƒ½. åˆ†åˆ«å®ç°äº†<code>@spread</code>å’Œ<code>@packed</code>ä¸¤ç§å­˜å‚¨æ¨¡å¼.<br><code>SpreadStorableMap</code>çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹:<br><img src="https://user-images.githubusercontent.com/2844215/120952420-9172ee80-c77d-11eb-90b8-501fe679fdee.png" alt="SpreadStorableMap"></li></ul><p><code>MapEntry</code>ä¸­ä¿å­˜äº†è¿™ä¸ªMapæ‰€å­˜å‚¨æ•°æ®çš„æ•°é‡ä»¥åŠç¬¬ä¸€ä¸ªå­˜å‚¨ä½ç½®çš„Hash. å®ƒæœ¬èº«çš„å­˜å‚¨ä½ç½®åœ¨<code>Hash(prefix)</code>, å¹¶ä¸”è¿™ä¸ªå­˜å‚¨ä½ç½®å°†ä¼šè¢«å¯¼å‡ºåˆ°metadata.jsonä¸­, ä¾›å¤–éƒ¨Appsè®¿é—®.<br>
<code>KVStore</code>æ˜¯ä¸€ä¸ªå…·ä½“å­˜å‚¨çš„K/Vå€¼, æ¯ä¸€ä¸ªKVStoreé™¤äº†ä¿å­˜Key/Valueä¹‹å¤–, è¿˜ä¿å­˜äº†next/prevèŠ‚ç‚¹çš„Hash. å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå°¾èŠ‚ç‚¹, é‚£ä¹ˆ<code>next</code>çš„å€¼æ˜¯<code>NullHash</code>, å³(<code>0x0000000000000000000000000000000000</code>); å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå¤´èŠ‚ç‚¹, é‚£ä¹ˆ<code>prev</code>çš„å€¼æ˜¯<code>NullHash</code>. é€šè¿‡åŒå‘é“¾è¡¨çš„æ–¹å¼, å¤–éƒ¨Appså¯ä»¥è¿­ä»£è®¿é—®åˆ°æ‰€æœ‰çš„æ•°æ®.<br>
æ¯ä¸€ä¸ª<code>KVStore</code>çš„å­˜å‚¨ä½ç½®éƒ½ç”±ä»¥ä¸‹è§„åˆ™ç¡®å®š: <code>Hash(prefix + key)</code>  </p><p><code>PackedStorableMap</code>çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹:<br>
<img src="https://user-images.githubusercontent.com/2844215/120952350-6be5e500-c77d-11eb-8d97-975961538303.png" alt="PackedStorableMap"></p><p>Packedå­˜å‚¨æ¨¡å¼ä¸Spreadä¸åŒ, å®ƒçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨åŠ è½½/å­˜å‚¨çš„.<br>
<code>MapEntry</code>çš„ä½¿ç”¨ä¸Spreadæ¨¡å¼ä¸€æ ·.<br>
å®ƒçš„æ‰€æœ‰æ‰€æœ‰æ•°æ®, éƒ½é€šè¿‡<code>u8[]</code>çš„æ–¹å¼, å­˜å‚¨åœ¨å›ºå®šä½ç½®<code>Hash(prefix + &quot;.value&quot;)</code>ä¸‹é¢.</p><ul><li><code>StorableArray</code><br><code>SpreadStorableArray</code>å’Œ<code>PackedStorableArray</code>æ˜¯Arrayç±»çš„å°è£…, å¹¶æ·»åŠ äº†æ•°æ®æŒä¹…åŒ–åŠŸèƒ½, åˆ†åˆ«å®ç°äº†<code>@spread</code>å’Œ<code>@packed</code>ä¸¤ç§å­˜å‚¨æ¨¡å¼.<br><code>SpreadStorableArray</code>çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹:<br><img src="https://user-images.githubusercontent.com/2844215/120952366-730cf300-c77d-11eb-82ce-2c2b23e5ce50.png" alt="SpreadStorableArray"></li></ul><p><code>ArrayEntry</code>ä¿å­˜äº†è¿™ä¸ªArrayçš„å…ƒç´ ä¸ªæ•°<code>size</code>ä»¥åŠåºåˆ—åŒ–ä¹‹åçš„bytesçš„æ•°é‡<code>rawBytesCount</code>(Spreadæ¨¡å¼ä¸‹è¿™ä¸ªå€¼æ˜¯<code>0</code>). å®ƒæœ¬èº«çš„å­˜å‚¨ä½ç½®åœ¨<code>Hash(prefix)</code>, å¹¶ä¸”è¿™ä¸ªå­˜å‚¨ä½ç½®å°†ä¼šè¢«å¯¼å‡ºåˆ°metadata.jsonä¸­, ä¾›å¤–éƒ¨Appsè®¿é—®.<br>
æ¯ä¸€ä¸ªå…ƒç´ çš„å­˜å‚¨ä½ç½®éƒ½æ˜¯é€šè¿‡<code>Hash(prefix + index)</code>çš„æ–¹å¼ç¡®å®š, å¹¶ä¸”åœ¨è¿™ä¸ªä½ç½®ä¿å­˜äº†å…ƒç´ åºåˆ—åŒ–ä¹‹åçš„æ•°æ®.  </p><p><code>PackedStorableArray</code>çš„å­˜å‚¨ç»“æ„å¦‚ä¸‹:<br>
<img src="https://user-images.githubusercontent.com/2844215/120952315-5cff3280-c77d-11eb-9b64-6bab108a7249.png" alt="PackedStorableArray"></p><p><code>ArrayEntry</code>ä¿å­˜äº†è¿™ä¸ªArrayçš„å…ƒç´ ä¸ªæ•°<code>size</code>ä»¥åŠåºåˆ—åŒ–ä¹‹åçš„bytesçš„æ•°é‡<code>rawBytesCount</code>.<br>
åœ¨è¿™ä¸ªå­˜å‚¨æ¨¡å¼ä¸‹, æ‰€æœ‰çš„å…ƒç´ éƒ½ä¿å­˜åœ¨åŒä¸€ä¸ªåœ°å€ä¸‹<code>Hash(prefix + &quot;.values&quot;)</code>.</p><ul><li><code>ç»“æ„åŒ–å­˜å‚¨å¯¹è±¡</code><br><code>ç»“æ„åŒ–å­˜å‚¨å¯¹è±¡</code>æ˜¯ä¸€ä¸ªå¯åºåˆ—åŒ–çš„ç±», å³å®ç°äº†<code>Codec</code>æ¥å£çš„ç±», å‡å¯ä»¥å­˜å‚¨åˆ°é“¾ä¸Š.<br>ä¾‹å¦‚ä¸‹çš„class: </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">EmbedObj</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Codec</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   a</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> i8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   b</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   c</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> i8 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> b</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Zero</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">b</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">c</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">toU8a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> bytes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name" style="color:rgb(255, 203, 107)">Array</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token class-name" style="color:rgb(255, 203, 107)">u8</span><span class="token class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Int8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> bWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">ScaleString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> cWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">UInt128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     bytes </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toU8a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toU8a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toU8a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">encodedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> i32 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Int8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> bWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">ScaleString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> cWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">UInt128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> aWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">encodedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> bWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">encodedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> cWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">encodedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">populateFromBytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bytes</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> i32 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> aWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">Int8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     aWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">populateFromBytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     index </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> aWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">encodedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> bWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">ScaleString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     bWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">populateFromBytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     index </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> bWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">encodedLength</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> cWrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">UInt128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     cWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">populateFromBytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> aWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">unwrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">b</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> bWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">c</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> cWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">unwrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">eq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">other</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">EmbedObj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bool </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">b</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">b</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">c</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">notEq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">other</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">EmbedObj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bool </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">eq</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>EmbedObj</code>å¯ä»¥ç”¨åœ¨<code>@storage</code>æ³¨è§£çš„å­˜å‚¨ç±»ä¸­, ä¿å­˜ä¸€ç»„ç›¸å…³è”çš„ä¿¡æ¯. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åˆçº¦ç»§æ‰¿åŠŸèƒ½"></a>åˆçº¦ç»§æ‰¿åŠŸèƒ½<a class="hash-link" href="#åˆçº¦ç»§æ‰¿åŠŸèƒ½" title="Direct link to heading">#</a></h3><p>ç»§æ‰¿åŠŸèƒ½ä½¿åˆçº¦å¤ç”¨æˆä¸ºäº†å¯èƒ½.<br>
v0.2çš„åˆçº¦ç»§æ‰¿éµå¾ªä»¥ä¸‹åŸºæœ¬åŸåˆ™:  </p><ul><li>å¯¹äº<code>@constructor</code>æ–¹æ³•, ä½¿ç”¨å­ç±»åˆçº¦ä¸­çš„å®šä¹‰çš„<code>@constructor</code>æ–¹æ³•. å¦‚æœå­ç±»ä¸­æ²¡æœ‰æä¾›, åˆ™æœ€ç»ˆç”Ÿæˆçš„åˆçº¦ä¸­ä¸æä¾›<code>@constructor</code>, å³ä¾¿çˆ¶ç±»ä¸­å·²ç»å®šä¹‰. å› ä¸ºçˆ¶ç±»æ— æ³•å¾—çŸ¥å­ç±»ä¸­æˆå‘˜å˜é‡æƒ…å†µ, ä¸èƒ½å¤Ÿå®Œå…¨æ­£ç¡®åˆå§‹åŒ–åˆçº¦.</li><li>å¯¹äº<code>@message</code>æ–¹æ³•, ä½¿ç”¨çˆ¶ç±»å’Œå­ç±»ä¸­æ‰€æœ‰messageçš„å¹¶é›†.</li><li>å¯¹äº<code>@storage</code>ç±», ä¸åšé¢å¤–å¤„ç†, ç”±å¼€å‘è€…å†³å®šå¦‚ä½•ä½¿ç”¨.</li></ul><p><strong>ç»§æ‰¿åŠŸèƒ½å®ç°åŸç†</strong>  </p><ul><li>å­åˆçº¦å¿…é¡»ä½äºç¼–è¯‘çš„å…¥å£æ–‡ä»¶ä¸­ã€‚é€šè¿‡å¯¹æ ‡è®°æœ‰@contractæ³¨è§£ç±»æè¿°ä¿¡æ¯åˆ†æï¼Œç¡®å®šä¸»åˆçº¦å…¥å£ã€‚è¯´æ˜ï¼Œå…¥å£å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ª@contractåˆçº¦ã€‚</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">clzPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">declaration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">range</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">source</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sourceKind</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token maybe-class-name">SourceKind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">USER_ENTRY</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token maybe-class-name">AstUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">hasSpecifyDecorator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">clzPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">declaration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token maybe-class-name">ContractDecoratorKind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">CONTRACT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>å®šä½åˆ°ä¸»åˆçº¦ç±»ä¹‹åï¼Œåˆ†æåˆçº¦ç±»çš„ç»§æ‰¿å…³ç³»ï¼Œå¯¹çˆ¶ç±»è§£æè·å–@messageï¼Œ ç„¶ååˆ°å¤„åˆçº¦æ–¹æ³•messageï¼Œé€’å½’æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">resolveContractClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">classPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">instanceMembers</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">classPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">instanceMembers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">ElementUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">isCntrFuncPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">cntrFuncDefs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">ConstructorDef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">FunctionPrototype</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">ElementUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">isMessageFuncPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> msgFunc </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">MessageFunctionDef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">FunctionPrototype</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">msgFuncDefs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">msgFunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolveBaseClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">classPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">resolveBaseClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sonClassPrototype</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">ClassPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sonClassPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">basePrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> basePrototype </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> sonClassPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">basePrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      basePrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">instanceMembers</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      basePrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">instanceMembers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">ElementUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">isMessageFuncPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> msgFunc </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">MessageFunctionDef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">FunctionPrototype</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">instance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">msgFuncDefs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">msgFunc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolveBaseClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">basePrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>@messageå’Œ@storageçš„ç”Ÿæˆæ–¹å¼ï¼Œå‚è€ƒå•åˆçº¦ã€‚</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dynamicæ³¨è§£çš„ä½œç”¨ä¸å®ç°"></a>@dynamicæ³¨è§£çš„ä½œç”¨ä¸å®ç°<a class="hash-link" href="#dynamicæ³¨è§£çš„ä½œç”¨ä¸å®ç°" title="Direct link to heading">#</a></h3><p><code>@dynamic</code>æ³¨è§£ç”¨æ¥æè¿°ä¸€ä¸ªåˆçº¦çš„messageä¿¡æ¯, è¿™ä¸ªåˆçº¦å·²ç»éƒ¨ç½²å¹¶å®Œæˆäº†å®ä¾‹åŒ–. å…¶å®ƒåˆçº¦å¯ä»¥é€šè¿‡@dynamicå£°æ˜, ä¸è¿™ä¸ªåˆçº¦è¿›è¡Œè·¨åˆçº¦äº¤äº’.<br>
<code>@dynamic</code>æ³¨è§£ä½œç”¨äºç±»ä¸Šé¢, é¢„ç¼–è¯‘å™¨å°†å¯¹@dynamicçš„ç±»ç”Ÿæˆè·¨åˆçº¦è°ƒç”¨çš„é€»è¾‘.  </p><p><strong>@dynamicå®ç°åŸç†</strong></p><ul><li>é€šè¿‡@dynamicæ³¨è§£æ‰¾åˆ°å¯¹åº”çš„æ¥å£ç±»</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">ElementUtil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">isDynamicClassPrototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> dynamicInterpreter </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">DynamicIntercepter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">ClassPrototype</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">element</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">dynamics</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dynamicInterpreter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>ç„¶åå¯¹æ¥å£ç±»åˆ†æï¼Œç„¶åå¯¹æ¯ä¸ªæ–¹æ³•ç”Ÿæˆå®ç°è°ƒç”¨æ–¹æ³•ï¼Œ å®ç°è°ƒç”¨ç±»ç”Ÿæˆçš„æ¨¡æ¿å¦‚ä¸‹ã€‚å…¶ä¸­addræ˜¯è¢«è°ƒç”¨çš„åˆçº¦åœ°å€ã€‚</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> dynamicTpl </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string string" style="color:rgb(195, 232, 141)">class {{className}} {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    addr: AccountId;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    constructor(addr: AccountId) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">        this.addr = addr;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    {{#each functions}}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    {{#generateFunction .}}{{/generateFunction}}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">    {{/each}}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token template-string string" style="color:rgb(195, 232, 141)">}</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>å…¶ä¸­æœ€ä¸»è¦çš„æ˜¯å¯¹æ–¹æ³•å®ç°è°ƒç”¨ç±»ã€‚é€šè¿‡generateFunctionæ–¹æ³•æ¥ç”Ÿæˆã€‚generateFunctioné€šè¿‡åˆ†ææ–¹æ³•çš„å‚æ•°ï¼Œç„¶åå¯¹å‚æ•°è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢åˆ°codecç±»å‹ã€‚ç„¶åé€šè¿‡Abi.encodeç¼–ç è¿›è¡Œè·¨åˆçº¦è°ƒç”¨ã€‚</li></ul><p>å¦‚æœåŸå§‹æ¥å£æ–¹å¼</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">transfer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">AccountId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bool </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åˆ™ç”Ÿæˆçš„è°ƒç”¨æ–¹æ³•</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">transfer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">p0</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">AccountId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">p1</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bool </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> data </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Abi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">encode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;transfer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">p0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">UInt128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">p1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> rs </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">call</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token maybe-class-name">BytesReader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token generic-function function" style="color:rgb(130, 170, 255)">decodeInto</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name maybe-class-name" style="color:rgb(255, 203, 107)">Bool</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">unwrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>é€šè¿‡å¯¹åˆçº¦è®¾ç½®åˆçº¦åœ°å€ï¼Œç„¶åé€šè¿‡Abi.encodeå®ç°è°ƒç”¨ã€‚</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ä½¿ç”¨ask-v02"></a>ä½¿ç”¨Ask! v0.2<a class="hash-link" href="#ä½¿ç”¨ask-v02" title="Direct link to heading">#</a></h2><p>Ask!é¡¹ç›®å°šæœ«å‘å¸ƒ, æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æºç cloneåˆ°æœ¬åœ°.<br>
<code>git clone https://github.com/patractlabs/ask</code>  </p><p>cloneå®Œæˆä¹‹å, è¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> ask</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨v0.2é¡¹ç›®ä¸­, æˆ‘ä»¬å·²ç»åœ¨examplesç›®å½•ä¸‹, æä¾›äº†<code>erc20</code>å’Œ<code>erc721</code>ä¸¤ä¸ªé¡¹ç›®. ä¸‹é¢æˆ‘ä»¬ç”¨<code>erc20</code>é¡¹ç›®æ¥è¯´æ˜v0.2æ–°å¢åŠŸèƒ½å¦‚ä½•ä½¿ç”¨.  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç¼–å†™åˆçº¦"></a>ç¼–å†™åˆçº¦<a class="hash-link" href="#ç¼–å†™åˆçº¦" title="Direct link to heading">#</a></h3><p>   åœ¨ç¤ºä¾‹çš„erc20åˆçº¦ä¸­, æˆ‘ä»¬ä½¿ç”¨åˆ°äº†v0.2ç‰ˆæœ¬ä¸­çš„ä»¥ä¸‹ç‰¹æ€§:</p><ul><li><strong>åˆçº¦ç»§æ‰¿</strong></li><li><strong>åˆçº¦ä¸­å‘é€Event</strong></li><li><strong>ä½¿ç”¨å¤åˆå­˜å‚¨ç±»å‹: Map</strong></li><li><strong><code>mutates = false</code>ç­‰å…¶å®ƒæ³¨è§£</strong></li></ul><blockquote><p>æ­¤å¤„æä¾›çš„ERC20.tsåˆçº¦, ä»…ä»…ç”¨æ¥å±•ç¤ºAsk!çš„ä½¿ç”¨æ–¹å¼å’Œèƒ½åŠ›, ä¸èƒ½ä½œä¸ºæ­£å¼çš„Tokenåˆçº¦ä½¿ç”¨.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="erc20åˆçº¦"></a>ERC20åˆçº¦<a class="hash-link" href="#erc20åˆçº¦" title="Direct link to heading">#</a></h4><p><code>ERC20.ts</code>æ˜¯ä¸€ä¸ªç¬¦åˆERC20æ ‡å‡†çš„åŸºç±», å®ƒå°è£…äº†å¯é‡å¤ä½¿ç”¨çš„ERC20æ¥å£, å¦‚<code>transfer</code>, <code>approve</code>ç­‰. å®šä¹‰äº†åˆçº¦ä½¿ç”¨åˆ°çš„å­˜å‚¨ç»“æ„, ä»¥åŠäº‹ä»¶<code>Transfer</code>å’Œ<code>Approval</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@contract</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name constant" style="color:rgb(130, 170, 255)">ERC20</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> storage</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">ERC20Storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">ERC20Storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token keyword" style="font-style:italic">constructor</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">symbol</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">symbol</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">symbol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">decimal</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">totalSupply</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">Zero</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token function" style="color:rgb(130, 170, 255)">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mutates </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token function" style="color:rgb(130, 170, 255)">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mutates </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">symbol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">symbol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token function" style="color:rgb(130, 170, 255)">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mutates </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">decimal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u8 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">decimal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token function" style="color:rgb(130, 170, 255)">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mutates </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">totalSupply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">totalSupply</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token function" style="color:rgb(130, 170, 255)">message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mutates </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">balanceOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">account</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">AccountId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">balances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">account</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">unwrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @message</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">transfer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">recipient</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">AccountId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> bool </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> msg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">sender</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">_transfer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> recipient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// .........</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨å·²ç»æ‹¥æœ‰äº†ERC20åˆçº¦çš„æƒ…å†µä¸‹, æˆ‘ä»¬å‘è¡Œæ–°çš„Tokenå°±ä¼šéå¸¸çš„ç®€å•, ä¾‹å¦‚<code>index.ts</code>åˆçº¦ä¸­å‘è¡Œçš„<code>MyToken</code>(åªä¸ºäº†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Ask!å‘è¡ŒERC20 Token, æœªåŠ æƒé™æ§åˆ¶é€»è¾‘):  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">AccountId</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token imports"> u128 </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ask-lang&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token constant" style="color:rgb(130, 170, 255)">ERC20</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./ERC20&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@contract</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name" style="color:rgb(255, 203, 107)">MyToken</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name constant" style="color:rgb(130, 170, 255)">ERC20</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">super</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @</span><span class="token keyword" style="font-style:italic">constructor</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">symbol</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">super</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">symbol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @message</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">mint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">to</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">AccountId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">_mint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @message</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">burn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">from</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token maybe-class-name">AccountId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> u128</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">_burn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç¼–è¯‘åˆçº¦"></a>ç¼–è¯‘åˆçº¦<a class="hash-link" href="#ç¼–è¯‘åˆçº¦" title="Direct link to heading">#</a></h3><p>  ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤æ¥ç¼–è¯‘æˆ‘ä»¬çš„åˆçº¦:  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ npx ask examples/erc20/index.ts</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ç¼–è¯‘æˆåŠŸä¹‹å, å°†ä¼šåœ¨<code>examples/erc20/target/</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>target.wasm</code>å’Œ<code>metadata.json</code>æ–‡ä»¶.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="éƒ¨ç½²å’Œè°ƒç”¨"></a>éƒ¨ç½²å’Œè°ƒç”¨<a class="hash-link" href="#éƒ¨ç½²å’Œè°ƒç”¨" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬åœ¨<a href="https://github.com/patractlabs/europa" target="_blank" rel="noopener noreferrer">Europa</a>æ²™ç›’ç¯å¢ƒä¸­éƒ¨ç½²å’Œæµ‹è¯•åˆçº¦åŠŸèƒ½, å‰ç«¯ä½¿ç”¨<a href="https://github.com/polkadot-js/apps" target="_blank" rel="noopener noreferrer">polkadot-js</a>ä½œä¸ºäº¤äº’ç•Œé¢.<br>
æµ‹è¯•æ­¥éª¤å¦‚ä¸‹:  </p><ol><li><p>é¦–å…ˆæˆ‘ä»¬æŒ‰ç…§<code>Europa</code>å’Œ<code>plokadot-js</code>çš„è¯´æ˜, å¯åŠ¨èŠ‚ç‚¹å’ŒæœåŠ¡.  </p></li><li><p>åœ¨<code>polkadot-js</code>çš„åˆçº¦ç•Œé¢ä¸­, ä¸Šä¼ <code>erc20/target</code>ä¸‹çš„<code>metadata.json</code>å’Œ<code>target.wasm</code>æ–‡ä»¶.  </p></li><li><p>éƒ¨ç½²å·²ç»ä¸Šä¼ çš„åˆçº¦, è°ƒç”¨<code>default</code>æ–¹æ³•å‘è¡ŒToken.  </p></li><li><p>è°ƒç”¨<code>mint</code>, <code>transfer</code>, <code>approve</code>, <code>burn</code>ç­‰æ–¹æ³•, æ“ä½œERC20 Token.  </p></li></ol><p><img src="https://user-images.githubusercontent.com/2844215/120952438-9cc61a00-c77d-11eb-9745-454f977184be.gif"></p><p>è‡³æ­¤, æˆ‘ä»¬é€šè¿‡ç»§æ‰¿çš„æ–¹å¼, æˆåŠŸçš„å‘è¡Œäº†ERC20é€šè¯.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ask-v02å·²ç»å®ç°çš„å†…å®¹"></a>Ask! v0.2å·²ç»å®ç°çš„å†…å®¹<a class="hash-link" href="#ask-v02å·²ç»å®ç°çš„å†…å®¹" title="Direct link to heading">#</a></h2><ul><li>å®Œå–„<code>@storage</code>, <code>@message</code>æ³¨è§£çš„å­é€‰é¡¹, å¢åŠ <code>@event</code>æ³¨è§£.</li><li>å¢åŠ å¤åˆæ•°æ®ç±»å‹<code>StorableMap</code>, <code>StorableArray</code>.</li><li>å®ç°åˆçº¦ç»§æ‰¿.</li><li>å®ç°é€šè¿‡<code>@dynamic</code>æ³¨è§£å®Œæˆè·¨åˆçº¦è°ƒç”¨åŠŸèƒ½.</li><li>æä¾›<code>erc20</code>, <code>erc721</code>, <code>crosscall</code>ç­‰ç¤ºä¾‹åˆçº¦.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/patractlabs/substrate-contracts-book/docs/ask/reports/v0.2Report.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/substrate-contracts-book/ask/reports/v0.1Report"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« v0.1Report</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/substrate-contracts-book/solang/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Solang Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ask-v02-æŠ¥å‘Š" class="table-of-contents__link">Ask! v0.2 æŠ¥å‘Š</a></li><li><a href="#è®¾è®¡ä¸å®ç°" class="table-of-contents__link">è®¾è®¡ä¸å®ç°</a><ul><li><a href="#æ³¨è§£åŠŸèƒ½å®Œå–„" class="table-of-contents__link">æ³¨è§£åŠŸèƒ½å®Œå–„</a></li><li><a href="#å¤åˆæ•°æ®ç±»å‹å­˜å–" class="table-of-contents__link">å¤åˆæ•°æ®ç±»å‹å­˜å–</a></li><li><a href="#åˆçº¦ç»§æ‰¿åŠŸèƒ½" class="table-of-contents__link">åˆçº¦ç»§æ‰¿åŠŸèƒ½</a></li><li><a href="#dynamicæ³¨è§£çš„ä½œç”¨ä¸å®ç°" class="table-of-contents__link">@dynamicæ³¨è§£çš„ä½œç”¨ä¸å®ç°</a></li></ul></li><li><a href="#ä½¿ç”¨ask-v02" class="table-of-contents__link">ä½¿ç”¨Ask! v0.2</a><ul><li><a href="#ç¼–å†™åˆçº¦" class="table-of-contents__link">ç¼–å†™åˆçº¦</a></li><li><a href="#ç¼–è¯‘åˆçº¦" class="table-of-contents__link">ç¼–è¯‘åˆçº¦</a></li><li><a href="#éƒ¨ç½²å’Œè°ƒç”¨" class="table-of-contents__link">éƒ¨ç½²å’Œè°ƒç”¨</a></li></ul></li><li><a href="#ask-v02å·²ç»å®ç°çš„å†…å®¹" class="table-of-contents__link">Ask! v0.2å·²ç»å®ç°çš„å†…å®¹</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/substrate-contracts-book/assets/js/runtime~main.83f58760.js"></script>
<script src="/substrate-contracts-book/assets/js/main.ee6e64d2.js"></script>
</body>
</html>
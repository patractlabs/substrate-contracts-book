<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plugins</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/substrate-contracts-book/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css" as="style"><link rel="preload" href="/substrate-contracts-book/assets/js/app.a9699121.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/3.5d94f222.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/1.293685b3.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/77.ea2b2297.js" as="script"><link rel="prefetch" href="/substrate-contracts-book/assets/js/10.a64abb0b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/100.501f19a5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/101.d002fd15.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/102.50e2771a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/103.5a075e67.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/104.9da7c703.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/105.358a8f69.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/106.be1e8e2c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/107.ec4c4226.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/108.63aa57c2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/109.4f02c2fe.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/11.9675e5bf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/110.7b0d1d2d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/111.15474cb8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/112.f65646e4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/113.b0211c99.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/114.dca32a54.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/115.6da7802a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/116.a1c8636c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/117.2054856a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/118.b1203f7a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/119.a744889c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/12.da8a7a28.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/120.8263624a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/121.e8f982c8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/122.3a9053a3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/123.45501f56.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/124.086e2c17.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/125.51bee155.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/126.b217568b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/127.1b675a3c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/128.db6ce07b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/129.9da7387d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/13.906c9bce.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/130.7af5291a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/131.5bdda7aa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/132.d47f3142.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/133.722dac7e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/134.b593eacf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/135.137111bc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/136.709ef767.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/137.70e723b3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/138.c2ca73a2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/139.48a56015.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/14.b8a0e1dd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/15.c5ce89d3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/16.49e2534d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/17.7531fb9f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/18.3d2c61e6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/19.7ca42431.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/20.e8710999.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/21.d499b7df.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/22.5ee39aa3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/23.f5c2e26e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/24.7fb8ffb8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/25.bf40e35f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/26.10e01aab.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/27.fd7c5379.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/28.98b4c530.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/29.39a8ab6b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/30.4037b5c0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/31.64e7f487.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/32.e92210ad.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/33.63815826.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/34.9b6698a5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/35.4c199290.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/36.06e9c669.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/37.d624b0b4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/38.6d515e6f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/39.1b727b1b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/4.bc849752.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/40.d8dc9a8e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/41.98f82626.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/42.fd51edc6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/43.ec2f8565.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/44.5268e123.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/45.8c8ccef9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/46.5b95b4f7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/47.72376a1e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/48.1a5ad0c1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/49.20f948a6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/5.07d757d6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/50.b7f92dd7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/51.f2708633.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/52.cca982d7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/53.d9e03821.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/54.715b9574.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/55.ca3ed628.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/56.4ded589e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/57.3e9b8bb7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/58.92330bd4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/59.66968711.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/6.4ad5d8b7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/60.c74dedcd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/61.2ff478dc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/62.93f90f01.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/63.82c82414.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/64.ecbcf63b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/65.64acc219.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/66.0eee9a58.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/67.d171d61b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/68.59c0f201.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/69.cd806e1a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/7.af21c7ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/70.a5aebdd4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/71.0fa1153b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/72.450de6b0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/73.3db5d17a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/74.35592528.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/75.315bc37e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/76.3af1de86.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/78.b08396b8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/79.b15448f8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/8.8792de24.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/80.e1360fff.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/81.b1456801.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/82.91416034.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/83.56c921db.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/84.bf930c87.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/85.ac36e463.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/86.f9bb9241.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/87.c01a605d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/88.e4b4a336.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/89.a75d9fc3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/9.88a5da26.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/90.c8f7baf8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/91.bb76e695.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/92.cd3a25ff.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/93.1eb6317d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/94.6758c69c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/95.4ef3a0b5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/96.06d4025e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/97.082e126b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/98.5c5ca65d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/99.d5033100.js">
    <link rel="stylesheet" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/substrate-contracts-book/en/" class="home-link router-link-active"><img src="/substrate-contracts-book/logo.svg" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  Official Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/en/" class="nav-link"><i class="undefined"></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/redspot/plugin.html" class="nav-link"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/redspot/plugin.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><!----> <h3 class="name" data-v-828910c6>
    patractlabs
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>130</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  Official Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/en/" class="nav-link"><i class="undefined"></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/redspot/plugin.html" class="nav-link"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/redspot/plugin.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><a href="/substrate-contracts-book/en/" aria-current="page" class="sidebar-link">Summary</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/introduction" class="sidebar-heading clickable"><span>Introduction</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/contracts/overview.html" class="sidebar-link">Contract System Overview</a></li><li><a href="/substrate-contracts-book/en/contracts/model.html" class="sidebar-link">Contract model</a></li><li><a href="/substrate-contracts-book/en/contracts/language.html" class="sidebar-link">Contract language (framework)</a></li><li><a href="/substrate-contracts-book/en/contracts/wasm_first_step.html" class="sidebar-link">Brief introduction of Wasm</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/ink/introduction" class="sidebar-heading clickable"><span>ink!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ink/tutorial.html" class="sidebar-link">ink! tutorial</a></li><li><a href="/substrate-contracts-book/en/ink/framework.html" class="sidebar-link">ink! Framework</a></li><li><a href="/substrate-contracts-book/en/ink/edsl-basic.html" class="sidebar-link">ink! eDSL basic elements</a></li><li><a href="/substrate-contracts-book/en/ink/call-contracts.html" class="sidebar-link">ink! 跨合约调用</a></li><li><a href="/substrate-contracts-book/en/ink/ink-solidity.html" class="sidebar-link">ink! 与solidity的对比</a></li><li><a href="/substrate-contracts-book/en/ink/cargo-contract.html" class="sidebar-link">cargo-contract</a></li><li><a href="/substrate-contracts-book/en/ink/trap.html" class="sidebar-link">ink! 当前的坑</a></li></ul></section></li><li><a href="/substrate-contracts-book/en/solang/introduction.html" class="sidebar-link">Solang</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/redspot/introduction" class="sidebar-heading clickable"><span>Redspot</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/tutorial.html" class="sidebar-link">Tutorial</a></li><li><a href="/substrate-contracts-book/en/redspot/overview.html" class="sidebar-link">Introduction</a></li><li><a href="/substrate-contracts-book/en/redspot/configuration.html" class="sidebar-link">Configure</a></li><li><a href="/substrate-contracts-book/en/redspot/tasks.html" class="sidebar-link">Tasks</a></li><li><a href="/substrate-contracts-book/en/redspot/runtime-environment.html" class="sidebar-link">Runtime Environment</a></li><li><a href="/substrate-contracts-book/en/redspot/console.html" class="sidebar-link">Console</a></li><li><a href="/substrate-contracts-book/en/redspot/q-and-a.html" class="sidebar-link">Q &amp; A</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/redspot/plugin" class="sidebar-heading clickable active"><span>Plugin</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-decimals.html" class="sidebar-link">@redspot/decimals</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-known-types.html" class="sidebar-link">@redspot/known-types</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-chai.html" class="sidebar-link">@redspot/chai</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-gas-reporter.html" class="sidebar-link">@redspot/gas-reporter</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-patract.html" class="sidebar-link">@redspot/patract</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-explorer.html" class="sidebar-link">@redspot/explorer</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/europa/introduction" class="sidebar-heading clickable"><span>Europa</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/europa/tutorial.html" class="sidebar-link">Europa tutorial</a></li><li><a href="/substrate-contracts-book/en/europa/execution_info.html" class="sidebar-link">Europa contract execution log information interpretation</a></li><li><a href="/substrate-contracts-book/en/europa/sample.html" class="sidebar-link">Europa debugging example</a></li><li><a href="/substrate-contracts-book/en/europa/wasm_executor.html" class="sidebar-link">Europa Wasm executor</a></li><li><a href="/substrate-contracts-book/en/europa/wasm_backtrace.html" class="sidebar-link">Europa's Wasm Backtrace</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/zkmega/introduction" class="sidebar-heading clickable"><span>zkMega</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/zkmega/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/en/zkmega/contract.html" class="sidebar-link">Contract</a></li><li><a href="/substrate-contracts-book/en/zkmega/example.html" class="sidebar-link">Example</a></li><li><a href="/substrate-contracts-book/en/zkmega/benchmark.html" class="sidebar-link">Benchmark</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/himalia/introduction" class="sidebar-heading clickable"><span>Himalia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/himalia/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/en/himalia/go-patract.html" class="sidebar-link">go-patract</a></li><li><a href="/substrate-contracts-book/en/himalia/py-patract.html" class="sidebar-link">py-patract</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/metis/introduction" class="sidebar-heading clickable"><span>Metis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/metis/tokens.html" class="sidebar-link">ERC20</a></li><li><a href="/substrate-contracts-book/en/metis/access-control.html" class="sidebar-link">Access Control</a></li></ul></section></li><li><a href="/substrate-contracts-book/en/carpo/introduction.html" class="sidebar-link">Carpo</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/elara/introduction" class="sidebar-heading clickable"><span>Elara</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/elara/tutorial.html" class="sidebar-link">Tutorial</a></li><li><a href="/substrate-contracts-book/en/elara/design.html" class="sidebar-link">Design Brief</a></li><li><a href="/substrate-contracts-book/en/elara/API.html" class="sidebar-link">API access</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/patra-store/introduction" class="sidebar-heading clickable"><span>PatraStore</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/patra-store/overview.html" class="sidebar-link">Overview</a></li><li><a href="/substrate-contracts-book/en/patra-store/getting-starter.html" class="sidebar-link">Getting started</a></li><li><a href="/substrate-contracts-book/en/patra-store/publish-dapps.html" class="sidebar-link">Publish DApp</a></li></ul></section></li><li><a href="/substrate-contracts-book/en/patract/introduction.html" class="sidebar-link">Patract</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Plugins</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>patractlabs</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="plugins"><a href="#plugins" class="header-anchor">#</a> Plugins</h1> <p>The core functionality of Redspot includes the Redspot runtime environment and the tasks of compiling contracts, running tests, and running scripts.</p> <p>Other functions such as test suites with contracts, contract interaction, accessing contracts, setting up different chain configurations, etc. are provided by plugins. Users can choose which plugins they want to use. Introducing a plugin is simple. Add it as an npm dependency. Then add to <code>redspot.config.ts</code>.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RedspotUserConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redspot/types'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@redspot/patract'</span><span class="token punctuation">;</span> <span class="token comment">// introduce the @redspot/patract plugin</span>
<span class="token keyword">import</span> <span class="token string">'@redspot/chai'</span><span class="token punctuation">;</span> <span class="token comment">// import @redspot/chai plugin</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
 <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> RedspotUserConfig<span class="token punctuation">;</span>
</code></pre></div><p>Here we introduce a few of the officially provided plugins.</p> <h2 id="redspot-patract"><a href="#redspot-patract" class="header-anchor">#</a> @redspot/patract</h2> <p>This plugin extends the Redspot runtime environment and adds the patract attribute, which allows you to access patract instances like this.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> patract <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redspot'</span> 
</code></pre></div><p>The type definition of patract is as follows.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Patract</span> <span class="token punctuation">{</span>
     Contract<span class="token operator">:</span> Contract<span class="token punctuation">;</span>
     ContractFactory<span class="token operator">:</span> ContractFactory<span class="token punctuation">;</span>
    <span class="token comment">/**
     * Generating Contract Instance from Contract Addresses
     *
     * @param contractName Contract name
     * @param address contract address
     * @param signer The account used to sign, or the first account in the user configured if it is undefined.
     * @returns Contract Instance
     */</span>
    <span class="token function">getContractAt</span><span class="token punctuation">(</span>
      contractName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
      address<span class="token operator">:</span> AccountId <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
      signer<span class="token operator">?</span><span class="token operator">:</span> Signer
    <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Contract<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Return the contract factory
     *
     * @param contractName Contract name
     * @param signer The account used to sign, or the first account in the user configured if it is undefined.
     * @returns Contract Factory Instance
     */</span>
    <span class="token function">getContractFactory</span><span class="token punctuation">(</span>
      contractName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
      signer<span class="token operator">?</span><span class="token operator">:</span> Signer
    <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ContractFactory<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * Generate a random account and transfer token to it
     *
     * @param from This account will be transferred to the new account
     * @param amount The amount transferred to the new account
     * @returns New Account
     */</span>
    <span class="token function">getRandomSigner</span><span class="token punctuation">(</span>
      <span class="token keyword">from</span><span class="token operator">?</span><span class="token operator">:</span> Signer<span class="token punctuation">,</span>
      amount<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">BN</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> BigInt
    <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Signer<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="getrandomsigner-from-amount-promise-signer"><a href="#getrandomsigner-from-amount-promise-signer" class="header-anchor">#</a> <code>getRandomSigner(from, amount): Promise&lt;Signer&gt;</code></h4> <p>getRandomSigner is a utility function that creates a random signer to be generated and passes some initial amount to it from from.</p> <h4 id="getcontractfactory-contractname-signer-promise-contractfactory"><a href="#getcontractfactory-contractname-signer-promise-contractfactory" class="header-anchor">#</a> <code>getContractFactory(contractName, signer?): Promise&lt;ContractFactory&gt;</code></h4> <p>This function will create an instance of contractFactory with the contract name and signer.</p> <p>Note that the contract must have been compiled successfully. You can find the metadata file for this in artifacts.</p> <h4 id="getcontractat-contractname-address-signer-promise-contract"><a href="#getcontractat-contractname-address-signer-promise-contract" class="header-anchor">#</a> <code>getContractAt(contractName, address, signer): Promise&lt;Contract&gt;</code></h4> <p>Creates a Contract instance with a contract name, contract address and signer.</p> <p>Note that the contract must have been compiled successfully. You can find the metadata file for it in artifacts.</p> <p>###ContractFactory</p> <p>The ContractFactory is mainly used for contract deployment.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> patract <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redspot'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getContractFactory<span class="token punctuation">,</span> getRandomSigner <span class="token punctuation">}</span> <span class="token operator">=</span> patract<span class="token punctuation">;</span>

<span class="token keyword">const</span> signers <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getSigners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contractFactory <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContractFactory</span><span class="token punctuation">(</span><span class="token string">'erc20'</span><span class="token punctuation">,</span> signers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contractFactory<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="new-contractfactory-address-contractmetadata-api-signer"><a href="#new-contractfactory-address-contractmetadata-api-signer" class="header-anchor">#</a> <code>new ContractFactory(address, contractMetadata, api, signer)</code></h4> <p>Create a contractFactory instance with contract address, metadata, api and signer.</p> <h4 id="contractfactory-deploy-constructororid-args-overrides-promise-contract"><a href="#contractfactory-deploy-constructororid-args-overrides-promise-contract" class="header-anchor">#</a> <code>contractFactory.deploy(constructorOrId, . . args[ , overrides ]): Promise&lt;Contract&gt;</code></h4> <p>constructorOrId is the name of the contructor of the contract to be called. Note that for some contracts that use <code>trait</code>, the name of the contructor should be something like this.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contractFactory<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token string">'baseErc20,new'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>args is the list of arguments you need to pass to the contructor you are using.</p> <p>overrides are optional and can be used to specify gasLimit, value, signer, salt, etc.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contractFactory<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token string">'baseErc20,new'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  gaslimit<span class="token operator">:</span> <span class="token string">'10000000000000000000000'</span><span class="token punctuation">,</span>
  salt<span class="token operator">:</span> <span class="token string">'jkqwezlkwklqreqw'</span><span class="token punctuation">,</span>
  signer<span class="token operator">:</span> signers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  value<span class="token operator">:</span> <span class="token string">'32133210000000000000000000000'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>gasLimit is the maximum gas value that can be used for this transaction.</p> <p>salt is used to generate the address of the contract. The same contract address will be generated if the deployer, deployment parameters and salt are the same.</p> <p>signer When creating a contractFactory, there is a signer parameter that is used for the default transaction signature. The signer item can override the default signature account.</p> <p>value is the amount to be passed to the contract to be created.</p> <p>Note that <code>@redspot/patract</code> will not handle numeric amount precision and needs to be handled by the user.</p> <h4 id="contractfactory-deployed-constructororid-args-overrides-promise-contract"><a href="#contractfactory-deployed-constructororid-args-overrides-promise-contract" class="header-anchor">#</a> <code>contractFactory.deployed(constructorOrId, . .args[ , overrides ]): Promise&lt;Contract&gt;</code></h4> <p>This method is similar to <code>contractFactory.deploy</code>, the only difference is that <code>deployed</code> checks in advance if the contract address to be generated exists, and if it does, does not try to deploy it, but instead creates a <code>Contract</code> instance directly using that contract address.</p> <h4 id="contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress"><a href="#contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress" class="header-anchor">#</a> <code>contractFactory.instantiate(constructorOrId, . .args[ , overrides ]): Promise&lt;ContractAddress&gt;</code></h4> <p>If wasm has been uploaded to the chain, you can call <code>contractFactory.instantiate</code> directly to instantiate the contract. It takes the same arguments as <code>deploy</code>, but returns the contract address.</p> <h4 id="contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress-2"><a href="#contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress-2" class="header-anchor">#</a> <code>contractFactory.instantiate(constructorOrId, . .args[ , overrides ]): Promise&lt;ContractAddress&gt;</code></h4> <p>If wasm has been uploaded to the chain, you can call <code>contractFactory.instantiate</code> directly to instantiate the contract. It takes the same arguments as <code>deploy</code>, but returns the contract address.</p> <h4 id="contractfactory-attach-address-contract"><a href="#contractfactory-attach-address-contract" class="header-anchor">#</a> <code>contractFactory.attach(address):Contract</code></h4> <p>Generates a <code>Contract</code> instance using the specified contract address</p> <h4 id="contractfactory-connect-signer-contractfactory"><a href="#contractfactory-connect-signer-contractfactory" class="header-anchor">#</a> <code>contractFactory.connect(signer): ContractFactory</code></h4> <p>Create a new contractFactory instance with the specified signer</p> <h3 id="contract"><a href="#contract" class="header-anchor">#</a> Contract</h3> <h4 id="new-contract-address-contractmetadata-api-signer"><a href="#new-contract-address-contractmetadata-api-signer" class="header-anchor">#</a> <code>new Contract(address, contractMetadata, api, signer)</code></h4> <p>Create a contractFactory instance with the contract address, contractMetadata, api and signer.</p> <h4 id="contract-query-messagename-args-overrides"><a href="#contract-query-messagename-args-overrides" class="header-anchor">#</a> <code>contract.query.MessageName(. .args[, overrides])</code></h4> <p>Similar to in polkadotjs, contract.query[MessageName] can call <code>contracts.call</code> rpc. For example, in the erc20 contract, to get the account balance.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span>someaddress<span class="token punctuation">)</span>
</code></pre></div><p>The return value is of the following type.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ContractCallOutcome</span> <span class="token punctuation">{</span>
    debugMessage<span class="token operator">:</span> Text<span class="token punctuation">;</span>
    gasConsumed<span class="token operator">:</span> u64<span class="token punctuation">;</span>
    output<span class="token operator">:</span> Codec <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    result<span class="token operator">:</span> ContractExecResultResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It is the same as in polkadotjs api-contract.</p> <p>overrides are optional and can be used to specify gasLimit, value, etc.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span><span class="token string">'baseErc20,new'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	gasLimit：<span class="token string">'1231231231233123123'</span>
  value<span class="token operator">:</span> <span class="token string">'3213321000000000000000000'</span>
  signer： signers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>gasLimit is the maximum amount of gas that can be used for this transaction.</p> <p>salt is used to generate the address of the contract. The same contract address will be generated if the deployer, deployment parameters and salt are identical.</p> <p>signer When creating a contractFactory, there is a signer parameter that is used for the default transaction signature. The signer item can override the default signature account.</p> <p>value is the amount to be passed to the contract to be created.</p> <p>Note that <code>@redspot/patract</code> will not handle numeric amount precision and needs to be handled by the user.</p> <h4 id="contractfactory-deployed-constructororid-args-overrides-promise-contract-2"><a href="#contractfactory-deployed-constructororid-args-overrides-promise-contract-2" class="header-anchor">#</a> <code>contractFactory.deployed(constructorOrId, . .args[ , overrides ]): Promise&lt;Contract&gt;</code></h4> <p>This method is similar to <code>contractFactory.deploy</code>, the only difference is that <code>deployed</code> checks in advance if the contract address to be generated exists, and if it does, does not try to deploy it, but instead creates a <code>Contract</code> instance directly using that contract address.</p> <h4 id="contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress-3"><a href="#contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress-3" class="header-anchor">#</a> <code>contractFactory.instantiate(constructorOrId, . .args[ , overrides ]): Promise&lt;ContractAddress&gt;</code></h4> <p>If wasm has been uploaded to the chain, you can call <code>contractFactory.instantiate</code> directly to instantiate the contract. It takes the same arguments as <code>deploy</code>, but returns the contract address.</p> <h4 id="contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress-4"><a href="#contractfactory-instantiate-constructororid-args-overrides-promise-contractaddress-4" class="header-anchor">#</a> <code>contractFactory.instantiate(constructorOrId, . .args[ , overrides ]): Promise&lt;ContractAddress&gt;</code></h4> <p>If wasm has been uploaded to the chain, you can call <code>contractFactory.instantiate</code> directly to instantiate the contract. It takes the same arguments as <code>deploy</code>, but returns the contract address.</p> <h4 id="contractfactory-attach-address-contract-2"><a href="#contractfactory-attach-address-contract-2" class="header-anchor">#</a> <code>contractFactory.attach(address):Contract</code></h4> <p>Generates a <code>Contract</code> instance using the specified contract address</p> <h4 id="contractfactory-connect-signer-contractfactory-2"><a href="#contractfactory-connect-signer-contractfactory-2" class="header-anchor">#</a> <code>contractFactory.connect(signer): ContractFactory</code></h4> <p>Create a new contractFactory instance with the specified signer</p> <h3 id="contract-2"><a href="#contract-2" class="header-anchor">#</a> Contract</h3> <h4 id="new-contract-address-contractmetadata-api-signer-2"><a href="#new-contract-address-contractmetadata-api-signer-2" class="header-anchor">#</a> <code>new Contract(address, contractMetadata, api, signer)</code></h4> <p>Creates a contractFactory instance with the contract address, contractMetadata, api and signer.</p> <h4 id="contract-query-messagename-args-overrides-2"><a href="#contract-query-messagename-args-overrides-2" class="header-anchor">#</a> <code>contract.query.MessageName(. .args[, overrides])</code></h4> <p>Similar to in polkadotjs, contract.query[MessageName] can call <code>contracts.call</code> rpc. For example, in the erc20 contract, to get the account balance.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span>someaddress<span class="token punctuation">)</span>
</code></pre></div><p>The return value is of the following type.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ContractCallOutcome</span> <span class="token punctuation">{</span>
    debugMessage<span class="token operator">:</span> Text<span class="token punctuation">;</span>
    gasConsumed<span class="token operator">:</span> u64<span class="token punctuation">;</span>
    output<span class="token operator">:</span> Codec <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    result<span class="token operator">:</span> ContractExecResultResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It is the same as in polkadotjs api-contract.</p> <p>overrides are optional and can be used to specify gasLimit, value, etc.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span><span class="token string">'baseErc20,new'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	gasLimit<span class="token operator">:</span> <span class="token string">'1231231231231233123123'</span>
  value<span class="token operator">:</span> <span class="token string">'32133210000000000000000000000'</span>
  signer<span class="token operator">:</span> signers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>gasLimit value refers to the gasLimit and value in the <code>contracts.call</code> rpc. signer can specify the origin address of <code>contracts.call</code>.</p> <h4 id="contract-optimizegas-messagename-args-overrides"><a href="#contract-optimizegas-messagename-args-overrides" class="header-anchor">#</a> <code>contract.optimizeGas.MessageName(.. . args[, overrides])</code></h4> <p>This function is similar to <code>contract.query.MessageName</code>, but the return value is the estimated gas to be consumed</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>estimateGas<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span>someaddress<span class="token punctuation">)</span>
result <span class="token comment">// BN(232130000000)</span>
</code></pre></div><h4 id="contract-tx-messagename-args-overrides"><a href="#contract-tx-messagename-args-overrides" class="header-anchor">#</a> <code>contract.tx.MessageName(. .args[,overrides])</code></h4> <p>With <code>contract.tx.MessageName</code> you can execute the contract's transactions. For example.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>someddress<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
</code></pre></div><p>Unlike polkadotjs, this function returns a promise that will wait until the transaction is up, or until an error occurs before it is resolved.</p> <p>The return value type is as follows.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">TransactionResponse</span> <span class="token punctuation">{</span>
  <span class="token keyword">from</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  txHash<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  blockHash<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  error<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    message<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  result<span class="token operator">:</span> SubmittableResult<span class="token punctuation">;</span>
  events<span class="token operator">?</span><span class="token operator">:</span> DecodedEvent<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">DecodedEvent</span> <span class="token punctuation">{</span>
  args<span class="token operator">:</span> Codec<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  event<span class="token operator">:</span> AbiEvent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can get the events of the parsed contract directly via <code>result.events</code>. If the execution goes wrong, you can get the error message via <code>result.error.message</code>.</p> <p>overrides are optional and can be used to specify gasLimit, value, signer, etc.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>someddress<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  gasLimit<span class="token operator">:</span> <span class="token string">'1231231231231233123123'</span>
  value<span class="token operator">:</span> <span class="token string">'32133210000000000000000000000'</span>
  signer<span class="token operator">:</span> signers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>gasLimit refers to the maximum value of gas that can be used for this transaction.</p> <p>value refers to the amount to be passed to the contract to be created.</p> <p>signer is used to override the default signer.</p> <h4 id="contract-attach-address-contract"><a href="#contract-attach-address-contract" class="header-anchor">#</a> <code>contract.attach(address): Contract</code></h4> <p>Generates a <code>Contract</code> instance using the specified contract address</p> <h4 id="contract-connect-signer-contractfactory"><a href="#contract-connect-signer-contractfactory" class="header-anchor">#</a> <code>contract.connect(signer): contractFactory</code></h4> <p>Create a new contract instance with the specified signer</p> <h2 id="redspot-chai"><a href="#redspot-chai" class="header-anchor">#</a> @redspot/chai</h2> <p>This plugin provides a set of matchers for writing contract test cases, inspired by <a href="https://ethereum-waffle.readthedocs.io/en/latest/matchers.html" target="_blank" rel="noopener noreferrer">waffle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Introducing @redspot/chai. This plugin will automatically modify the chai matchers without having to call them manually.</p> <div class="language- extra-class"><pre class="language-text"><code>// redspot.config.ts

import { RedspotUserConfig } from 'redspot/types';
import '@redspot/chai'; 

export default {
 ...
} as RedspotUserConfig;
</code></pre></div><p>For a full example of using @redspot/chai.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token constant">BN</span> <span class="token keyword">from</span> <span class="token string">'bn.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'chai'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> patract<span class="token punctuation">,</span> network<span class="token punctuation">,</span> artifacts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redspot'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> getContractFactory<span class="token punctuation">,</span> getRandomSigner <span class="token punctuation">}</span> <span class="token operator">=</span> patract<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> api<span class="token punctuation">,</span> getSigners <span class="token punctuation">}</span> <span class="token operator">=</span> network<span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'ERC20'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> api<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">BN</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">BN</span></span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>registry<span class="token punctuation">.</span>chainDecimals<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> signers <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getSigners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> Alice <span class="token operator">=</span> signers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> sender <span class="token operator">=</span> Alice<span class="token punctuation">;</span>
    <span class="token keyword">const</span> contractFactory <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContractFactory</span><span class="token punctuation">(</span><span class="token string">'erc20'</span><span class="token punctuation">,</span> sender<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contractFactory<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> abi <span class="token operator">=</span> artifacts<span class="token punctuation">.</span><span class="token function">readArtifact</span><span class="token punctuation">(</span><span class="token string">'erc20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> receiver <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRandomSigner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> sender<span class="token punctuation">,</span> contractFactory<span class="token punctuation">,</span> contract<span class="token punctuation">,</span> abi<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> Alice<span class="token punctuation">,</span> one <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Assigns initial balance'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> contract<span class="token punctuation">,</span> sender <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span>sender<span class="token punctuation">.</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>output<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Transfer adds amount to destination account'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> contract<span class="token punctuation">,</span> receiver <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">changeTokenBalance</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">changeTokenBalances</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token punctuation">[</span>contract<span class="token punctuation">.</span>signer<span class="token punctuation">,</span> receiver<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Transfer emits event'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> contract<span class="token punctuation">,</span> sender<span class="token punctuation">,</span> receiver <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token string">'Transfer'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">withArgs</span><span class="token punctuation">(</span>sender<span class="token punctuation">.</span>address<span class="token punctuation">,</span> receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Can not transfer above the amount'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> contract<span class="token punctuation">,</span> receiver <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">1007</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>
      contract<span class="token punctuation">,</span>
      <span class="token string">'Transfer'</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'Can not transfer from empty account'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> contract<span class="token punctuation">,</span> Alice<span class="token punctuation">,</span> one<span class="token punctuation">,</span> sender <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> emptyAccount <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRandomSigner</span><span class="token punctuation">(</span>Alice<span class="token punctuation">,</span> one<span class="token punctuation">.</span><span class="token function">muln</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>
      contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>sender<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        signer<span class="token operator">:</span> emptyAccount
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token string">'Transfer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>There are more built-in uses for chai, see the chai documentation: https://www.chaijs.com/.</p> <h3 id="equal"><a href="#equal" class="header-anchor">#</a> equal</h3> <p>@redspot/chai will modify the default equal match. The default equal does not support matching objects. But @redspot/chai can.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">BN</span></span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span>AccountId<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'5Gdjkw....'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'0x010203'</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>For BN types, equal to call <code>new BN(expected).eq(actual)</code> to determine if it is equal</p> <p>For types defined in polkadotjs, equal calls <code>Type.eq(actual)</code> to determine if they are equal</p> <p>For uint8Array types, equal converts them all to hex and then compares them for equality</p> <p>For other types, the default method of determining equality is used</p> <h3 id="changetokenbalance"><a href="#changetokenbalance" class="header-anchor">#</a> changeTokenBalance</h3> <p>This matcher detects changes in the balance of erc20 and internally calls the balanceOf interface to determine the balance. Since the erc20-trait interface for getting balance is <code>baseErc20,balanceOf</code></p> <p>so it does not apply to erc20-trait.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">changeTokenBalance</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">changeTokenBalances</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token punctuation">[</span>contract<span class="token punctuation">.</span>signer<span class="token punctuation">,</span> receiver<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="emit"><a href="#emit" class="header-anchor">#</a> emit</h3> <p>This matcher detects if the contract emits an event, e.g. to detect if a Transfer event has been emitted.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token string">'Transfer'</span><span class="token punctuation">)</span>
</code></pre></div><p>Detects if the event contains the specified parameters.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token string">'transfer'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withArgs</span><span class="token punctuation">(</span>sender<span class="token punctuation">.</span>address<span class="token punctuation">,</span> receiver<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Not expecting to emit events</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>
  contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>sender<span class="token punctuation">.</span>address<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    signer<span class="token operator">:</span> emptyAccount
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>contract<span class="token punctuation">,</span> <span class="token string">'Transfer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="redspot-gas-reporter"><a href="#redspot-gas-reporter" class="header-anchor">#</a> @redspot/gas-reporter</h2> <p>The plugin prints out the gas usage of the transaction for the called contract when the test completes at</p> <p>! <a href="https://user-images.githubusercontent.com/7029338/101343840-7700ab00-38e9-11eb-80a0-c6b6d38a9640.png" target="_blank" rel="noopener noreferrer"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>As with @redspot/chai, just add to redspot.config.ts, after introducing @redspot/gas-reporter, the following.</p> <div class="language- extra-class"><pre class="language-text"><code>// redspot.config.ts

import { RedspotUserConfig } from 'redspot/types';
import '@redspot/gas-reporter'; 

export default {
 ...
} as RedspotUserConfig;
</code></pre></div><p>which is ready to run automatically.</p></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/patractlabs/substrate-contracts-book/edit/master/en/redspot/plugin.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/3/2021, 3:09:42 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#redspot-patract" class="sidebar-link reco-side-redspot-patract" data-v-70334359>@redspot/patract</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#contract" class="sidebar-link reco-side-contract" data-v-70334359>Contract</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#contract-2" class="sidebar-link reco-side-contract-2" data-v-70334359>Contract</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#redspot-chai" class="sidebar-link reco-side-redspot-chai" data-v-70334359>@redspot/chai</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#equal" class="sidebar-link reco-side-equal" data-v-70334359>equal</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#changetokenbalance" class="sidebar-link reco-side-changetokenbalance" data-v-70334359>changeTokenBalance</a></li><li class="level-3" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#emit" class="sidebar-link reco-side-emit" data-v-70334359>emit</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/redspot/plugin.html#redspot-gas-reporter" class="sidebar-link reco-side-redspot-gas-reporter" data-v-70334359>@redspot/gas-reporter</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/substrate-contracts-book/assets/js/app.a9699121.js" defer></script><script src="/substrate-contracts-book/assets/js/3.5d94f222.js" defer></script><script src="/substrate-contracts-book/assets/js/1.293685b3.js" defer></script><script src="/substrate-contracts-book/assets/js/77.ea2b2297.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{538:function(v,_,s){"use strict";s.r(_);var r=s(6),a=Object(r.a)({},(function(){var v=this,_=v.$createElement,s=v._self._c||_;return s("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[s("h1",{attrs:{id:"设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设计"}},[v._v("#")]),v._v(" 设计")]),v._v(" "),s("h2",{attrs:{id:"ask-设计总览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ask-设计总览"}},[v._v("#")]),v._v(" Ask! 设计总览")]),v._v(" "),s("p",[v._v("AssemblyScript 使用 asc 编译器将TypeScript（TS）文件编译为WebAssembly字节码。 但是，asc是通用编译工具，无法使用智能合约结构将TS文件直接编译为WASM字节码和元数据信息。因此为了使 asc 能够识别并解析 Ask! 提供的和合约相关的注解与特定语法，需要对 asc 进行修改。")]),v._v(" "),s("h2",{attrs:{id:"设计-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设计-2"}},[v._v("#")]),v._v(" 设计")]),v._v(" "),s("p",[v._v("ask! 将提供 "),s("code",[v._v("Contract Framework")]),v._v("（在以下描述中称为 "),s("code",[v._v("Framework")]),v._v("）和"),s("code",[v._v("Contract PreProcessor")]),v._v("（在以下描述中称为"),s("code",[v._v("PreProcessor")]),v._v("）两个组件。 此外，我们还将提供一个名为ask-cli的支持工具（类似于ink!的"),s("code",[v._v("cargo-contract")]),v._v("），用于帮助建立和管理用Ask！编写的Wasm智能合约。")]),v._v(" "),s("p",[v._v("Ask!的功能按照如下实现：")]),v._v(" "),s("ul",[s("li",[s("p",[s("code",[v._v("Framework")]),v._v("的主要功能是为链上API提供高级包装，然后提供用于通过注解类型编写合约的规范。它需要完成以下任务：")]),v._v(" "),s("ul",[s("li",[v._v("定义基于注解的合约撰写规范")]),v._v(" "),s("li",[v._v("在元数据中定义合约接口的描述规范")]),v._v(" "),s("li",[v._v("封装合约与链之间数据交互的详细信息，例如合约存储中密钥生成规则的定义以及存储的读写")]),v._v(" "),s("li",[v._v("封装链上的功能组件，例如Balance，AccountId，Block，Crypto等。")]),v._v(" "),s("li",[v._v("根据合约的语义将AS合约编译为Wasm代码，并包含与FRAME合约的交互接口的链接符号。")])])]),v._v(" "),s("li",[s("p",[s("code",[v._v("PreProcessor")]),v._v("的主要功能是解析框架中定义的注解，并为这些注解生成相应的逻辑代码。根据框架中的合约接口规范，生成元数据文件。这个部分需要完成以下任务：")]),v._v(" "),s("ul",[s("li",[v._v("解析合约中的注解并生成相应的逻辑代码")]),v._v(" "),s("li",[v._v("解析合约接口和参数，并生成元数据文件")]),v._v(" "),s("li",[v._v("解析自定义合约语法（语法糖），并生成相应的逻辑代码")]),v._v(" "),s("li",[v._v("自动存储和加载数据")])])]),v._v(" "),s("li",[s("p",[s("code",[v._v("ask-cli")]),v._v("的主要功能是在cli中管理Ask!项目，其中包括以下功能：")]),v._v(" "),s("ul",[s("li",[v._v("创建ask!合约模板。")]),v._v(" "),s("li",[v._v("简化ask!在项目编译过程中，隐藏预处理和编译过程的详细信息。")]),v._v(" "),s("li",[v._v("管理"),s("code",[v._v("Framework")]),v._v("，"),s("code",[v._v("PreProcessor")]),v._v("和Compiler的版本依赖性。")]),v._v(" "),s("li",[v._v("检查所生成的Wasm代码的合法性。")])])])])])}),[],!1,null,null,null);_.default=a.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{722:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"patract-hub-s-treasury-report-for-himalia-v0-1-v0-2-contract-sdks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#patract-hub-s-treasury-report-for-himalia-v0-1-v0-2-contract-sdks"}},[t._v("#")]),t._v(" Patract Hub's treasury report for Himalia v0.1 & v0.2(Contract SDKs)")]),t._v(" "),s("p",[t._v("5 weeks ago，Patract Hub applied a "),s("a",{attrs:{href:"https://kusama.polkassembly.io/treasury/61",target:"_blank",rel:"noopener noreferrer"}},[t._v("treasury proposal #61"),s("OutboundLink")],1),t._v(" for Himalia v0.1&v0.2, Now, we have finished all the work and you can review our codebase at：")]),t._v(" "),s("ul",[s("li",[t._v("Himalia v0.1 PatractGo https://github.com/patractlabs/go-patract")]),t._v(" "),s("li",[t._v("Himalia v0.2 PatractPy https://github.com/patractlabs/py-patract")])]),t._v(" "),s("p",[s("code",[t._v("PatractGo")]),t._v(" mainly completes the contract-related interfaces and APIs, and supports scanning and monitoring (observer) of events generated by the contract. "),s("code",[t._v("PatractGo")]),t._v(" is based on "),s("a",{attrs:{href:"https://github.com/centrifuge/go-substrate-rpc-client",target:"_blank",rel:"noopener noreferrer"}},[t._v("Centrifuge's GSRPC"),s("OutboundLink")],1),t._v(". In the development process, in order to make the API more convenient to use and embed other services, we encapsulated GSRPC, providing API call based on context style. In addition, some interfaces that are not provided by GSRPC but are more useful for development and debugging have been added, such as encode and decode of AccountID in ss58 format, and unit test environment support.")]),t._v(" "),s("p",[s("code",[t._v("PatractGo")]),t._v(" further encapsulates common ERC20 contracts, including API and monitoring support. This is convenient for processing ERC20 contracts, and can be used as an example to guide the development of other contract APIs. "),s("strong",[t._v("In the future, "),s("code",[t._v("PatractGo")]),t._v(" will develop a code generator that automatically generates the corresponding go code based on the metadata of the contract. Since the logic of this generation process is the same for go and java, this part of the function is postponed to complete with "),s("code",[t._v("PatractJ")]),t._v(". An example of "),s("code",[t._v("ERC20")]),t._v(" is provided in the current version to show how to make packaging calls for a specific contract.")]),t._v(" For more information about "),s("code",[t._v("PatractGo")]),t._v(", please refer to the following function description and sample code in the project.")]),t._v(" "),s("p",[s("code",[t._v("PatractGo")]),t._v(" also provieds the following founctions:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/patractlabs/go-patract/tree/master/examples/dump",target:"_blank",rel:"noopener noreferrer"}},[t._v("dump"),s("OutboundLink")],1),t._v(" provides an example of the ERC20 contract status synchronization tool. Dump will scan all events of the specified ERC20 contract. The number of tokens corresponding to the account is synchronized to a local database, and a simple query function is provided. This example can be used as an example of Oberver, and at the same time, it can be used as a tool to analyze the Token distribution of a specified ERC20 contract.")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/patractlabs/go-patract/tree/master/examples/rest",target:"_blank",rel:"noopener noreferrer"}},[t._v("rest"),s("OutboundLink")],1),t._v(" use [github.com/patractlabs/go-patract/rest](https://github.com /patractlabs/go-patract/tree/master/rest) module. rest builds the url corresponding to the message based on metadata. Users can use this service to build the unsigned Extrinsic binary data of the specified contract, which can be sent to the trusted environment Third-party tool for signing. Based on this model, when contract developers use the Golang to develop contract back-end services, they can put the private key in an independent network environment and development environment to protect the security of the private key. In some scenarios, this processing is necessary , such as the account management of an exchange. As a developer-oriented SDK, programs containing "),s("code",[t._v("PatractGo")]),t._v(" and other SDK codes may not be able to run in some sensitive environments. Therefore, rest provides an HTTP-based service interface, which is also convenient for developers to access existing authorization system.")])]),t._v(" "),s("p",[s("code",[t._v("PatractPy")]),t._v(" mainly completes the support of the unit test environment and scans and monitors the events generated by the contract. "),s("code",[t._v("PatractPy")]),t._v(" is based on "),s("a",{attrs:{href:"https://github.com/polkascan/py-substrate-interface",target:"_blank",rel:"noopener noreferrer"}},[t._v("Polkascan's Python Substrate Interface"),s("OutboundLink")],1),t._v(". In the v0.11.8 version of "),s("code",[t._v("py-substrate-interface")]),t._v(", they have provided good support for contract API, so "),s("code",[t._v("PatractPy")]),t._v(" mainly supplements some of the missing functions of "),s("code",[t._v("py-substrate-interface")]),t._v(", such as subscription API and deserialization support for contract events. "),s("code",[t._v("PatractPy")]),t._v(" can automatically construct a python contract object based on the "),s("code",[t._v("message")]),t._v(" part of the metadata, and has a method to call the contract, similar to the implementation of "),s("code",[t._v("api-contracts")]),t._v(" in "),s("code",[t._v("polkadot.js")]),t._v(". Therefore, after loading metadata, "),s("code",[t._v("PatractPy")]),t._v(" can simply call the contract according to the definition of the contract's own method, without the need for static languages such as Java or Golang to provide a method of interacting with the contract through code generation. On the other hand, "),s("code",[t._v("PatractPy")]),t._v(" completes the scanning and monitoring of events generated by the contract, and its implementation can also be used to process events from other modules.")]),t._v(" "),s("p",[t._v("As the most important function of "),s("code",[t._v("PatractPy")]),t._v(", we hope that it can support our "),s("a",{attrs:{href:"https://github.com/patractlabs/europa",target:"_blank",rel:"noopener noreferrer"}},[t._v("Europa"),s("OutboundLink")],1),t._v(" and complete unit testing for contracts based on it. On the one hand, as the realization of the test case of the "),s("code",[t._v("PatractPy")]),t._v(" project itself, on the other hand, we can use python to implement the test case code for the contract based on the "),s("code",[t._v("PatractPy")]),t._v(" to test and reproduce the test cases in complex scenarios, plus complete Python ecological test support can make smart contract development more convenient and efficient.")]),t._v(" "),s("p",[t._v("In the future, "),s("code",[t._v("PatractGo")]),t._v(" and "),s("code",[t._v("PatractPy")]),t._v(" will be integrated into our "),s("code",[t._v("Redspot")]),t._v(" in the form of plug-ins. Therefore, for a contract development project, you can use "),s("code",[t._v("Redspot")]),t._v(" to build a contract development framework, and then use Redspot's own "),s("code",[t._v("polkadot.js")]),t._v(" or use a plug-in"),s("code",[t._v("PatractPy")]),t._v(" to quickly and easily perform contract debugging and integration testing in our "),s("code",[t._v("Europa")]),t._v(", and then use "),s("code",[t._v("PatractGo")]),t._v(" to call the contract. After the entire system has been debugged in the test environment, use the backend required by "),s("code",[t._v("PatractGo")]),t._v(" to develop the contract and use it in the production environment. The next version of "),s("code",[t._v("PatractJ")]),t._v(" and "),s("code",[t._v("PatractN")]),t._v(" will be integrated into the "),s("code",[t._v("Redspot")]),t._v(" system in the same way.")]),t._v(" "),s("h2",{attrs:{id:"_1-himalia-s-future-development-plan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-himalia-s-future-development-plan"}},[t._v("#")]),t._v(" 1. Himalia's future development plan")]),t._v(" "),s("ul",[s("li",[s("s",[t._v("M1: v0.1 PatractGo for Golang")])]),t._v(" "),s("li",[s("s",[t._v("M2: v0.2 PatractPy for Python")])]),t._v(" "),s("li",[t._v("M3: v0.3 PatractJ for JVM")]),t._v(" "),s("li",[t._v("M4: v0.4 PatractN for .NET")])]),t._v(" "),s("h2",{attrs:{id:"_2-patractgo-report"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-patractgo-report"}},[t._v("#")]),t._v(" 2. PatractGo Report")]),t._v(" "),s("p",[t._v("Based on PatractGo，we can interact with the contracts very easily。The design goal of PatractGo is closer to that the contract owner build its own business logic to interact with the contract on the chain through PatractGo, which is not suitable for the scenario of contract debugging. If you need to debug the contract, it is recommended to use "),s("code",[t._v("ParactPy")]),t._v(" or "),s("code",[t._v("polkadot.js")]),t._v(" for quick testing.")]),t._v(" "),s("p",[t._v("For "),s("code",[t._v("PatractGo")]),t._v(", we split the functions into three components:")]),t._v(" "),s("ul",[s("li",[t._v("Contracts：provides the functions to interact with contracts")]),t._v(" "),s("li",[t._v("Rest：provides a way to generate an offline signature for contracts.")]),t._v(" "),s("li",[t._v("Observer: listens contract events and parses events by contract metadata.")])]),t._v(" "),s("h3",{attrs:{id:"_2-1-api-for-contracts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-api-for-contracts"}},[t._v("#")]),t._v(" 2.1 API for Contracts")]),t._v(" "),s("p",[t._v("By Native Contract API，We Can Call Contracts Runtime Earlier。")]),t._v(" "),s("p",[t._v("Put Contracts Code to chain：")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('   // read the code wasm from file\n   codeBytes, err := ioutil.ReadFile("/path/to/contracts.wasm")\n   if err != nil {\n      return err\n   }\n\n   // create the api\n   cApi, err := rpc.NewContractAPI(env.URL())\n   \n   // read the abi(metadata) for contract\n   metaBz, err := ioutil.ReadFile("/path/to/contracts_metadata.json")\n   cApi.WithMetaData(metaBz)\n\n   // create context with from auth, like Alice\n   ctx := api.NewCtx(context.Background()).WithFrom(authKey)\n\n   // put code\n   _, err = cApi.Native().PutCode(ctx, codeBytes)\n   \n   // do next steps\n')])])]),s("p",[t._v("Get Code from chain：")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('   codeHash := readCodeHash() // get code hash\n\n   var codeBz []byte\n   \n\tif err := cApi.Native().Cli.GetStorageLatest(&codeBz,\n\t\t"Contracts", "PristineCode",\n\t\t[]byte(codeHash), nil); err != nil {\n\t\treturn err\n   }\n   \n   // codeBz is now code\n')])])]),s("p",[t._v("Instantiate Contract in chain:")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\tvar endowment uint64 = 1000000000000\n\n\t// Instantiate\n\t_, contractAccount, err := cApi.Instantiate(ctx,\n\t\ttypes.NewCompactBalance(endowment),\n\t\ttypes.NewCompactGas(test.DefaultGas),\n\t\tcontracts.CodeHashERC20,\n\t\ttypes.NewU128(totalSupply),\n   )\n")])])]),s("p",[t._v("api will return "),s("code",[t._v("contractAccount")]),t._v(", which can use it to call the contract.")]),t._v(" "),s("p",[t._v("For a contract, we can read or exec messages. Currently "),s("code",[t._v("CallToRead")]),t._v(" and "),s("code",[t._v("CallToExec")]),t._v(" implement a more basic level of encapsulation for contract calls, so contract developers need to write corresponding packaging functions according to the contract method, such as the ERC20 contract under the directory of "),s("code",[t._v("PatractGo/contracts/erc20")]),t._v(" example.")]),t._v(" "),s("p",[t._v("Read the total_supply of ERC20 contract, no request params:")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('\tvar res types.U128\n\n\terr := a.CallToRead(ctx,\n\t\t&res,\n\t\ta.ContractAccountID,\n\t\t[]string{"total_supply"},\n\t)\n')])])]),s("p",[t._v("Read the balance_of of AccountID for ERC20 contract:")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('\treq := struct {\n\t\tAddress types.AccountID\n\t}{\n\t\tAddress: owner,\n\t}\n\n\tvar res types.U128\n\n\terr := a.CallToRead(ctx,\n\t\t&res,\n\t\tContractAccountIDForERC20,\n\t\t[]string{"balance_of"},\n\t\treq,\n\t)\n')])])]),s("p",[t._v("Call Transfer:")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\ttoParam "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tAddress AccountID\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tvalueParam "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tValue U128\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" amt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CallToExec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\ta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ContractAccountID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\ttypes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewCompactBalance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\ttypes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewCompactGas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefaultGas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transfer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\ttoParam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" valueParam"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("These behaviors will be automatically generated after the "),s("code",[t._v("auto contract code generator")]),t._v(" is completed, without the developers needing to care about this part.")]),t._v(" "),s("h3",{attrs:{id:"_2-2-rest-api-for-contract"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-rest-api-for-contract"}},[t._v("#")]),t._v(" 2.2 REST API for Contract")]),t._v(" "),s("p",[t._v("We can use rest to get unsigned raw byte data for contract call, it can help to build an offline signature for contract.")]),t._v(" "),s("p",[t._v("can use this for example: "),s("a",{attrs:{href:"https://github.com/patractlabs/go-patract/blob/master/examples/rest/main.go",target:"_blank",rel:"noopener noreferrer"}},[t._v("rest"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("start the rest server:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("go run ./examples/rest \n")])])]),s("p",[t._v("to get data:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8899/erc20/exec/transfer?isOffline=true&contract=5HKinTRKW9THEJxbQb22Nfyq9FPWNVZ9DQ2GEQ4Vg1LqTPuk'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type: application/json'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{\n\t"nonce":1,\n\t"chain_status":{\n\t\t"spec_version":1,\n\t\t"tx_version":1,\n\t\t"block_hash":"0xc20f241b61039e5685d118c7fbc8b27210153c21eee7686a9466f22e01281114",\n\t\t"genesis_hash":"0xc20f241b61039e5685d118c7fbc8b27210153c21eee7686a9466f22e01281114"\n\t},\n\t"contract":"5HKinTRKW9THEJxbQb22Nfyq9FPWNVZ9DQ2GEQ4Vg1LqTPuk",\n\t"origin":"5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY",\n\t"gas_limit":"500000000000",\n\t"args":{\n\t\t"to":"5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty",\n\t\t"value":"100000000"\n\t}\n}\'')]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-3-observer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-observer"}},[t._v("#")]),t._v(" 2.3  observer")]),t._v(" "),s("p",[t._v("For a contract, we need observer events for the contract, can use "),s("code",[t._v("observer")]),t._v(" to build a contract events observer service:")]),t._v(" "),s("p",[t._v("a complete example: "),s("a",{attrs:{href:"https://github.com/patractlabs/go-patract/blob/master/examples/observer/main.go",target:"_blank",rel:"noopener noreferrer"}},[t._v("observer"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Also can take the "),s("a",{attrs:{href:"https://github.com/patractlabs/go-patract/blob/master/examples/dumper/main.go",target:"_blank",rel:"noopener noreferrer"}},[t._v("dumper"),s("OutboundLink")],1),t._v(" for example, it dump events by contacts to a db.")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('...\n\n    // create observer\n\to := observer.New(logger, *flagURL)\n\tctx, cancelFunc := context.WithCancel(context.Background())\n\n...\n    // other init functions\n...\n\n    // create a handler for process events in chain\n\th := observer.NewEvtHandler()\n\th = h.WithContractExecution(func(l log.Logger, height uint64, evt types.EventContractsContractExecution) {\n\t\tdata := evt.Data\n\n\t\tl.Debug("handler contract execution", "height", height)\n\n        // for golang we need process each diff types for event\n\t\ttyp := metadata.GetEvtTypeIdx(data)\n\t\tswitch typ {\n\t\tcase 0:\n\t\t\tvar transfer erc20.EventTransfer\n\t\t\terr := metaData.Spec.Events.DecodeEvt(metaData.NewCtxForDecode(data).WithLogger(l), &transfer)\n\t\t\tif err != nil {\n\t\t\t\tlogger.Error("evt decode transfer error", "err", err, "height", height)\n\t\t\t}\n\t\t\tlogger.Info("transfer event", "evt", transfer)\n\t\tcase 1:\n\t\t\tvar approve erc20.EventApproval\n\t\t\terr := metaData.Spec.Events.DecodeEvt(metaData.NewCtxForDecode(data).WithLogger(l), &approve)\n\t\t\tif err != nil {\n\t\t\t\tlogger.Error("evt decode approve error", "err", err, "height", height)\n\t\t\t}\n\t\t\tlogger.Info("approve event", "evt", approve)\n\t\t}\n\t})\n\n    // watcher events\n\tif err := o.WatchEvent(ctx, h); err != nil {\n\t\tlogger.Error("watch event error", "err", err)\n\t\treturn\n\t}\n\n...\n')])])]),s("h3",{attrs:{id:"_2-4-support-for-erc20-contract"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-support-for-erc20-contract"}},[t._v("#")]),t._v(" 2.4 Support for ERC20 Contract")]),t._v(" "),s("p",[t._v("In "),s("code",[t._v("github.com/patractlabs/go-patract/contracts/erc20")]),t._v(", Complete ERC20 contract support.")]),t._v(" "),s("div",{staticClass:"language-golang extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("...\n\n\t\terc20API := erc20.New(rpcAPI, contractAccountID)\n        ctx := rpc.NewCtx(context.Background()).WithFrom(signature.TestKeyringPairAlice)\n        \n\t\t// transfer alice to bob\n\t\taliceTotal, err := erc20API.BalanceOf(ctx, test.AliceAccountID)\n\n\t\t// transfer\n\t\t_, err = erc20API.Transfer(ctx, bob, types.NewBalanceByU64(100))\n\n\t\tbobBalance, err := erc20API.BalanceOf(ctx, bob)\n        aliceNewTotal, err := erc20API.BalanceOf(ctx, test.AliceAccountID)\n\n...\n")])])]),s("h3",{attrs:{id:"_2-4-tools"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-tools"}},[t._v("#")]),t._v(" 2.4 Tools")]),t._v(" "),s("p",[t._v("We make some tools for developing constracts, like:")]),t._v(" "),s("ul",[s("li",[t._v("https://github.com/patractlabs/go-patract/tree/master/tools/parser a parser for address")]),t._v(" "),s("li",[t._v("https://github.com/patractlabs/go-patract/tree/master/tools/querier a querier for get some datas from chain")])]),t._v(" "),s("h2",{attrs:{id:"_3-patractpy-report"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-patractpy-report"}},[t._v("#")]),t._v(" 3. PatractPy Report")]),t._v(" "),s("p",[t._v("For Unittest, should install "),s("a",{attrs:{href:"https://github.com/patractlabs/europa",target:"_blank",rel:"noopener noreferrer"}},[t._v("Europa"),s("OutboundLink")],1),t._v(" at first.")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("europa --version\neuropa "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(".0-3f71403-x86_64-linux-gnu\n")])])]),s("p",[t._v("All of test passed by "),s("code",[t._v("Europa")]),t._v(" environment.")]),t._v(" "),s("p",[t._v("The design goal of "),s("code",[t._v("PatractPy")]),t._v(" is to simplify the repetitive work of the interaction between developers and the contracts, and to monitor contract events, so as to provide a simplified way to quickly call and debug the contract. Therefore, the function of "),s("code",[t._v("PatractPy")]),t._v(" will be similar to the "),s("code",[t._v("api-contracts")]),t._v(" in "),s("code",[t._v("polkadot.js")]),t._v(". It can load contract instances according to the metadata of the contract, and automatically provide corresponding methods to the python contract instances according to the content of the metadata. Developers can call these generated methods to interact with the contract on the chain.")]),t._v(" "),s("h3",{attrs:{id:"_3-1-basic-apis-for-contracts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-basic-apis-for-contracts"}},[t._v("#")]),t._v(" 3.1 Basic Apis For Contracts")]),t._v(" "),s("p",[t._v("As "),s("a",{attrs:{href:"https://github.com/polkascan/py-substrate-interface",target:"_blank",rel:"noopener noreferrer"}},[t._v("polkascan's Python Substrate Interface"),s("OutboundLink")],1),t._v(" has provide some support to contract api, so we not need to improve the apis for contract calls, but there is some api to add:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("SubstrateSubscriber")]),t._v(" is a subscriber support to subscribe data changes in chain, for example, the events in chain.")]),t._v(" "),s("li",[s("code",[t._v("get_contract_event_type")]),t._v(" add event decode support for contracts.")])]),t._v(" "),s("p",[t._v("The basic api split into 2 parts:")]),t._v(" "),s("ul",[s("li",[t._v("Contract, include:\n"),s("ul",[s("li",[t._v("contractExecutor: This api could construct an extrinsic to call a contract, would be packed into a block and change state.")]),t._v(" "),s("li",[t._v("contractReader: This api could construct a rpc request to call a contract, do not pack into a block and do not change any state.")]),t._v(" "),s("li",[t._v("contractCreator: This api is used for "),s("code",[t._v("instantiate")]),t._v(" a contract and holding the WASM code and metadata, receive following parameters:\n"),s("ul",[s("li",[s("code",[t._v("gas_limit")])]),t._v(" "),s("li",[s("code",[t._v("endowment")])]),t._v(" "),s("li",[s("code",[t._v("deployment_salt")]),t._v(" ("),s("code",[t._v("salt")]),t._v(" parameter in "),s("code",[t._v("instantiate")]),t._v(")")])])]),t._v(" "),s("li",[t._v("ContractAPI: This api is used for "),s("code",[t._v("call")]),t._v(" a contract, is a wrapper for "),s("code",[t._v("contractExecutor")]),t._v(" and"),s("code",[t._v("contractReader")]),t._v(", developers could use this api to react with contracts. This api could create a instance depends on the metadata, auto generate the contract access functions based on the contract. And the auto-gen functions receive the parameters which defined in contracts, besides receive following common parameters:\n"),s("ul",[s("li",[s("code",[t._v("gas_limit")])]),t._v(" "),s("li",[s("code",[t._v("value")]),t._v(" (notice, if current call's "),s("code",[t._v("payable")]),t._v(" is false, this "),s("code",[t._v("value")]),t._v(" must be "),s("code",[t._v("0")]),t._v(")")])])]),t._v(" "),s("li",[t._v("ContractFactory: This api is used for constructing a contract instance in python, and developer could use this instance to access contract. This is a wrapper for "),s("code",[t._v("contractCreator")]),t._v(" and "),s("code",[t._v("ContractAPI")])])])]),t._v(" "),s("li",[t._v("Observer, include:\n"),s("ul",[s("li",[t._v("ContractObserver: This api is used for listen the events in contracts.")])])])]),t._v(" "),s("p",[t._v("Based on the api provided above, Python developers can refer to the following case to access the contract. The following example shows a contract instance loaded through the metadata of ERC20. Developers can directly call methods like "),s("code",[t._v("transfer")]),t._v(" that are automatically created by metadata to send transactions to the node or call the node's rpc to return the contract execution result. On the other hand, the following example also shows how to monitor the events of a contract:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" substrateinterface "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SubstrateInterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Keypair\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" patractinterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contract "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContractAPI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ContractFactory\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" patractinterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("observer "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContractObserver\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# use [europa](https://github.com/patractlabs/europa) as test node endpoint, notice `type_registry` should set correctly.")]),t._v("\n    substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SubstrateInterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://127.0.0.1:9944'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type_registry_preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type_registry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'types'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LookupSource'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MultiAddress'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# load deployer key")]),t._v("\n    alice "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Keypair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Alice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    bob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Keypair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Bob'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. load a contract from WASM file and metadata.json file (Those files is complied by [ink!](https://github.com/paritytech/ink))")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# in this example, we use `ink/example/erc20` contract as example.")]),t._v("\n    contract "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractFactory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("substrate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# should provide a subtrate endpoint")]),t._v("\n            code_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'res'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.wasm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            metadata_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'res'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# upload code to chain directly")]),t._v("\n    res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" contract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("put_code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update code hash{} res:{}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code_hash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("is_succes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. instantiate the uploaded code as a contract instance")]),t._v("\n    erc20_ins "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" contract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("new"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" endowment"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gas_limit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deployment_salt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x12"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.1 create a observer to listen event")]),t._v("\n    observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("erc20_ins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contract_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" erc20_ins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" substrate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. send a transfer call for this contract")]),t._v("\n    res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" erc20_ins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gas_limit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000000000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'transfer res'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("is_succes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on_transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on_transfer in {} : {} {} {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'from'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'to'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on_approval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on_approval in {} : {} {} {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'owner'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'spender'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" evt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4 set event callback ")]),t._v("\n    observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scanEvents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handlers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Transfer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" on_transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Approve'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" on_approval\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-2-contractobserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-contractobserver"}},[t._v("#")]),t._v(" 3.2 ContractObserver")]),t._v(" "),s("p",[t._v("ContractObserver can observer events for a contract:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SubstrateInterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ws://127.0.0.1:9944"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type_registry_preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncontract_metadata "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractMetadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    metadata_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("substrate\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nobserver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x8eaf04151687736326c9fea17e25fc5287613693c912909cb226aa4794f26a48"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" contract_metadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" substrate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for some handlers")]),t._v("\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scanEvents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("The handler function can take the erc20 support as a example.")]),t._v(" "),s("h3",{attrs:{id:"_3-3-erc20-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-erc20-api"}},[t._v("#")]),t._v(" 3.3 ERC20 API")]),t._v(" "),s("p",[t._v("In addition to the normal use of metadata to construct contract objects to access the contract, developers can also package their own access methods to the contract according to the basic api provided by "),s("code",[t._v("PatractPy")]),t._v(".")]),t._v(" "),s("p",[t._v("ERC20 api provide a wrapper to erc20 contract exec, read and observer events, it can be a example for contracts api calling.")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# init api")]),t._v("\nsubstrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SubstrateInterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ws://127.0.0.1:9944"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type_registry_preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncontract_metadata "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractMetadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    metadata_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("substrate\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nalice "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Keypair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Alice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Keypair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Bob'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# erc20 api")]),t._v("\nerc20 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ERC20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" substrate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    contract_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.wasm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    metadata_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# deplay a erc20 contract")]),t._v("\nerc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("putAndDeploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# read total supply")]),t._v("\ntotal_supply "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" erc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("totalSupply"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# transfer")]),t._v("\nerc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transferFrom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    fromAcc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    toAcc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    amt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nerc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# get balance")]),t._v("\nalice_balance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" erc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# approve")]),t._v("\nerc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("approve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" spender"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# get allowance")]),t._v("\nalice_allowance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" erc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("p",[s("code",[t._v("ERC20Observer")]),t._v(" is a event observer for erc20 contract:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ERC20Observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    substrate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" substrate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    contract_address "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" contract_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    metadata_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on_transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fromAcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toAcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on_transfer in block[{}] : {} {} {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fromAcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toAcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on_approval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" owner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    logging"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on_approval in block[{}] : {} {} {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" owner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scanEvents"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("on_transfer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" on_transfer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_approval "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" on_approval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-4-unittest-node-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-unittest-node-environment"}},[t._v("#")]),t._v(" 3.4 Unittest Node Environment")]),t._v(" "),s("p",[t._v("PatractPy can support write contract unittest by node environment.")]),t._v(" "),s("p",[t._v("At First We need install "),s("a",{attrs:{href:"https://github.com/patractlabs/europa",target:"_blank",rel:"noopener noreferrer"}},[t._v("europa"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" patractinterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("erc20 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ERC20\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" patractinterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("unittest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SubstrateTestEnv\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnittestEnvTest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("unittest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TestCase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@classmethod")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# start env or use canvas for a 6s block")]),t._v("\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SubstrateTestEnv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_europa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("39944")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SubstrateInterface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type_registry_preset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("typ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alice "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Keypair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Alice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Keypair"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_uri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Bob'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("erc20 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ERC20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_from_contracts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            substrate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("substrate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            contract_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.wasm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            metadata_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'constracts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ink'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("erc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("putAndDeploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tearDown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        cls"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stopNode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test_transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("erc20"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transferFrom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            fromAcc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("alice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            toAcc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ss58_address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            amt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# some more test case")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    unittest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("By example, we can use python to write testcase for some complex logics, by "),s("a",{attrs:{href:"https://github.com/patractlabs/europa",target:"_blank",rel:"noopener noreferrer"}},[t._v("Europa"),s("OutboundLink")],1),t._v(", we can test the contracts for python scripts.")]),t._v(" "),s("h2",{attrs:{id:"_4-recap-of-verification-of-v0-1-and-v0-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-recap-of-verification-of-v0-1-and-v0-2"}},[t._v("#")]),t._v(" 4. Recap of verification of v0.1 and v0.2")]),t._v(" "),s("p",[t._v("v0.1 PatractGo")]),t._v(" "),s("ul",[s("li",[s("s",[t._v("Initialize the project and complete the native contract interaction API")])]),t._v(" "),s("li",[s("s",[t._v("Complete the contract interaction API and HTTP contract interaction service based on metadata.json")])]),t._v(" "),s("li",[s("s",[t._v("Complete contract status scan support")])]),t._v(" "),s("li",[s("s",[t._v("Monitor service support and complete the example to write into the database")])]),t._v(" "),s("li",[s("s",[t._v("Complete ERC20 contract support and complete the corresponding command line tools")])]),t._v(" "),s("li",[s("s",[t._v("Improve sample code and unboxing documentation")])])]),t._v(" "),s("p",[t._v("v0.2 PatractPy")]),t._v(" "),s("ul",[s("li",[s("s",[t._v("Initialize the project and complete the native contract interaction API")])]),t._v(" "),s("li",[s("s",[t._v("Complete the contract interaction API based on metadata.json")])]),t._v(" "),s("li",[s("s",[t._v("Complete ERC20 contract support")])]),t._v(" "),s("li",[s("s",[t._v("Improve sample code and unboxing documentation")])])]),t._v(" "),s("p",[t._v("We will propose v0.3 and v0.4 later after some time for research.")])])}),[],!1,null,null,null);a.default=e.exports}}]);
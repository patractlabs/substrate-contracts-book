(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{615:function(a,t,s){"use strict";s.r(t);var e=s(6),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"elara-v0-2-报告"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elara-v0-2-报告"}},[a._v("#")]),a._v(" Elara v0.2 报告")]),a._v(" "),s("p",[a._v("回顾 Elara v0.2 的设计目标")]),a._v(" "),s("ul",[s("li",[a._v("Implement the account space features, supporting developers to use Github as a third-party login system to create an account space.")]),a._v(" "),s("li",[a._v("Support the creating and management of multiple projects under the developer’s account space")]),a._v(" "),s("li",[a._v("Provide developers with detailed access statistics features on the single project dimension, showing statistical indicators such as daily and weekly requests, calling methods, and source of user groups.")]),a._v(" "),s("li",[a._v("Officially launch https://elara.patract.io, providing the community with public access services to the Polkadot mainnet")])]),a._v(" "),s("p",[a._v("现在，我们已完成0.2 版本开发及部署上线，欢迎社区使用"),s("a",{attrs:{href:"https://elara.patract.io",target:"_blank",rel:"noopener noreferrer"}},[a._v("Elara"),s("OutboundLink")],1),a._v(":")]),a._v(" "),s("ul",[s("li",[a._v("所有人都可以使用Elara提供的Polkadot公共RPC服务( wss://polkadot.elara.patract.io 和 https://polkadot.elara.patract.io )")]),a._v(" "),s("li",[a._v("开发者可以访问elara.patract.io获得免费接入Polkadot网络的在线服务")])]),a._v(" "),s("p",[a._v("接下来展示0.2的设计实现，及如何运行及验证elara 0.2 的内容。")]),a._v(" "),s("h2",{attrs:{id:"elara-0-2-的设计逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elara-0-2-的设计逻辑"}},[a._v("#")]),a._v(" Elara 0.2 的设计逻辑")]),a._v(" "),s("p",[a._v("我们参考了Infura的业务模型，让每个开发账户可以申请多个"),s("code",[a._v("Project")]),a._v("来分割不同的"),s("code",[a._v("Workspace")]),a._v("，然后分配不同的"),s("code",[a._v("Provider")]),a._v("来访问节点。因此，用户最小的资源单位为一个"),s("code",[a._v("Project")]),a._v("。我们为每一个"),s("code",[a._v("Project")]),a._v("分配了一个独立的"),s("code",[a._v("PID")]),a._v("。在所有资源的索引中，开发者可以使用这个"),s("code",[a._v("PID")]),a._v("来检索到这个项目对应的信息，比如详细信息，每日或每周的访问统计信息等等。")]),a._v(" "),s("p",[a._v("因此，Elara v0.2的架构大概如下所示")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/5023721/100614013-6a5fde00-3350-11eb-882f-43efe02e1ecd.jpg",alt:"elara"}})]),a._v(" "),s("p",[a._v("由上可知，在Elara v0.2的后台管理中，整个体系分为3个主要模块：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("Developer-Account")]),a._v("：管理用户的账户登录状态模块。")]),a._v(" "),s("li",[s("code",[a._v("Stat")]),a._v("："),s("code",[a._v("Project")]),a._v("的管理及数据统计模块。")]),a._v(" "),s("li",[s("code",[a._v("API")]),a._v("：管理用户"),s("code",[a._v("Requests")]),a._v("的"),s("code",[a._v("Route")]),a._v("模块。")])]),a._v(" "),s("p",[a._v("在整体设计上，3个模块设计成微服务的架构体系，均可独立进行扩展。因为这三个模块启动后都以独立进程运行，所以在将来可以对单独的模块进行平行扩容、重构、替换实现等升级。其中"),s("code",[a._v("Developer-Account")]),a._v("模块与"),s("code",[a._v("Stat")]),a._v("模块通过共享数据库共享数据，而"),s("code",[a._v("Stat")]),a._v("与"),s("code",[a._v("API")]),a._v("之间通过"),s("code",[a._v("kafka")]),a._v("这个消息队列进行解耦。将来可以很容易地在此设计的基础上，添加更多复杂的功能模块，让Elara发挥更强大的效果。")]),a._v(" "),s("p",[a._v("这三个模块各自负责不同的功能：")]),a._v(" "),s("h3",{attrs:{id:"_1-developer-account-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-developer-account-模块"}},[a._v("#")]),a._v(" 1. "),s("code",[a._v("Developer-Account")]),a._v(" 模块")]),a._v(" "),s("p",[a._v("这个模块管理用户的账户信息及维护登录状态。这个模块当前采用Redis缓存用户信息，并维护用户的登录状态。这个登录状态与"),s("code",[a._v("Stat")]),a._v("模块共享。当前这个模块采用向Github请求授权访问Github的AccountID信息来创建用户。")]),a._v(" "),s("p",[a._v("因此该模块运行后对外提供的访问接口有：")]),a._v(" "),s("ul",[s("li",[a._v("GET "),s("code",[a._v("/auth/login")]),a._v(" ：获取登录状态信息")]),a._v(" "),s("li",[a._v("GET "),s("code",[a._v("/auth/logout")]),a._v(" : 登出，移除用户的登录信息。")]),a._v(" "),s("li",[a._v("GET "),s("code",[a._v("/auth/github")]),a._v("：向 github 请求授权相应的信息")]),a._v(" "),s("li",[a._v("GET "),s("code",[a._v("/auth/github/callback")]),a._v("：向github授权的回调（callback）处理")])]),a._v(" "),s("h3",{attrs:{id:"_2-stat模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-stat模块"}},[a._v("#")]),a._v(" 2. "),s("code",[a._v("Stat")]),a._v("模块：")]),a._v(" "),s("p",[a._v("该模块主要负责"),s("code",[a._v("Project")]),a._v("的管理，并且以Project和用户为维度统计用户从"),s("code",[a._v("API")]),a._v("模块发起的请求信息。这个模块是"),s("code",[a._v("kafka")]),a._v(" Message Middleware的"),s("code",[a._v("Consumer")]),a._v("，接受从"),s("code",[a._v("API")]),a._v("模块发送过来的请求信息并进行处理统计。同时，该模块与"),s("code",[a._v("Developer-Account")]),a._v("共享了用户的登录状态信息，以检查用户是否还与Elara的网页保持连接状态。在这个模块中，每个用户可以申请分配多个"),s("code",[a._v("Project")]),a._v("，代表在Elara中一个受限制的资源单位，例如限制一个Project每天可以接受的请求量和带宽总量等等。")]),a._v(" "),s("p",[a._v("在"),s("code",[a._v("Stat")]),a._v("模块的访问接口以"),s("code",[a._v("PID")]),a._v("作为基本元素,而一个项目的"),s("code",[a._v("PID")]),a._v("在"),s("code",[a._v("API")]),a._v("模块中将会作为这个项目特定的节点"),s("code",[a._v("Provider")]),a._v("使用。开发者在使用这个"),s("code",[a._v("PID")]),a._v("向"),s("code",[a._v("API")]),a._v("提起节点访问请求的过程中，将消耗这个"),s("code",[a._v("PID")]),a._v("对应的项目下管理的资源，并累计这个项目的统计信息。")]),a._v(" "),s("p",[a._v("基于如上讨论，"),s("code",[a._v("Stat")]),a._v("模块设计如下访问接口：")]),a._v(" "),s("ul",[s("li",[a._v("GET "),s("code",[a._v("/project/list")]),a._v("：列出当前登录用户下的所有project信息，返回：")])]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"b78a79f98a2bb1a991a357504a5b04c1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"chain"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"substrate"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"thedao"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"uid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"secret"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"createtime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1600398327"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"lasttime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1600398327"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n           "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"allowlist"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"false"')]),a._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      ...\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("返回信息中的"),s("code",[a._v("id")]),a._v("即是一个"),s("code",[a._v("Project")]),a._v("的PID。")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("GET "),s("code",[a._v("/project/<PID>")]),a._v(": 返回关联这个"),s("code",[a._v("Project")]),a._v("的详细信息。")])]),a._v(" "),s("li",[s("p",[a._v("POST "),s("code",[a._v("/project/create")]),a._v("：根据当前登录用户的信息创建一个新的"),s("code",[a._v("Project")])])])]),a._v(" "),s("p",[a._v("参数：")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chain:<Polkdaot|Kusama>\nname:<Validation rules /[a-zA-Z]{4,32}/>\n")])])]),s("ul",[s("li",[s("p",[a._v("GET "),s("code",[a._v("/stat/day/<PID>")]),a._v("：获取一个"),s("code",[a._v("Project")]),a._v("一天内的统计信息")])]),a._v(" "),s("li",[s("p",[a._v("GET "),s("code",[a._v("/stat/day/<PID>")]),a._v("：获取一个"),s("code",[a._v("Project")]),a._v("一周内的统计信息")])]),a._v(" "),s("li",[s("p",[a._v("其他接口定义见文档："),s("a",{attrs:{href:"https://github.com/patractlabs/elara/tree/master/packages/stat",target:"_blank",rel:"noopener noreferrer"}},[a._v("Stat README"),s("OutboundLink")],1)])])]),a._v(" "),s("h3",{attrs:{id:"_3-api模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-api模块"}},[a._v("#")]),a._v(" 3. "),s("code",[a._v("API")]),a._v("模块")]),a._v(" "),s("p",[a._v("该模块用于提供节点服务。它主要负责proxy用户的节点访问请求（RPC & websocket）给节点，并且作为"),s("code",[a._v("kafka")]),a._v("消息队列的生产者把用户请求的相关信息发送给"),s("code",[a._v("Stat")]),a._v("模块。在"),s("code",[a._v("API")]),a._v("模块中，用户把在"),s("code",[a._v("Stat")]),a._v("模块中创建的"),s("code",[a._v("PID")]),a._v("组成访问节点"),s("code",[a._v("Provider")]),a._v("的URL，然后向"),s("code",[a._v("API")]),a._v("模块发起节点访问请求。")]),a._v(" "),s("p",[a._v("而"),s("code",[a._v("API")]),a._v("模块在接受到不同用户发起的请求后，根据路由信息携带的"),s("code",[a._v("PID")]),a._v("区分出是哪一个"),s("code",[a._v("Project")]),a._v("下的请求，发送相应的信息进入"),s("code",[a._v("kafka")]),a._v("队列，并将用户请求转发给对应的节点。因此对于"),s("code",[a._v("API")]),a._v(" 模块，elara设计了如下2个访问接口，其中"),s("code",[a._v("<chain>")]),a._v("的参数当前可以填写"),s("code",[a._v("Polkadot")]),a._v("和"),s("code",[a._v("Kusama")])]),a._v(" "),s("ul",[s("li",[a._v("HTTPS, POST "),s("code",[a._v("/<chain>/<PID>")]),a._v(" ：接受用户发起的RPC请求，该请求的参数为该节点对外提供服务的所有RPC接口")]),a._v(" "),s("li",[a._v("Websocket "),s("code",[a._v("/<chain>/<PID>")]),a._v(" ：接受用户发起的Websocket请求，该请求的参数为该节点对外提供服务的所有RPC接口")])]),a._v(" "),s("p",[a._v("以上3个模块共同协作提供了Elara的后端组件。而在其基础上加上一个前端套件，即可成为一个完整的Elara产品对外提供服务：https://elara.patract.io/ 示例截图如下：")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/21072025/100822117-aa2be000-348c-11eb-9198-815ab2a5ebd5.png",alt:"elara1"}}),a._v(" "),s("img",{attrs:{src:"https://user-images.githubusercontent.com/21072025/100822212-d5163400-348c-11eb-9e37-cdc3f5dd960c.png",alt:"elara2"}}),a._v(" "),s("img",{attrs:{src:"https://user-images.githubusercontent.com/21072025/100822302-042ca580-348d-11eb-9f70-756c2cc9265f.png",alt:"elara3"}})]),a._v(" "),s("h2",{attrs:{id:"运行-elara"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行-elara"}},[a._v("#")]),a._v(" 运行 Elara")]),a._v(" "),s("p",[a._v("需要按如下顺序"),s("strong",[a._v("依次启动")]),a._v("以上3个模块对应的进程，才能使Elara正常工作：1、"),s("code",[a._v("Developer-Account")]),a._v("，2、"),s("code",[a._v("Stat")]),a._v("，3、"),s("code",[a._v("API")])]),a._v(" "),s("h3",{attrs:{id:"环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("p",[a._v("Elara的运行环境需要"),s("code",[a._v("redis")]),a._v("与"),s("code",[a._v("kafka")]),a._v("支持。因此在运行以下命令之前，首先保证运行环境中存在一个运行中的"),s("code",[a._v("redis")]),a._v("实例，以及已经安装好"),s("code",[a._v("kafka")]),a._v("的执行文件。Elara的3个进程由"),s("code",[a._v("node")]),a._v("运行，因此需要在运行前用"),s("code",[a._v("yarn")]),a._v("命令安装相应的依赖。")]),a._v(" "),s("h3",{attrs:{id:"启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[a._v("#")]),a._v(" 启动服务")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("启动"),s("code",[a._v("Developer-Account")]),a._v("服务")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("进入"),s("code",[a._v("elara/packages/account")]),a._v("目录")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" package/account\n")])])])]),a._v(" "),s("li",[s("p",[a._v("安装依赖")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("修改"),s("code",[a._v("Developer-Account")]),a._v("服务的配置文件，包括"),s("code",[a._v("redis")]),a._v(" field和"),s("code",[a._v("github")]),a._v(" field。其中默认端口设置为"),s("code",[a._v("7001")]),a._v("，因此若不修改"),s("code",[a._v("port")]),a._v("域，则该服务启动后占用"),s("code",[a._v("7001")]),a._v("端口。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" ./config/env/dev.env.js\n")])])])]),a._v(" "),s("li",[s("p",[a._v("启动服务，进程输出的日志位于"),s("code",[a._v("./logs")]),a._v("目录下。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ node app.js\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or use pm2 to manage process")]),a._v("\n$ pm2 start pm2.json --env dev\n")])])])])])]),a._v(" "),s("li",[s("p",[a._v("启动"),s("code",[a._v("Stat")]),a._v("服务")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("进入"),s("code",[a._v("elara/packages/stat")]),a._v("目录（如果当前在"),s("code",[a._v("account")]),a._v("目录下）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/stat\n")])])])]),a._v(" "),s("li",[s("p",[a._v("安装依赖")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("切换到"),s("code",[a._v("kafka")]),a._v("目录下启动"),s("code",[a._v("kafka")]),a._v("目录并设置"),s("code",[a._v("topic")])]),a._v(" "),s("ol",[s("li",[s("p",[a._v("启动"),s("code",[a._v("kafka")]),a._v("及相关进程，若没有修改"),s("code",[a._v("kafka")]),a._v("的配置文件则默认占用"),s("code",[a._v("9092")]),a._v("端口。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("the root directory of kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n$ bin/zookeeper-server-start.sh config/zookeeper.properties\n$ bin/kafka-server-start.sh config/server.properties　\n")])])])]),a._v(" "),s("li",[s("p",[a._v("给"),s("code",[a._v("kafka")]),a._v("添加"),s("code",[a._v("elara-dev")]),a._v("这个topic")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# add `elara-dev` topic to kafka")]),a._v("\n$ bin/kafka-topics.sh --create --topic elara-dev --bootstrap-server localhost:9092\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# check whethere this topic is initted")]),a._v("\nbin/kafka-topics.sh --describe --topic elara-dev --bootstrap-server localhost:9092\n")])])])])])]),a._v(" "),s("li",[s("p",[a._v("切换回到"),s("code",[a._v("elara/packages/stat")]),a._v("目录，修改"),s("code",[a._v("stat")]),a._v("模块的配置文件")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" ./config/env/dev.env.js\n")])])]),s("ol",[s("li",[s("p",[a._v("由于"),s("code",[a._v("Stat")]),a._v("与"),s("code",[a._v("Developer-Account")]),a._v("共享同一个"),s("code",[a._v("redis")]),a._v(" instance，因此在这个配置文件中的"),s("code",[a._v("redis")]),a._v(" field的配置应该和"),s("code",[a._v("Developer-Account")]),a._v("配置文件中的"),s("code",[a._v("redis")]),a._v("的配置一致。")])]),a._v(" "),s("li",[s("p",[a._v("这里的"),s("code",[a._v("kafka")]),a._v("域需要和上一步启动"),s("code",[a._v("kafka")]),a._v("的配置一致。")])]),a._v(" "),s("li",[s("p",[s("strong",[a._v("若只是用于本地测试，请将默认配置中的"),s("code",[a._v("test:false")]),a._v("修改为"),s("code",[a._v("test:true")])]),a._v("。开启了这个flag后在访问"),s("code",[a._v("stat")]),a._v("提供的接口中就不会对登录账户的登录状态进行校验，所有的接口均可直接访问。在生产环境中请一定保证"),s("code",[a._v("test")]),a._v("域的值是"),s("code",[a._v("false")]),a._v("。")])]),a._v(" "),s("li",[s("p",[a._v("配置文件中默认"),s("code",[a._v("port")]),a._v("域是"),s("code",[a._v("7002")]),a._v("，因此若不修改这个值，启动后将会占用"),s("code",[a._v("7002")]),a._v("端口提供服务。")])])])]),a._v(" "),s("li",[s("p",[a._v("启动服务")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("启动"),s("code",[a._v("stat")]),a._v("服务。启动后若不修改端口则"),s("code",[a._v("7002")]),a._v("端口被占用。后文采用"),s("code",[a._v("127.0.0.1:7002")]),a._v("作为"),s("code",[a._v("stat")]),a._v("进行的服务地址。进程输出的日志位于"),s("code",[a._v("./logs")]),a._v("目录下。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ node app.js\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or use pm2 to manage process")]),a._v("\n$ pm2 start pm2.json --env dev\n")])])])]),a._v(" "),s("li",[s("p",[a._v("启动"),s("code",[a._v("kafka")]),a._v(" consumer服务")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ node ./kafka/consumer.js\n")])])])]),a._v(" "),s("li",[s("p",[a._v("如果需要看控制台信息，需要启动"),s("code",[a._v("dashboard")]),a._v("服务")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ node ./timer/dashboard.js\n")])])])])]),a._v(" "),s("p",[a._v("此时可以在浏览器中打开"),s("code",[a._v("http://127.0.0.1:7002/dashboard")]),a._v("看到监控台的统计信息。")])])])]),a._v(" "),s("li",[s("p",[a._v("启动"),s("code",[a._v("API")]),a._v("服务")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("进入"),s("code",[a._v("elara/packages/api")]),a._v("目录（如果当前在"),s("code",[a._v("stat")]),a._v("目录下）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/api\n")])])])]),a._v(" "),s("li",[s("p",[a._v("安装依赖")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("修改"),s("code",[a._v("api")]),a._v("模块的配置文件")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" ./config/env/dev.env.js\n")])])]),s("ul",[s("li",[s("p",[s("code",[a._v("chain")]),a._v(" field 用来配置真正的链节点，其中链的名称作为"),s("code",[a._v("api")]),a._v("提供给开发者的路由中的一部分。例如默认中有如下配置，则在API支持的路由中支持"),s("code",[a._v("/Polkadot/<PID>")]),a._v("的访问方式。")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[a._v("'Polkadot'"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    'rpc'"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("'****"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("**'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//configure as node http://IP: RPC port in step 2")]),a._v("\n    'ws'"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("'****"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("**'"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//configure as node ws://IP: WS port in step 2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[s("code",[a._v("kafka")]),a._v(" field 用来配置在"),s("code",[a._v("stat")]),a._v("部分中启动的"),s("code",[a._v("kafka")]),a._v("进程的信息。注意配置的topic即是在配置"),s("code",[a._v("stat")]),a._v("部分时注册给"),s("code",[a._v("kafka")]),a._v("的topic "),s("code",[a._v("elara-dev")]),a._v("。、")])]),a._v(" "),s("li",[s("p",[s("code",[a._v("startServer")]),a._v(" filed 用来配置"),s("code",[a._v("stat")]),a._v("进程所在的ip和端口，例如如果"),s("code",[a._v("api")]),a._v("与"),s("code",[a._v("stat")]),a._v("在同一台主机上，且采用了默认配置（即"),s("code",[a._v("stat")]),a._v("默认占用7002端口），则这里的值为"),s("code",[a._v("127.0.0.1:7002")])])]),a._v(" "),s("li",[s("p",[s("code",[a._v("port")]),a._v(" field用来配置"),s("code",[a._v("api")]),a._v("服务进程所占用的端口，默认配置为7003")])])])]),a._v(" "),s("li",[s("p",[a._v("启动服务")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ node app.js\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or use pm2 to manage process")]),a._v("\n$ pm2 start pm2.json --env dev\n")])])]),s("p",[a._v("此时服务已经启动，若不修改端口则"),s("code",[a._v("7003")]),a._v("端口被占用。后文采用"),s("code",[a._v("127.0.0.1:7003")]),a._v("端口作为用户访问的host。进程输出的日志位于"),s("code",[a._v("./logs")]),a._v("目录下。")])])])])]),a._v(" "),s("h3",{attrs:{id:"访问-elara"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#访问-elara"}},[a._v("#")]),a._v(" 访问 Elara")]),a._v(" "),s("p",[a._v("由于在以上的案例中在启动"),s("code",[a._v("stat")]),a._v("的时候采用了"),s("code",[a._v("test:true")]),a._v("的配置，因此以下流程中跳过用户登录的过程，直接从创建"),s("code",[a._v("Project")]),a._v("开始。")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("创建Project：")]),a._v(" "),s("p",[a._v("向"),s("code",[a._v("stat")]),a._v("的服务地址"),s("code",[a._v("127.0.0.1:7002")]),a._v("发送创建project的请求：这个project是关于"),s("code",[a._v("Polkadot")]),a._v("链的访问请求，因此参数"),s("code",[a._v("chain")]),a._v("的值指定为"),s("code",[a._v("Polkadot")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("POST http://127.0.0.1:7002/project/create\n\nchain:Polkadot\nname:hello\n")])])]),s("p",[a._v("返回信息：")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"mssage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"5d4ebb40b08f127652ad022f5936b9da"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"chain"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Polkadot"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"uid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Only  For Test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"secret"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0b89a386965bfe4dcb19f724ecb41890"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"createtime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1606581366"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"lasttime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1606581366"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"allowlist"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"false"')]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("可以得到创建"),s("code",[a._v("Project")]),a._v("的详细信息及"),s("code",[a._v("PID")]),a._v("，这里即是"),s("code",[a._v("5d4ebb40b08f127652ad022f5936b9da")])])]),a._v(" "),s("li",[s("p",[a._v("列出这个用户的所有的"),s("code",[a._v("Project")])]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("GET http://127.0.0.1:7002/project/list\n")])])]),s("p",[a._v("返回信息")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"5d4ebb40b08f127652ad022f5936b9da"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"chain"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Polkadot"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"uid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Only  For Test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"secret"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0b89a386965bfe4dcb19f724ecb41890"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"createtime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1606581366"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"lasttime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1606581366"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"allowlist"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"false"')]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("由于当前开启了测试，会列出所有的"),s("code",[a._v("Project")]),a._v("信息。若不开启测试，则只会列出当前登录用的"),s("code",[a._v("Project")]),a._v("信息列表。")])]),a._v(" "),s("li",[s("p",[a._v("使用这个PID作为路由的一部分发起向节点的访问请求。")]),a._v(" "),s("p",[a._v("向节点的访问请求需要通过"),s("code",[a._v("API")]),a._v("服务，当前"),s("code",[a._v("API")]),a._v("服务地址为"),s("code",[a._v("127.0.0.1:7003")]),a._v("，因此我们可以发起如下请求：访问路由为 "),s("code",[a._v("<api server host>/<project chain>/<PID>")]),a._v("组成，因此在这里的情形下")]),a._v(" "),s("ul",[s("li",[a._v("对于rpc的访问地址是"),s("code",[a._v("http://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da")])]),a._v(" "),s("li",[a._v("对于websocket的访问地址是"),s("code",[a._v("ws://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da")])])]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('POST http://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da\n\n{\n    "id":1, \n    "jsonrpc":"2.0", \n    "method":"system_chain",\n    "params":[ ]\n}\n')])])]),s("p",[s("code",[a._v("API")]),a._v("服务正常返回结果")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"jsonrpc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"result"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Polkadot"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("这一次访问就将被elara正常的统计到并记录了project "),s("code",[a._v("5d4ebb40b08f127652ad022f5936b9da")]),a._v(" 拥有了一次访问。")])]),a._v(" "),s("li",[s("p",[a._v("若想测试api服务是否能满足正常的节点请求，可以把websocket的访问链接添加给"),s("a",{attrs:{href:"https://polkadot.js.org/apps/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[a._v("Polkadot/Substrate Portal")]),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("ol",[s("li",[a._v("在浏览器中登录Portal网页")]),a._v(" "),s("li",[a._v("点击左上角")]),a._v(" "),s("li",[a._v("点击"),s("code",[a._v("DEVELOPMENT")]),a._v("栏并点击"),s("code",[a._v("Custom")]),a._v("栏填入 "),s("code",[a._v("ws://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da")])]),a._v(" "),s("li",[a._v("点击“Switch”")])]),a._v(" "),s("p",[a._v("此时Portal应该能正常工作，且所有的访问请求都被Elara记录。")])]),a._v(" "),s("li",[s("p",[a._v("访问"),s("code",[a._v("stat")]),a._v("服务获取统计信息")]),a._v(" "),s("p",[a._v("如列出当前这个project的当天内的所有访问统计信息")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("GET http://127.0.0.1:7002/stat/day/5d4ebb40b08f127652ad022f5936b9da\n")])])]),s("p",[a._v("或者列出这个project这周内的统计信息")]),a._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("GET http://127.0.0.1:7002/stat/week/5d4ebb40b08f127652ad022f5936b9da\n")])])])]),a._v(" "),s("li",[s("p",[a._v("访问 "),s("code",[a._v("http://127.0.0.1:7002/dashboard")]),a._v(" 可以看到从控制台里也能看到总共的统计信息。")])])]),a._v(" "),s("p",[a._v("此时整个系统就能够正常运转工作了。")]),a._v(" "),s("h2",{attrs:{id:"回顾验证信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回顾验证信息"}},[a._v("#")]),a._v(" 回顾验证信息")]),a._v(" "),s("ul",[s("li",[s("s",[a._v("Developers can use Github account to log in to the developer account space from https://elara.patract.io")])]),a._v(" "),s("li",[s("s",[a._v("Developers can create new projects and access related API keys under the account")])]),a._v(" "),s("li",[s("s",[a._v("Developers can access the Polkadot node in Elara through Http and web-socket protocols")])]),a._v(" "),s("li",[s("s",[a._v("Developers can view the monitoring statistics of the projects on the day and the recent weeks")])]),a._v(" "),s("li",[s("s",[a._v("You can view the relevant monitoring statistics from the Elara dashboard")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);
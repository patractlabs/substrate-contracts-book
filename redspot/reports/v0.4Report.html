<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redspot v0.4 报告</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/substrate-contracts-book/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta content="https://www.patract.io/social-preview.png" property="og:image">
    
    <link rel="preload" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css" as="style"><link rel="preload" href="/substrate-contracts-book/assets/js/app.0512fc9b.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/3.7c35afa4.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/1.293685b3.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/184.ebdea99c.js" as="script"><link rel="prefetch" href="/substrate-contracts-book/assets/js/10.f560e2ba.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/100.0153f1c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/101.36938e7b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/102.54808992.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/103.76f65bdf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/104.f0d72cbc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/105.112a1cd8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/106.1587302e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/107.658c4109.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/108.e3aee840.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/109.7d1d01d0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/11.ff45929c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/110.cc5d0673.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/111.5230de15.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/112.be290b70.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/113.e6e0ad48.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/114.c37ff266.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/115.8552a903.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/116.003a2b6d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/117.6cd0c2e0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/118.a14d9fe0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/119.5974d5e6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/12.7661745e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/120.a2312c75.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/121.c6991041.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/122.83d8f05d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/123.6924f433.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/124.d62a0b42.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/125.e61300d0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/126.7e765e24.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/127.107411da.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/128.20e2adce.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/129.288a6f52.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/13.77735261.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/130.e2a72c48.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/131.bd67efe9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/132.7b2c7f53.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/133.75bfcf2e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/134.9e9d0921.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/135.324b5294.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/136.007179e8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/137.4ec2ff40.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/138.649c3481.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/139.eed3baec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/14.0d64657c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/140.1bc025aa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/141.a9b85db3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/142.0768749f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/143.93f6b8c4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/144.9d6912b9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/145.c3cf0077.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/146.b726dd3a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/147.b6f59662.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/148.d9951318.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/149.6243d82d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/15.98e78daf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/150.d498300a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/151.3d58f099.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/152.085723d8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/153.4f9e18ab.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/154.c8662863.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/155.df6801d9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/156.46d6f734.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/157.e8092950.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/158.eb3a79bb.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/159.ead4a729.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/16.61021424.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/160.28644c7a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/161.6d2fa557.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/162.0477f850.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/163.6cf93396.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/164.5cba28b4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/165.13b50224.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/166.d6adf620.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/167.4a495566.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/168.c312f322.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/169.f37ba1c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/17.58bc9af7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/170.b3fe4043.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/171.228202e7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/172.72965f5a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/173.7d24d201.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/174.7a99c279.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/175.906adcdd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/176.54af4560.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/177.024eecb8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/178.5f07b111.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/179.53a38f63.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/18.176e469c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/180.26ecf2c3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/181.dce99ceb.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/182.e6382439.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/183.fefb1495.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/185.3a32ea37.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/186.079185d8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/187.bbc2ad09.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/188.20490eb3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/189.9d80c9c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/19.0a0963f9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/190.3fd647b5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/191.c0a38f33.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/192.162e93ef.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/193.077b12e2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/194.6e022708.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/195.43d1f100.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/196.51d8982f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/197.67276d19.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/20.c67e51a2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/21.e1b4d15d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/22.e7c6af88.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/23.bcf6fd6b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/24.82bd5bb7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/25.d7485964.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/26.d6ba03d4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/27.59b07548.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/28.1c175f18.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/29.ed7481c9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/30.548c38ca.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/31.868ea504.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/32.3b2de66a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/33.9f45019d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/34.ab7d0792.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/35.c6cb45a8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/36.ecf0aae1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/37.689dfb9d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/38.f405b266.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/39.cfed4e29.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/4.e9bde0d3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/40.808c28db.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/41.3403c3a3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/42.73c3b656.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/43.4c43aac1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/44.3584f9fc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/45.cdebf294.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/46.654ba434.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/47.95c2825d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/48.a400ea64.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/49.ac93bc37.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/5.271970b3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/50.47b55d1a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/51.06054c5e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/52.3ce7dff4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/53.6f5b2f0c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/54.e0eeacb3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/55.793777c2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/56.7905359e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/57.006b682e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/58.b72084bb.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/59.e66054a1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/6.1380e490.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/60.86ebaf5a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/61.f4f61013.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/62.59762ee0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/63.5ae468f9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/64.232b4447.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/65.e77ea092.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/66.6c7580d3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/67.0886e149.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/68.9d055d69.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/69.d8da1686.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/7.609a6697.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/70.75e3ce43.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/71.5be06d5f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/72.c4d23bfc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/73.5e924bea.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/74.3c7635ac.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/75.280dd380.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/76.80c841c4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/77.40b985cc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/78.6bde6f3a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/79.ecc021f3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/8.f877c3e5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/80.fbbb0add.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/81.ee0758d6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/82.eba646ec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/83.c5dcad7d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/84.b9a61f11.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/85.8227c486.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/86.2e717c4e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/87.d48572e3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/88.14b3ad70.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/89.777a3bb2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/9.2035d6c9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/90.24b6a32d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/91.ed9e9e96.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/92.0320c66d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/93.2800c95e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/94.65591368.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/95.16c6aac6.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/96.3d21803c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/97.bcc392bb.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/98.f0db5ce5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/99.e85d78fe.js">
    <link rel="stylesheet" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/substrate-contracts-book/" class="home-link router-link-active"><img src="/substrate-contracts-book/logo.svg" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/" class="nav-link"><i></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/redspot/reports/v0.4Report.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/redspot/reports/v0.4Report.html" class="nav-link"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><!----> <h3 class="name" data-v-828910c6>
    patractlabs
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>188</h3> <h6 data-v-828910c6>文章</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>标签</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  主页
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/" class="nav-link"><i></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/redspot/reports/v0.4Report.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/redspot/reports/v0.4Report.html" class="nav-link"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><a href="/substrate-contracts-book/" aria-current="page" class="sidebar-link">Substrate 合约书</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/introduction" class="sidebar-heading clickable"><span>介绍</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/contracts/overview.html" class="sidebar-link">合约综述</a></li><li><a href="/substrate-contracts-book/contracts/model.html" class="sidebar-link">合约模型</a></li><li><a href="/substrate-contracts-book/contracts/language.html" class="sidebar-link">合约语言</a></li><li><a href="/substrate-contracts-book/contracts/wasm_first_step.html" class="sidebar-link">Wasm简要介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/ink/introduction" class="sidebar-heading clickable"><span>ink!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/ink/tutorial.html" class="sidebar-link">ink! tutorial</a></li><li><a href="/substrate-contracts-book/ink/framework.html" class="sidebar-link">ink! 框架</a></li><li><a href="/substrate-contracts-book/ink/edsl-basic.html" class="sidebar-link">ink! eDSL基础元素</a></li><li><a href="/substrate-contracts-book/ink/call-contracts.html" class="sidebar-link">ink! 跨合约调用</a></li><li><a href="/substrate-contracts-book/ink/ink-solidity.html" class="sidebar-link">ink! 与solidity的对比</a></li><li><a href="/substrate-contracts-book/ink/cargo-contract.html" class="sidebar-link">cargo-contract</a></li><li><a href="/substrate-contracts-book/ink/trap.html" class="sidebar-link">ink! 当前的坑</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/ask/introduction" class="sidebar-heading clickable"><span>ask!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/ask/tutorial.html" class="sidebar-link">Ask!教程</a></li><li><a href="/substrate-contracts-book/ask/design.html" class="sidebar-link">设计</a></li><li><a href="/substrate-contracts-book/ask/basics.html" class="sidebar-link">基础</a></li><li><a href="/substrate-contracts-book/ask/decorators.html" class="sidebar-link">Ask! 装饰器</a></li><li><a href="/substrate-contracts-book/ask/storage-data-structure.html" class="sidebar-link">存储</a></li><li><a href="/substrate-contracts-book/ask/ask-cli.html" class="sidebar-link">Ask-cli</a></li><li><a href="/substrate-contracts-book/ask/ask-vs-ink.html" class="sidebar-link">Ask!和ink!的特性比较</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/ask/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/ask/reports/v0.1Report.html" class="sidebar-link">Ask! v0.1 报告</a></li><li><a href="/substrate-contracts-book/ask/reports/v0.2Report.html" class="sidebar-link">Ask! v0.2 报告</a></li></ul></section></li></ul></section></li><li><a href="/substrate-contracts-book/solang/introduction.html" class="sidebar-link">Solang</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/redspot/introduction" class="sidebar-heading clickable"><span>Redspot</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/redspot/tutorial.html" class="sidebar-link">Redspot 教程</a></li><li><a href="/substrate-contracts-book/redspot/overview.html" class="sidebar-link">介绍</a></li><li><a href="/substrate-contracts-book/redspot/configuration.html" class="sidebar-link">配置信息</a></li><li><a href="/substrate-contracts-book/redspot/tasks.html" class="sidebar-link">Tasks</a></li><li><a href="/substrate-contracts-book/redspot/runtime-environment.html" class="sidebar-link">Runtime Environment</a></li><li><a href="/substrate-contracts-book/redspot/console.html" class="sidebar-link">控制台</a></li><li><a href="/substrate-contracts-book/redspot/q-and-a.html" class="sidebar-link">常见问题</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/redspot/plugin" class="sidebar-heading clickable"><span>Plugin</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/redspot/plugin/redspot-decimals.html" class="sidebar-link">@redspot_decimals插件</a></li><li><a href="/substrate-contracts-book/redspot/plugin/redspot-known-types.html" class="sidebar-link">@redspot_known-types插件</a></li><li><a href="/substrate-contracts-book/redspot/plugin/redspot-chai.html" class="sidebar-link">@redspot_chai插件</a></li><li><a href="/substrate-contracts-book/redspot/plugin/redspot-gas-reporter.html" class="sidebar-link">@redspot_gas-reporter 插件</a></li><li><a href="/substrate-contracts-book/redspot/plugin/redspot-patract.html" class="sidebar-link">@redspot_patract插件</a></li><li><a href="/substrate-contracts-book/redspot/plugin/redspot-explorer.html" class="sidebar-link">@redspot/explorer插件</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/redspot/reports" class="sidebar-heading clickable router-link-active open"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/redspot/reports/v0.1Report.html" class="sidebar-link">Redspot v0.1 报告</a></li><li><a href="/substrate-contracts-book/redspot/reports/v0.2Report.html" class="sidebar-link">Redspot v0.2 报告</a></li><li><a href="/substrate-contracts-book/redspot/reports/v0.3Report.html" class="sidebar-link">Redspot v0.3 报告</a></li><li><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html" aria-current="page" class="active sidebar-link">Redspot v0.4 报告</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/europa/introduction" class="sidebar-heading clickable"><span>Europa</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/europa/tutorial.html" class="sidebar-link">Europa教程</a></li><li><a href="/substrate-contracts-book/europa/execution_info.html" class="sidebar-link">Europa 合约执行日志分析</a></li><li><a href="/substrate-contracts-book/europa/sample.html" class="sidebar-link">Europa 调试示例</a></li><li><a href="/substrate-contracts-book/europa/wasm_executor.html" class="sidebar-link">Europa Wasm executor</a></li><li><a href="/substrate-contracts-book/europa/wasm_backtrace.html" class="sidebar-link">Europa 的Wasm Backtrace</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/europa/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/europa/reports/v0.1Report.html" class="sidebar-link">Europa v0.1 报告</a></li><li><a href="/substrate-contracts-book/europa/reports/v0.2Report.html" class="sidebar-link">Europa v0.2 报告</a></li><li><a href="/substrate-contracts-book/europa/reports/v0.3Report.html" class="sidebar-link">Europa v0.3报告</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/zkmega/introduction" class="sidebar-heading clickable"><span>zkMega</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/zkmega/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/zkmega/contract.html" class="sidebar-link">Contract</a></li><li><a href="/substrate-contracts-book/zkmega/example.html" class="sidebar-link">Example</a></li><li><a href="/substrate-contracts-book/zkmega/benchmark.html" class="sidebar-link">Benchmark</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/zkmega/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/zkmega/reports/v0.1Report.html" class="sidebar-link">zkMega v0.1 报告（Megaclite v0.1 报告）</a></li><li><a href="/substrate-contracts-book/zkmega/reports/v0.2Report.html" class="sidebar-link">zkMega v0.2 报告（Megaclite v0.2 报告）</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/himalia/introduction" class="sidebar-heading clickable"><span>Himalia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/himalia/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/himalia/go-patract.html" class="sidebar-link">go-patract</a></li><li><a href="/substrate-contracts-book/himalia/py-patract.html" class="sidebar-link">py-patract</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/himalia/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/himalia/reports/v0.1Report.html" class="sidebar-link">Patract Hub's treasury report for Himalia v0.1 &amp; v0.2(Contract SDKs)</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/metis/introduction" class="sidebar-heading clickable"><span>Metis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/metis/tokens.html" class="sidebar-link">ERC20</a></li><li><a href="/substrate-contracts-book/metis/access-control.html" class="sidebar-link">Access Control</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/metis/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/metis/reports/M1Report.html" class="sidebar-link">Metis(ink!标准库)项目的提案征求意见稿</a></li></ul></section></li></ul></section></li><li><a href="/substrate-contracts-book/carpo/introduction.html" class="sidebar-link">Carpo</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/elara/introduction" class="sidebar-heading clickable"><span>Elara</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/elara/tutorial.html" class="sidebar-link">Tutorial</a></li><li><a href="/substrate-contracts-book/elara/design.html" class="sidebar-link">设计简述</a></li><li><a href="/substrate-contracts-book/elara/API.html" class="sidebar-link">API 接入</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/elara/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/elara/reports/v0.1Report.html" class="sidebar-link">Elara v0.1 报告</a></li><li><a href="/substrate-contracts-book/elara/reports/v0.2Report.html" class="sidebar-link">Elara v0.2 报告</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/jupiter/introduction" class="sidebar-heading clickable"><span>Jupiter</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/jupiter/quickstart.html" class="sidebar-link">编译</a></li><li><a href="/substrate-contracts-book/jupiter/network.html" class="sidebar-link">Jupiter 网络</a></li><li><a href="/substrate-contracts-book/jupiter/contract.html" class="sidebar-link">合约</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/patra-store/introduction" class="sidebar-heading clickable"><span>PatraStore</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/patra-store/overview.html" class="sidebar-link">Overview</a></li><li><a href="/substrate-contracts-book/patra-store/getting-starter.html" class="sidebar-link">Getting started</a></li><li><a href="/substrate-contracts-book/patra-store/publish-dapps.html" class="sidebar-link">发布DApp</a></li></ul></section></li><li><a href="/substrate-contracts-book/patract/introduction.html" class="sidebar-link">Patract</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Redspot v0.4 报告</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>patractlabs</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="redspot-v0-4-报告"><a href="#redspot-v0-4-报告" class="header-anchor">#</a> Redspot v0.4 报告</h1> <p>10个月前，我们提交了Redspotv0.1的<a href="https://polkadot.polkassembly.io/treasury/0" target="_blank" rel="noopener noreferrer">国库提案#0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，并描述了未来4个版本的开发规划。几周前，我们提交了v0.4的<a href="https://polkadot.polkassembly.io/treasury/44" target="_blank" rel="noopener noreferrer">国库提案#44<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，现在我们已经完成了全部的计划。Redspot has become a powerful development environment, testing framework and asset pipeline for Pallet-Contracts. Redspot is trying to let the development of ink! be projectized and simplify the testing and interacting with contracts.  源码和文档在https://github.com/patractlabs/redspot/</p> <h2 id="summary-of-redspot-s-future-plan"><a href="#summary-of-redspot-s-future-plan" class="header-anchor">#</a> Summary of Redspot’s Future Plan：</h2> <ul><li>~~ v0.1: Support multi-contract: In the recent updates of ink! and cargo-contracts, multi-contracts can finally be compiled normally. Therefore, Redspot will revise its support system for multiple contracts.~~</li> <li><s>v0.2: Support docker compilation: Because of the current different environments, Wasm compilation results will be inconsistent (for example, Substrate's Runtime uses srtool to solve this problem). On the other hand, It may be difficult to build a compilation environment under different operating systems (such as Windows), so supporting docker can solve many environmental problems.</s></li> <li><s>v0.3: Support web interface: Although Redspot is basically a command line tool, it is not very attractive to programmers who are just getting started. Therefore, Redspot plans to introduce a contract deployment and operation interface similar to Canvas-UI, and add rich functions to this interface, strengthen the contract-related attributes in product design, and visualize some Redspot functions. And this interface can also add additional functions such as calling the polkadot{.js} extension for transaction signing (the browser extension cannot be called in the Redspot command line).</s></li> <li><s>v0.4: Add some other plugins to enrich the Redspot ecosystem, such as support for chain types, plugins for monitoring file changes, and so on.</s></li></ul> <h2 id="redspot-v0-4-的新增功能"><a href="#redspot-v0-4-的新增功能" class="header-anchor">#</a> Redspot v0.4 的新增功能</h2> <p>Redspot 的核心功能已经在  v0.3 的时候完成了。在 Redspot v0.4 我们主要做了一些使用体验上的优化，比如添加了 docker 的支持，添加了 GUI 界面，支持浏览器插件签名，以及其他一些优化。现在让我们展示 v0.4 的设计和实现，以及如何运行和验证。和 v0.3 一样，你可以通过 npx redspot-new erc20 在本地安装一个模版项目。具体使用方法可以参考之前的报告或者我们的文档。</p> <h2 id="redspot-多合约编译"><a href="#redspot-多合约编译" class="header-anchor">#</a> Redspot 多合约编译</h2> <p>ink! 的官方编译工具, cargo-contract 是不支持编译多合约的，需要编写额外的<a href="https://github.com/paritytech/ink/blob/master/examples/delegator/build-all.sh" target="_blank" rel="noopener noreferrer">脚本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>完成 。但在 Redspot v0.4 中，我们很好地实现了多合约编译。它支持合约文件的自动检测，以及多语言的合约同时编译。</p> <p>对于 ink! 合约，redspot 会通过查找已配置的目录下的所有 cargo.toml 文件，然后解析 cargo.toml 文件，如果包含 ink_lang 依赖，则会认为这是一个 ink! 合约。然后即可找到该项目下所有的合约。</p> <p>对于 solang 合约，redspot 是通过匹配 .sol 文件，从而实现查找所有合约的功能。</p> <p>Redspot 默认模版合约的编译配置如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  contract<span class="token operator">:</span> <span class="token punctuation">{</span>
    ink<span class="token operator">:</span> <span class="token punctuation">{</span>
      toolchain<span class="token operator">:</span> <span class="token string">&quot;nightly&quot;</span><span class="token punctuation">,</span>
      sources<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;contracts/**/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>其中，toolchain 表示编译合约时需要使用的 toolchain， sources 表示需要找到的目录，支持 glob 语法。同时 sources 选项，也可以通过命令行指定，这会覆盖 config 文件中的配置选项：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>npx redspot compile <span class="token string">&quot;contracts/**/*&quot;</span>
</code></pre></div><p>也可以指定单个目录，这个就可以编译单个合约了：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>npx redspot compile <span class="token string">&quot;contracts/erc20&quot;</span>
</code></pre></div><p>solang 也是类似的配置:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  contract<span class="token operator">:</span> <span class="token punctuation">{</span>
    ink<span class="token operator">:</span> <span class="token punctuation">{</span>
      toolchain<span class="token operator">:</span> <span class="token string">&quot;nightly&quot;</span><span class="token punctuation">,</span>
      sources<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;contracts/**/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    solang<span class="token operator">:</span> <span class="token punctuation">{</span>
      sources<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'contracts/**/*.sol'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>ink! 和 solang 可以同时存在，redspot 对 ink! 合约使用 cargo-contract，对 solang 合约使用 solang 编译器编译。将来我们也会对其他编译器提供支持。</p> <p>所有的编译产物能够在 artifacts (或者用户自己配置的目录)下找到：</p> <div class="language- extra-class"><pre class="language-text"><code>-- artifacts
    -- erc20.contract
    -- erc20.json
</code></pre></div><p>redspot 会对同一个合约生成一个 <code>.contract</code> 文件和一个 <code>.json</code> 文件。<code>.contract</code> 包含了所有 <code>.json</code> 所有信息，并且还额外包含 wasm 的源码。所以 <code>.json</code> 仅仅只是提供给前端，在前端不需要上传 wasm 的情况下使用。</p> <p>注意，项目中多个合约的名字不应该是一样的。redspot 会检测到这种情况然后报错。</p> <p>可以在 https://github.com/patractlabs/redspot/tree/master/examples/multi-contract/README.md 中找到合约编译的例子。</p> <p>克隆 Redspot 仓库，然后进入 <code>redspot/examples/multi-contract</code> 目录。</p> <p>然后安装依赖：</p> <div class="language- extra-class"><pre class="language-text"><code>$ yarn
</code></pre></div><p>然后你需要确保你已安装 <a href="https://github.com/paritytech/cargo-contract" target="_blank" rel="noopener noreferrer">cargo-contract<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://github.com/hyperledger-labs/solang" target="_blank" rel="noopener noreferrer">solang<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。redspot 不会自动安装他们。</p> <p>然后运行编译命令:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ npx redspot compile
</code></pre></div><p>这将会一次性编译所有合约，包括 solang 合约，solang 合约可以在 contracts/filpper 下找到。编译产物可以在 <code>artifacts</code> 目录下找到，然后我们删除 <code>artifacts</code> 文件夹。运行命令:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ npx redspot compile contracts/erc20
</code></pre></div><p>可以编译 erc20 合约。检测 <code>artifacts</code> 文件夹，只有 erc20 合约的编译产物。</p> <h2 id="redspot-known-types"><a href="#redspot-known-types" class="header-anchor">#</a> Redspot known types</h2> <p>redspot known types 是一个自动添加已知的链的 types 的插件。</p> <p>在 polkadot 中，添加 types 是很麻烦的事，因为必须手动添加，而不能自动生成。而且有时候也要处理不同链的版本的兼容性问题。</p> <p>我们希望使用 Redspot 的用户，能够专注合约开发，而不用关心这些细枝末节的事。所以我们添加了这个插件，目的就是为了解决不同链的 types 的问题。</p> <p>大部分链都在 polkadot apps 上提交过 types，所有 types 定义都在 <code>@polkadot/apps-config</code> 这个 npm 包里面。所以我们会部分引用<code>@polkadot/apps-config</code> 中的 types 定义。但 <code>@polkadot/apps-config</code> 缺少开发环境的 types 定义。然后我们会手动补这一部分。目前支持的链有  Canvas, Jupiter, Europa，Edgeware, Plasm, Clover。</p> <p>关于 types 的更多信息，请参考 polkadotjs 的文档 https://polkadot.js.org/docs/api/start/types.extend/</p> <p>我们已经将这个插件默认加入模版，用户无需进行额外配置。如果需要手动添加这个插件，首先安装依赖：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> @redspot/known-types
</code></pre></div><p>然后在 <code>redspot.config</code> 文件中，引入插件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token string">&quot;@redspot/known-types&quot;</span>

<span class="token operator">...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>我们可以通过 Jupiter 链(可以使用当前线上环境 wss://ws.jupiter-poa.patract.cn/ )来验证。我们将配置文件的节点，改为连接 Jupiter，然后注意删除所有 types：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token comment">// import &quot;@redspot/known-types&quot;</span>
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  networks<span class="token operator">:</span> <span class="token punctuation">{</span>
    development<span class="token operator">:</span> <span class="token punctuation">{</span>
      endpoint<span class="token operator">:</span> <span class="token string">&quot;wss://ws.jupiter-poa.patract.cn/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    types<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然后启动 redspot console:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ npx redspot console
</code></pre></div><p>然后运行命令，查询 authorities 信息，因为这里需要使用到 jupiter 特有的类型 AuthorityState，并且我们也没有定义 AuthorityState 类型，所以会解析错误：</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; await network.api.isReady;(await network.api.query.poA.authorities(&quot;3eTmoLUQtK2dsVFtzLUztfPSd3KghZggMpnz1XdzVt33vK9c&quot;)).toHuman()

RPC-CORE: getStorage(key: StorageKey, at?: BlockHash): StorageData:: Unable to decode storage poA.authorities:: createType(AuthorityState):: Cannot construct unknown type AuthorityState
Uncaught:
Error: Unable to decode storage poA.authorities:: createType(AuthorityState):: Cannot construct unknown type AuthorityState
    ...
</code></pre></div><p>然后我们可以引入 @redspot/known-types 解决这个问题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token string">&quot;@redspot/known-types&quot;</span>
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  networks<span class="token operator">:</span> <span class="token punctuation">{</span>
    development<span class="token operator">:</span> <span class="token punctuation">{</span>
      endpoint<span class="token operator">:</span> <span class="token string">&quot;wss://ws.jupiter-poa.patract.cn/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    types<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然后和之前一样步骤，这时因为 @redspot/known-types 将会识别连接的链，并且注入已知的类型定义，其中包括 AuthorityState 类型，所以现在可以成功解析：</p> <div class="language- extra-class"><pre class="language-text"><code>$ npx redspot console

&gt; await network.api.isReady;(await network.api.query.poA.authorities(&quot;3eTmoLUQtK2dsVFtzLUztfPSd3KghZggMpnz1XdzVt33vK9c&quot;)).toHuman()

'Working'
</code></pre></div><h2 id="redspot-docker"><a href="#redspot-docker" class="header-anchor">#</a> Redspot docker</h2> <p>在 Redspot v0.4 中，我们添加了使用 docker 编译合约的支持。这将能保证在不同平台下编译生成的 wasm 都是一致的。</p> <p>Redspot 将使用 <a href="https://github.com/patractlabs/docker-images/tree/master/contract" target="_blank" rel="noopener noreferrer">redspot/contract<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 这个 docker image 进行编译和运行测试网。它是在 paritytech 提供的 <a href="https://github.com/paritytech/scripts/blob/master/dockerfiles/contracts-ci-linux/Dockerfile" target="_blank" rel="noopener noreferrer">contract docker image<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的基础上进行修改的。</p> <p>目前只支持 ink! 合约 docker 编译，配置如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  contract<span class="token operator">:</span> <span class="token punctuation">{</span>
    ink<span class="token operator">:</span> <span class="token punctuation">{</span>
      toolchain<span class="token operator">:</span> <span class="token string">&quot;nightly&quot;</span><span class="token punctuation">,</span>
      docker<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      sources<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;contracts/**/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
  docker<span class="token operator">:</span> <span class="token punctuation">{</span>
    sudo<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在运行编译命令之前，请确保本机已安装 docker。运行命令</p> <div class="language- extra-class"><pre class="language-text"><code>$ npx redspot compile
</code></pre></div><blockquote><p>⚠️注意
当使用docker编译时，可能受网络环境影响（比如中国大陆需要vpn代理），会导致编译时间过长，
如果中途使用 ctrl+c 退出当前编译命令，docker容器并不会自动停止删除。</p></blockquote> <p>现在会默认使用 docker 编译。如果想更改默认行为，请添加 <code>--docker false</code> 参数：</p> <div class="language- extra-class"><pre class="language-text"><code>$ npx redspot compile --docker false
</code></pre></div><p>注意如果遇到权限错误，请将 <code>redspot.config</code> 文件中的 <code>docker.sudo</code> 改为 true。这样将会使用 sudo 运行 docker。</p> <p>同样的，也可以使用 docker 运行一个测试网。当前内置了 canvas 测试网，在未来我们会内置更多的测试网以供用户选择。</p> <p>目前运行测试网的命令是：</p> <div class="language- extra-class"><pre class="language-text"><code>$ npx redspot testnet
</code></pre></div><p>实际上，它的作用是仅仅只是运行命令:</p> <div class="language- extra-class"><pre class="language-text"><code>$ docker run -p 9944:9944 --rm redspot/contract /bin/bash -c &quot;canvas --tmp --dev --ws-port=9944 --ws-external&quot;  
</code></pre></div><p>如果想要修改默认的运行命令，可以添加 command 参数:</p> <div class="language- extra-class"><pre class="language-text"><code>$ npx redspot testnet --command 'docker run -p 9945:9944 --rm redspot/contract /bin/bash -c &quot;canvas --tmp --dev --ws-port=9944 --ws-external&quot;'
</code></pre></div><p>我们会推荐和引导用户优先使用 docker， 因为这样可以专注合约的编写，免去很多环境配置和启动节点的麻烦。</p> <h2 id="redspot-explorer"><a href="#redspot-explorer" class="header-anchor">#</a> redspot explorer</h2> <p>我们发现大部分用户在开发合约时会使用 @polkadot/apps 或者 canvas ui 进行辅助调试。所以我们基于 @polkadot/apps 开发了 redspot explorer，目的为了在进行合约开发时取代 @polkadot/apps。为此我们做了大量的修改和优化。并且在一定程序上连通了本机代码和网页。我们主要做了这些优化：</p> <p>1.重新设计了布局和菜单，更加专注合约模块。完善了 polkadot apps 的夜间模式，调整了UI，调整配色。删除对合约开发无用的页面。合并了一些工具页面。</p> <p><img src="https://i.imgur.com/NS58LA9.png" alt=""></p> <p>2.redspot config 中配置的网络，会被注入到 explorer 中。</p> <p>3.redspot config 中配置的账号，会出现在 explorer 中，可以在 explorer中使用，比如可以进行转账等交易，就和网页账户中的一样。</p> <p>4.redspot 中配置的 types 会被 explorer 采用。</p> <p>5.本地项目中生成的合约的 .contract 文件，会自动上传到 explorer 中。explorer 中的 contracts 页面会收录所有 code 已知的合约。</p> <p>6.切换网络时，只显示当前网络的合约和abi和账号。</p> <p>7.可以在本地运行测试或者脚本时，使用 polkadot extension 进行签名。</p> <p>8.能够在 explorer 中向本地发送编译代码的指令。</p> <p>9.在 explorer 中可以运行 redspot 的脚本。</p> <p>10.如果有已知的 code ，那么会在区块详情中，自动解析合约事件和发送合约时的参数。</p> <p>11.可以查询合约相关的交易。</p> <p>使用 redspot explorer 需要先安装 <code>@redspot/explorer</code> 插件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">yarn</span> <span class="token function">add</span> @redspot/explorer
</code></pre></div><p>然后在 redspot.config 中添加：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">import</span> <span class="token string">&quot;@redspot/explorer&quot;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre></div><p>运行 redspot explorer:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npx redspot explorer
</code></pre></div><p>注意，在运行 redspot explorer 的时候，会在本地启动一个服务，请不要终止该进程。并且，在每次 redspot.config 更改时，请手动重启该服务。</p> <p>然后打开默认的网址 <code>http://127.0.0.1:8011</code></p> <p>打开切换网络</p> <p><img src="https://i.imgur.com/fMQ7KfU.png" alt=""></p> <p>可以看到，能够选择 redspot 中配置的网络。</p> <p>检查 accounts 页面，会出现 redspot.config 中配置的账号。
<img src="https://i.imgur.com/h46cFXX.png" alt=""></p> <p>然后你可以使用你的 polkadot extension 中的账号，进行交易。复制你在 polkadot extension 中的账号地址。</p> <p>然后更改 deploy.ts 脚本：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> network<span class="token punctuation">,</span> patract <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redspot&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> getContractFactory <span class="token punctuation">}</span> <span class="token operator">=</span> patract<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>  api <span class="token punctuation">}</span> <span class="token operator">=</span> network<span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> api<span class="token punctuation">.</span>isReady<span class="token punctuation">;</span>
  <span class="token keyword">const</span> signer <span class="token operator">=</span> <span class="token string">&quot;&lt;your address&gt;&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> contractFactory <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContractFactory</span><span class="token punctuation">(</span><span class="token string">&quot;erc20&quot;</span><span class="token punctuation">,</span> signer<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> balance <span class="token operator">=</span> <span class="token keyword">await</span> api<span class="token punctuation">.</span>query<span class="token punctuation">.</span>system<span class="token punctuation">.</span><span class="token function">account</span><span class="token punctuation">(</span>signer<span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Balance: &quot;</span><span class="token punctuation">,</span> balance<span class="token punctuation">.</span><span class="token function">toHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contractFactory<span class="token punctuation">.</span><span class="token function">deployed</span><span class="token punctuation">(</span><span class="token string">&quot;new&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1000000&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    gasLimit<span class="token operator">:</span> <span class="token string">&quot;200000000000&quot;</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">&quot;100000000000&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> contract<span class="token punctuation">.</span>tx<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>signer<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Deploy successfully. The contract address: &quot;</span><span class="token punctuation">,</span>
    contract<span class="token punctuation">.</span>address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  api<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>然后运行脚本 <code>$ npx redspot run ./scripts/deploy.ts</code>， 然后此时会调用 polkadot extension 进行签名。检查你的浏览器里面的 polkadot extension （注意 explorer 页面必须是打开的）</p> <p><img src="https://i.imgur.com/Jn9fofZ.png" alt=""></p> <p>然后部署合约。然后部署成功后，检查 explorer 页面：</p> <p><img src="https://i.imgur.com/R8cEHx4.png" alt=""></p> <p>会出现链上的事件。我们查看 contracts.instantiateWithCode 事件，</p> <p><img src="https://i.imgur.com/DlNlRZb.png" alt=""></p> <p>这里会有合约 message 和合约 event 的解析。</p> <p>检查 contracts 的 codes 页面：</p> <p><img src="https://i.imgur.com/EP35Biz.png" alt=""></p> <p>这里会自动出现本地编译好的合约的code。</p> <p>然后检查 contracts 的 contracts 页面：
<img src="https://i.imgur.com/5zXGtSd.png" alt=""></p> <p>这里会出现刚刚部署好的合约。</p> <p>然后我们切换到 console 页面，在这里我们可以运行脚本和编译合约：
<img src="https://i.imgur.com/luc74qg.png" alt=""></p> <p>我们点击 compile contract ，出现此提示表示编译成功：
<img src="https://i.imgur.com/r5tZtUY.png" alt=""></p> <p>如果编译时间过长，请切换到运行 <code>npx redspot explorer</code> 命令的终端，查看日志提示。</p> <p>然后我们点击 run 运行脚本，右边控制台会输出运行日志：
<img src="https://i.imgur.com/nrGW9Wc.png" alt=""></p> <p>现在合约成功，我们再切换到 contracts 页面进行检查：</p> <p><img src="https://i.imgur.com/k2Uziom.png" alt=""></p> <p>可以看到，刚刚部署成功的合约会出现在这里。</p> <p>我们点击 extrinsics 按钮（即图中“recent contracts”中的每一行中的蓝色的 “extrinsics”），会跳出一个对话框（dialog），会展示当前合约的相关交易：</p> <p><img src="https://i.imgur.com/gdQo31E.png" alt=""></p> <h2 id="redspot-decimals"><a href="#redspot-decimals" class="header-anchor">#</a> @redspot/decimals</h2> <p><code>@redspot/decimals</code>是一个自动转换数字精度的插件，例如将<code>1 DOT</code>转换为<code>10000000000</code>。</p> <p>目前，此插件实现的功能有以下几种。</p> <p>固定的decimal</p> <ul><li><code>1 DOT</code> =&gt; <code>10 ** 10</code></li> <li><code>1 KSM</code> =&gt; <code>10 ** 12</code></li></ul> <p>自动获取链的<code>tokenDecimal</code></p> <ul><li><code>1 UNIT</code> =&gt; <code>10 ** tokenDecimal</code></li></ul> <p>Install:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> @redspot/decimals
</code></pre></div><p>And add the following statement to your <code>redspot.config.ts</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">import</span> <span class="token string">'@redspot/decimals'</span>
</code></pre></div><p>在部署合约的时候使用:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">await</span> contractFactory<span class="token punctuation">.</span><span class="token function">deployed</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token string">'10000'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    gasLimit<span class="token operator">:</span> <span class="token string">'400000000000'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">'10000 UNIT'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在转账中使用:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">import</span> <span class="token punctuation">{</span> network <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redspot'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> api <span class="token punctuation">}</span> <span class="token operator">=</span> network<span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> api<span class="token punctuation">.</span>isReady<span class="token punctuation">;</span>

    api<span class="token punctuation">.</span>tx<span class="token punctuation">.</span>balances<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span> <span class="token string">'1 UNIT'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>原理</p> <p><code>@polkadot/api</code>实现了自己的一套类型系统，因此，我们对<code>Weight</code>和<code>Balance</code>进行了重写，以达到可以识别类似<code>1 DOT</code>的功能。如果使用的功能不是<code>Weight</code>和<code>Balance</code>的类型，以上方法就不会生效。</p> <h2 id="how-to-verify-v0-4-github-library"><a href="#how-to-verify-v0-4-github-library" class="header-anchor">#</a> How to verify v0.4: Github library</h2> <ul><li><p><s>Multi-contract support: able to compile the delegator contract in ink/example and the multi-contracts contract project provided by redspot</s>
当前我们支持任意数量的 ink! 合约和 solang 合约混合编译。只需要设定好需要编译的目录即可。参考 [redspot 多合约编译](/#redspot 多合约编译)</p></li> <li><p><s>Support docker compilation: redspot can automatically pull and run the docker image containing cargo-contract component under the user's choice to compile the contract. The compiled structure can be moved to the artifacts directory, and the file permissions are correct.</s>
我们创建了一个 docker image 用于编译合约和启动测试网。https://hub.docker.com/r/redspot/contract 。并且集成到了 redspot 中。</p></li> <li><p>Redspot's web interface:
使用 @redspot/explorer 插件</p> <ul><li><p><s>Display the information and contract interface of the connected node</s>
redspot explorer 能够显示 redspot 中配置的网络。自动上传了本地目录中的合约 abi 文件。将会展示所有与当前 abi 文件相关联的合约</p></li> <li><p><s>When a contract is deployed, the contract information and related transactions will be recorded. And can be associated with the deployer. For Europa, it can directly scan the deployed contracts and associate relevant information.</s></p> <p>redspot explorer 能够查询当前的合约相关的交易（类型 polkadot apps explorer）。对 europa，redspot 会扫描所有区块。</p></li> <li><p><s>Display detailed contract operation information</s>
在 redspot explorer 中，会自动解析所有能够查询到 abi 的合约的 message 和 event 信息。在区块详情中可以查看。</p></li> <li><p><s>The information that Redspot originally displayed on the command line can be displayed in the web interface, and redspot test cases can be called and executed from the web interface.</s>
redspot explorer 中提供一个 console 功能，它能将代码发送本地执行。并且我们也添加了一个编译合约的按钮。可以让用户能够直接在 redspot explorer 上执行执行编译命令。</p></li> <li><p><s>Able to call the polkadot.js extension to sign Redspot transactions.</s>
当开启 redspot explorer 服务时，在本地需要签名的时候，可以通过 redspot explorer gui 间接的访问到 polkadot extensions。从而实现这个功能。</p></li></ul></li> <li><p>Other plug-ins</p> <ul><li><p><s>redspot-watcher: When the file is not edited, the contract will not be compiled if the relevant commands are re-executed. When the file is compiled, the compilation process will be called when re-executed</s>
使用 @redspot/watcher 插件可以保存 rust 和 toml 文件信息，如何没有更改，在执行 test run console 命令时，会跳过默认的编译。</p></li> <li><p><s>default blockchain types: Connect Canvas-node and Jupiter. You no longer need to fill in types and you can send transactions normally.</s>
我们当前为 Europa, Jupiter, Canvas, Edgeware, Plasm, Clover 等添加了 types。在使用这几条链的时候无需再手动配置 types。其中 Canvas,Edgeware,Plasm,Clover 是通过 @polkadot/app-config 获取到 types 的，所以类型的正确性依赖于他们提交的配置。而 Europa,Jupiter 我们会手动维护类型。</p></li> <li><p><s>Balances decimal plug-in: Use canvas, Jupiter and Europa to test, respectively test 1 Unit, 1 DOT, etc.</s>
使用 @redspot/decimals 可以实现这个功能。</p></li></ul></li></ul></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/patractlabs/substrate-contracts-book/edit/master/redspot/reports/v0.4Report.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2021/8/2上午6:29:47</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/substrate-contracts-book/redspot/reports/v0.3Report.html" class="prev">
            Redspot v0.3 报告
          </a></span> <span class="next"><a href="/substrate-contracts-book/europa/tutorial.html">
            Europa教程
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#summary-of-redspot-s-future-plan" class="sidebar-link reco-side-summary-of-redspot-s-future-plan" data-v-70334359>Summary of Redspot’s Future Plan：</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#redspot-v0-4-的新增功能" class="sidebar-link reco-side-redspot-v0-4-的新增功能" data-v-70334359>Redspot v0.4 的新增功能</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#redspot-多合约编译" class="sidebar-link reco-side-redspot-多合约编译" data-v-70334359>Redspot 多合约编译</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#redspot-known-types" class="sidebar-link reco-side-redspot-known-types" data-v-70334359>Redspot known types</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#redspot-docker" class="sidebar-link reco-side-redspot-docker" data-v-70334359>Redspot docker</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#redspot-explorer" class="sidebar-link reco-side-redspot-explorer" data-v-70334359>redspot explorer</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#redspot-decimals" class="sidebar-link reco-side-redspot-decimals" data-v-70334359>@redspot/decimals</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/redspot/reports/v0.4Report.html#how-to-verify-v0-4-github-library" class="sidebar-link reco-side-how-to-verify-v0-4-github-library" data-v-70334359>How to verify v0.4: Github library</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/substrate-contracts-book/assets/js/app.0512fc9b.js" defer></script><script src="/substrate-contracts-book/assets/js/3.7c35afa4.js" defer></script><script src="/substrate-contracts-book/assets/js/1.293685b3.js" defer></script><script src="/substrate-contracts-book/assets/js/184.ebdea99c.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{639:function(e,t,a){"use strict";a.r(t);var s=a(6),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"report-for-elara-v0-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#report-for-elara-v0-2"}},[e._v("#")]),e._v(" Report for Elara v0.2")]),e._v(" "),a("p",[e._v("5 weeks ago, "),a("a",{attrs:{href:"https://patract.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Patract Hub"),a("OutboundLink")],1),e._v(" applied a "),a("a",{attrs:{href:"https://polkadot.polkassembly.io/motion/33",target:"_blank",rel:"noopener noreferrer"}},[e._v("treasury proposal"),a("OutboundLink")],1),e._v(" for Elara v0.2. Now, we have finished all the development work on time. Please review our design, work, and enjory the seperated free services (1M requests per day) online at https://elara.patract.io. We have also privided a shared limited bandwidth node RPC service for Polkadot (wss://polkadot.elara.patract.io and https://polkadot.elara.patract.io), you can add it directly into your project and https://polkadot.js.org/apps.")]),e._v(" "),a("blockquote",[a("h3",{attrs:{id:"recap-of-the-detailed-design-of-elara-v0-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recap-of-the-detailed-design-of-elara-v0-2"}},[e._v("#")]),e._v(" Recap of the detailed design of Elara v0.2")]),e._v(" "),a("ul",[a("li",[e._v("Implement the account space features, supporting developers to use Github as a third-party login system to create an account space.")]),e._v(" "),a("li",[e._v("Support the creating and management of multiple projects under the developer’s account space")]),e._v(" "),a("li",[e._v("Provide developers with detailed access statistics features on the single project dimension, showing statistical indicators such as daily and weekly requests, calling methods, and source of user groups.")]),e._v(" "),a("li",[e._v("Officially launch https://elara.patract.io, providing the community with public access services to the Polkadot mainnet")])])]),e._v(" "),a("p",[e._v("Now, let's show you the design and implementation of v0.2, and how to run and verify the work. ** With this micro-service architecture described blow, we can provide 5K requests per second and 500M requests per day for now. In the future, we will upgrade this architecture for 10 times improvements. **")]),e._v(" "),a("h2",{attrs:{id:"architecture-of-elara-v0-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#architecture-of-elara-v0-2"}},[e._v("#")]),e._v(" Architecture of Elara v0.2")]),e._v(" "),a("p",[e._v("We had learned from Infura's work model, so that each development account can apply for multiple "),a("code",[e._v("Projects")]),e._v(" to divide different "),a("code",[e._v("Workspace")]),e._v(", and then assign different "),a("code",[e._v("Provider")]),e._v(" to access chain nodes. Therefore, the user's smallest resource unit is a "),a("code",[e._v("Project")]),e._v(". We have assigned an independent "),a("code",[e._v("PID")]),e._v(" for each project. In the index of all resources, the developer can use this "),a("code",[e._v("PID")]),e._v(" to find the information corresponding to this "),a("code",[e._v("Project")]),e._v(", such as detailed information, daily or weekly access statistics, etc.")]),e._v(" "),a("p",[e._v("Therefore, the architecture of Elara v0.2 is roughly as follows:")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/5023721/100614013-6a5fde00-3350-11eb-882f-43efe02e1ecd.jpg",alt:"elara"}})]),e._v(" "),a("p",[e._v("As can be seen from the above, in the backend management platform of Elara v0.2, the entire system is divided into 3 main modules:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Developer-Account")]),e._v(": The module to manage the user's account login status.")]),e._v(" "),a("li",[a("code",[e._v("Stat")]),e._v(": The module for management and data statistics of "),a("code",[e._v("Project")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("API")]),e._v(": The "),a("code",[e._v("Route")]),e._v(" module to manage user's "),a("code",[e._v("Requests")]),e._v(".")])]),e._v(" "),a("p",[e._v("In the overall design, the three modules are designed into a microservice architecture system, which can be independently extended. Because these three modules all run in independent processes after they are started, in the future, individual modules can be upgraded in parallel, such as expansion, reconstruction, and replacement. Among them, the "),a("code",[e._v("Developer-Account")]),e._v(" module and the "),a("code",[e._v("Stat")]),e._v(" module share data through a shared database, and the "),a("code",[e._v("Stat")]),e._v(" and "),a("code",[e._v("API")]),e._v(" are decoupled through the message queue "),a("code",[e._v("kafka")]),e._v(". In the future, it will be easy to add more complex functional modules based on this design to make Elara play a more powerful effect.")]),e._v(" "),a("p",[e._v("These three modules are responsible for different functions:")]),e._v(" "),a("h3",{attrs:{id:"_1-developer-account-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-developer-account-module"}},[e._v("#")]),e._v(" 1. "),a("code",[e._v("Developer-Account")]),e._v(" Module")]),e._v(" "),a("p",[e._v("This module manages user account information and maintains login status. This module currently uses "),a("code",[e._v("Redis")]),e._v(" to cache user information and maintain the user's login status. This login status is shared with the "),a("code",[e._v("Stat")]),e._v(" module. Currently, this module uses Github's "),a("code",[e._v("AccountID")]),e._v(" information to request authorization to access Github to create users.")]),e._v(" "),a("p",[e._v("Therefore, the external access interfaces provided by the module after running are:")]),e._v(" "),a("ul",[a("li",[e._v("GET "),a("code",[e._v("/auth/login")]),e._v(": Get login status information")]),e._v(" "),a("li",[e._v("GET "),a("code",[e._v("/auth/logout")]),e._v(": logout, remove the user's login information.")]),e._v(" "),a("li",[e._v("GET "),a("code",[e._v("/auth/github")]),e._v(": request authorization information from github")]),e._v(" "),a("li",[e._v("GET "),a("code",[e._v("/auth/github/callback")]),e._v(": processing of callbacks authorized to github")])]),e._v(" "),a("h3",{attrs:{id:"_2-stat-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-stat-module"}},[e._v("#")]),e._v(" 2. "),a("code",[e._v("Stat")]),e._v(" Module")]),e._v(" "),a("p",[e._v("This module is mainly responsible for the management of "),a("code",[e._v("Project")]),e._v(", and counts the request information initiated by users from the "),a("code",[e._v("API")]),e._v(" module in the dimensions of Project and users. This module is "),a("code",[e._v("Consumer")]),e._v(" of "),a("code",[e._v("kafka")]),e._v(" Message Middleware, which accepts request information sent from the "),a("code",[e._v("API")]),e._v(" module and performs processing statistics. At the same time, the module shares the user's login status information with "),a("code",[e._v("Developer-Account")]),e._v(" to check whether the user is still connected to Elara's webpage. In this module, each user can apply for the allocation of multiple "),a("code",[e._v("Projects")]),e._v(", representing a restricted resource unit in Elara, such as limiting the amount of requests and total bandwidth that a Project can accept per day.")]),e._v(" "),a("p",[e._v("The access interface of the "),a("code",[e._v("Stat")]),e._v(" module uses "),a("code",[e._v("PID")]),e._v(" as the basic element, and the "),a("code",[e._v("PID")]),e._v(" of a project will be used as the specific node "),a("code",[e._v("Provider")]),e._v(" of this project in the "),a("code",[e._v("API")]),e._v(" module. In the process of using this "),a("code",[e._v("PID")]),e._v(" to raise a node access request to the "),a("code",[e._v("API")]),e._v(", the developer will consume the resources managed under the project corresponding to this "),a("code",[e._v("PID")]),e._v(" and accumulate the statistical information of this project.")]),e._v(" "),a("p",[e._v("Based on the above discussion, the "),a("code",[e._v("Stat")]),e._v(" module is designed as follows:")]),e._v(" "),a("ul",[a("li",[e._v("GET "),a("code",[e._v("/project/list")]),e._v(": List all project information under the currently logged-in user, and return:")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"b78a79f98a2bb1a991a357504a5b04c1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Active"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"chain"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"substrate"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"thedao"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"secret"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"createtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1600398327"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"lasttime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1600398327"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n           "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"allowlist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"false"')]),e._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      ...\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("The "),a("code",[e._v("id")]),e._v(" in the returned information is the "),a("code",[e._v("PID")]),e._v(" of a "),a("code",[e._v("Project")]),e._v(".")]),e._v(" "),a("ul",[a("li",[e._v("GET "),a("code",[e._v("/project/<PID>")]),e._v(": Returns the detailed information associated with this "),a("code",[e._v("Project")]),e._v(".")]),e._v(" "),a("li",[e._v("POST "),a("code",[e._v("/project/create")]),e._v(": Create a new "),a("code",[e._v("Project")]),e._v(" based on the information of the currently logged in user")])]),e._v(" "),a("p",[e._v("Parameters：")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("chain:<Polkdaot|Kusama>\nname:<Validation rules /[a-zA-Z]{4,32}/>\n")])])]),a("ul",[a("li",[e._v("GET "),a("code",[e._v("/stat/day/<PID>")]),e._v(": Get the statistics of a "),a("code",[e._v("Project")]),e._v(" in one day")]),e._v(" "),a("li",[e._v("GET "),a("code",[e._v("/stat/day/<PID>")]),e._v(": Get the statistical information of a "),a("code",[e._v("Project")]),e._v(" within one week")]),e._v(" "),a("li",[e._v("See the document for other interface definitions: "),a("a",{attrs:{href:"https://github.com/patractlabs/elara/tree/master/packages/stat",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stat README"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"_3-api-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-api-module"}},[e._v("#")]),e._v(" 3. "),a("code",[e._v("API")]),e._v(" Module")]),e._v(" "),a("p",[e._v("After receiving requests from different users, the "),a("code",[e._v("API")]),e._v(" module distinguishes which request to a "),a("code",[e._v("Project")]),e._v(" according to the "),a("code",[e._v("PID")]),e._v(" carried in the routing information, sends the corresponding information to the "),a("code",[e._v("kafka")]),e._v(" queue, and forwards the user request to the corresponding node. Therefore, for the "),a("code",[e._v("API")]),e._v(" module, Elara designed the following two access interfaces, among which the parameters of "),a("code",[e._v("<chain>")]),e._v(" can currently be filled in "),a("code",[e._v("Polkadot")]),e._v(" and "),a("code",[e._v("Kusama")]),e._v(".")]),e._v(" "),a("ul",[a("li",[e._v("HTTPS, POST "),a("code",[e._v("/<chain>/<PID>")]),e._v(": Accept the RPC request initiated by the user. The parameters of the request are all RPC interfaces that the node provides external services")]),e._v(" "),a("li",[e._v("Websocket "),a("code",[e._v("/<chain>/<PID>")]),e._v(": Accept the Websocket request initiated by the user. The parameters of the request are all RPC interfaces that the node provides external services")])]),e._v(" "),a("p",[e._v("The above three modules work together to provide Elara's back-end components. Adding a front-end kit on top of it can become a complete Elara product to provide external services: https://elara.patract.io/ The sample screenshot is as follows:")]),e._v(" "),a("p",[e._v("This module is used to provide node services. It is mainly responsible to proxy user's node access request (RPC & websocket) to the node, and as the Producer of the "),a("code",[e._v("kafka")]),e._v(" message queue, it sends the relevant information of the user request to the "),a("code",[e._v("Stat")]),e._v(" module. In the "),a("code",[e._v("API")]),e._v(" module, the user composes the "),a("code",[e._v("PID")]),e._v(" created in the "),a("code",[e._v("Stat")]),e._v(" module into the URL of the access node "),a("code",[e._v("Provider")]),e._v(", and then initiates a node access request to the "),a("code",[e._v("API")]),e._v(" module.")]),e._v(" "),a("h3",{attrs:{id:"_4-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-summary"}},[e._v("#")]),e._v(" 4. Summary")]),e._v(" "),a("p",[e._v("The above three modules work together to provide Elara's back-end components. Adding a front-end kit on top of it can become a complete Elara product to provide external services: https://elara.patract.io/ The sample screenshot is as follows:")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/21072025/100822117-aa2be000-348c-11eb-9198-815ab2a5ebd5.png",alt:"elara1"}}),e._v(" "),a("img",{attrs:{src:"https://user-images.githubusercontent.com/21072025/100822212-d5163400-348c-11eb-9e37-cdc3f5dd960c.png",alt:"elara2"}}),e._v(" "),a("img",{attrs:{src:"https://user-images.githubusercontent.com/21072025/100822302-042ca580-348d-11eb-9f70-756c2cc9265f.png",alt:"elara3"}})]),e._v(" "),a("h2",{attrs:{id:"run-elara"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-elara"}},[e._v("#")]),e._v(" Run Elara")]),e._v(" "),a("p",[e._v("The processes corresponding to the above 3 modules need to be started "),a("strong",[e._v("in sequence")]),e._v(" in the following order to make Elara work properly: 1, "),a("code",[e._v("Developer-Account")]),e._v(", 2, "),a("code",[e._v("Stat")]),e._v(", 3."),a("code",[e._v("API")])]),e._v(" "),a("h3",{attrs:{id:"environment-preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#environment-preparation"}},[e._v("#")]),e._v(" Environment preparation")]),e._v(" "),a("p",[e._v("Elara's operating environment requires "),a("code",[e._v("redis")]),e._v(" and "),a("code",[e._v("kafka")]),e._v(" support. Therefore, before running the following commands, first ensure that there is a running "),a("code",[e._v("redis")]),e._v(" instance in the running environment and the executable file of "),a("code",[e._v("kafka")]),e._v(" has been installed. The 3 processes of Elara are run by "),a("code",[e._v("node")]),e._v(", so you need to install the corresponding dependencies with the "),a("code",[e._v("yarn")]),e._v(" command before running.")]),e._v(" "),a("h3",{attrs:{id:"start-services"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-services"}},[e._v("#")]),e._v(" Start Services")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Start "),a("code",[e._v("Developer-Account")]),e._v(" Service")]),e._v(" "),a("ol",[a("li",[e._v("Enter "),a("code",[e._v("elara/packages/account")]),e._v(" directory"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" package/account\n")])])])]),e._v(" "),a("li",[e._v("Install dependence"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])])]),e._v(" "),a("li",[e._v("Modify the configuration file of the "),a("code",[e._v("Developer-Account")]),e._v(" service, including the "),a("code",[e._v("redis")]),e._v(" field and the "),a("code",[e._v("github")]),e._v(" field. The default port is set to "),a("code",[e._v("7001")]),e._v(", so if the "),a("code",[e._v("port")]),e._v(" domain is not modified, the service will occupy the "),a("code",[e._v("7001")]),e._v(" port after startup."),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" ./config/env/dev.env.js\n")])])])]),e._v(" "),a("li",[e._v("Start the service, and the log output by the process is located in the "),a("code",[e._v("./logs")]),e._v(" directory."),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ node app.js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# or use pm2 to manage process")]),e._v("\n$ pm2 start pm2.json --env dev\n")])])])])])]),e._v(" "),a("li",[a("p",[e._v("Start "),a("code",[e._v("Stat")]),e._v(" Service")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Enter "),a("code",[e._v("elara/packages/stat")]),e._v(" directory（If you are in "),a("code",[e._v("account")]),e._v(" directory）")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("/stat\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Install dependence")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Switch to the "),a("code",[e._v("kafka")]),e._v(" directory, start the "),a("code",[e._v("kafka")]),e._v(" directory and set the "),a("code",[e._v("topic")])]),e._v(" "),a("ol",[a("li",[e._v("Start "),a("code",[e._v("kafka")]),e._v(" and related processes. If the configuration file of "),a("code",[e._v("kafka")]),e._v(" is not modified, port "),a("code",[e._v("9092")]),e._v(" will be occupied by default."),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("the root directory of kafka"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n$ bin/zookeeper-server-start.sh config/zookeeper.properties\n$ bin/kafka-server-start.sh config/server.properties　\n")])])])]),e._v(" "),a("li",[e._v("Add "),a("code",[e._v("elara-dev")]),e._v(" topic to "),a("code",[e._v("kafka")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# add `elara-dev` topic to kafka")]),e._v("\n$ bin/kafka-topics.sh --create --topic elara-dev --bootstrap-server localhost:9092\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# check whethere this topic is initted")]),e._v("\nbin/kafka-topics.sh --describe --topic elara-dev --bootstrap-server localhost:9092\n")])])])])])]),e._v(" "),a("li",[a("p",[e._v("Switch to "),a("code",[e._v("elara/packages/stat")]),e._v(" directory，modify the configration file of "),a("code",[e._v("Stat")]),e._v(" module.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" ./config/env/dev.env.js\n")])])]),a("ol",[a("li",[e._v("Since "),a("code",[e._v("Stat")]),e._v(" and "),a("code",[e._v("Developer-Account")]),e._v(" share the same "),a("code",[e._v("redis")]),e._v(" instance, the configuration of the "),a("code",[e._v("redis")]),e._v(" field in this configuration file should be consistent with the configuration of "),a("code",[e._v("redis")]),e._v(" in the "),a("code",[e._v("Developer-Account")]),e._v(" configuration file .")]),e._v(" "),a("li",[e._v("The "),a("code",[e._v("kafka")]),e._v(" domain here needs to be consistent with the configuration of starting "),a("code",[e._v("kafka")]),e._v(" in the previous step.")]),e._v(" "),a("li",[a("strong",[e._v("If it is only used for local testing, please modify the "),a("code",[e._v("test:false")]),e._v(" in the default configuration to "),a("code",[e._v("test:true")])]),e._v(". After enabling this flag, when accessing the interface provided by "),a("code",[e._v("stat")]),e._v(", the login status of the login account will not be verified, and all interfaces can be directly accessed. In a production environment, please ensure that the value of the "),a("code",[e._v("test")]),e._v(" field is "),a("code",[e._v("false")]),e._v(".")]),e._v(" "),a("li",[e._v("The default "),a("code",[e._v("port")]),e._v(" domain in the configuration file is "),a("code",[e._v("7002")]),e._v(", so if you do not modify this value, it will occupy the "),a("code",[e._v("7002")]),e._v(" port to provide services after startup.")])])]),e._v(" "),a("li",[a("p",[e._v("Start Services")]),e._v(" "),a("ol",[a("li",[e._v("Start the "),a("code",[e._v("stat")]),e._v(" service. If you do not modify the port after startup, the "),a("code",[e._v("7002")]),e._v(" port will be occupied. The following text uses "),a("code",[e._v("127.0.0.1:7002")]),e._v(" as the service address performed by "),a("code",[e._v("stat")]),e._v(". The log output by the process is located in the "),a("code",[e._v("./logs")]),e._v(" directory."),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ node app.js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# or use pm2 to manage process")]),e._v("\n$ pm2 start pm2.json --env dev\n")])])])]),e._v(" "),a("li",[e._v("Start "),a("code",[e._v("kafka")]),e._v(" consumer service"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ node ./kafka/consumer.js\n")])])])]),e._v(" "),a("li",[e._v("If you need to see the console information, you need to start the "),a("code",[e._v("dashboard")]),e._v(" service"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ node ./timer/dashboard.js\n")])])]),e._v("At this point, you can open "),a("code",[e._v("http://127.0.0.1:7002/dashboard")]),e._v(" in the browser to see the statistics information of the monitoring station.")])])])])]),e._v(" "),a("li",[a("p",[e._v("Start "),a("code",[e._v("API")]),e._v(" Service")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Enter "),a("code",[e._v("elara/packages/api")]),e._v(" directory（if you are in "),a("code",[e._v("stat")]),e._v("）")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("/api\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Install dependence")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Modify the configuration file of the "),a("code",[e._v("API")]),e._v(" module")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" ./config/env/dev.env.js\n")])])]),a("ul",[a("li",[e._v("The "),a("code",[e._v("chain")]),e._v(" field is used to configure the real chain node, where the name of the chain is part of the route provided by the "),a("code",[e._v("api")]),e._v(" to the developer. For example, if there are the following configurations in the default, the access method of "),a("code",[e._v("/Polkadot/<PID>")]),e._v(" is supported in the routing supported by the API."),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[e._v("'Polkadot'"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    'rpc'"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("'****"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("**'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//configure as node http://IP: RPC port in step 2")]),e._v("\n    'ws'"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("'****"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("**'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//configure as node ws://IP: WS port in step 2")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),a("li",[e._v("The "),a("code",[e._v("kafka")]),e._v(" field is used to configure the information of the "),a("code",[e._v("kafka")]),e._v(" process started in the "),a("code",[e._v("stat")]),e._v(" section. Note that the configured topic is the topic "),a("code",[e._v("elara-dev")]),e._v(" registered to "),a("code",[e._v("kafka")]),e._v(" when the "),a("code",[e._v("stat")]),e._v(" part is configured. ,")]),e._v(" "),a("li",[a("code",[e._v("startServer")]),e._v(" filed is used to configure the ip and port of the "),a("code",[e._v("stat")]),e._v(" process. For example, if "),a("code",[e._v("api")]),e._v(" and "),a("code",[e._v("stat")]),e._v(" are on the same host and the default configuration is used (that is, "),a("code",[e._v("stat")]),e._v(" occupies port 7002 by default), then The value here is "),a("code",[e._v("127.0.0.1:7002")])]),e._v(" "),a("li",[a("code",[e._v("port")]),e._v(" field is used to configure the port occupied by the "),a("code",[e._v("api")]),e._v(" service process, the default configuration is 7003")])])]),e._v(" "),a("li",[a("p",[e._v("Start Services")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ node app.js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# or use pm2 to manage process")]),e._v("\n$ pm2 start pm2.json --env dev\n")])])]),a("p",[e._v("At this time the service has been started, if the port is not modified, the port "),a("code",[e._v("7003")]),e._v(" will be occupied. The following text uses the port "),a("code",[e._v("127.0.0.1:7003")]),e._v(" as the host for user access. The log output by the process is located in the "),a("code",[e._v("./logs")]),e._v(" directory.")])])])])]),e._v(" "),a("h3",{attrs:{id:"call-elara"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#call-elara"}},[e._v("#")]),e._v(" Call Elara")]),e._v(" "),a("p",[e._v("Since the configuration of "),a("code",[e._v("test:true")]),e._v(" is used when starting "),a("code",[e._v("stat")]),e._v(" in the above case, the process of user login is skipped in the following process, and the process of creating "),a("code",[e._v("Project")]),e._v(" is directly started.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Create Project：")]),e._v(" "),a("p",[e._v("Send a request to create a project to the service address "),a("code",[e._v("127.0.0.1:7002")]),e._v(" of "),a("code",[e._v("stat")]),e._v(": This project is a request for access to the "),a("code",[e._v("Polkadot")]),e._v(" chain, so the value of the parameter "),a("code",[e._v("chain")]),e._v(" is specified as "),a("code",[e._v("Polkadot")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("POST http://127.0.0.1:7002/project/create\n\nchain:Polkadot\nname:hello\n")])])]),a("p",[e._v("Return：")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"mssage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"5d4ebb40b08f127652ad022f5936b9da"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Active"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"chain"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Polkadot"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Only  For Test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"secret"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0b89a386965bfe4dcb19f724ecb41890"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"createtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1606581366"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"lasttime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1606581366"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"allowlist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"false"')]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("You can get the detailed information of creating "),a("code",[e._v("Project")]),e._v(" and "),a("code",[e._v("PID")]),e._v(", here is "),a("code",[e._v("5d4ebb40b08f127652ad022f5936b9da")])])]),e._v(" "),a("li",[a("p",[e._v("List all the "),a("code",[e._v("Projects")]),e._v(" for this user")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("GET http://127.0.0.1:7002/project/list\n")])])]),a("p",[e._v("Return:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"5d4ebb40b08f127652ad022f5936b9da"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Active"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"chain"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Polkadot"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Only  For Test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"secret"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0b89a386965bfe4dcb19f724ecb41890"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"createtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1606581366"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"lasttime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1606581366"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"allowlist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"false"')]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("Since testing is currently enabled, all "),a("code",[e._v("Project")]),e._v(" information will be listed. If the test is not turned on, only the information list of "),a("code",[e._v("Project")]),e._v(" for the current login will be listed.")])]),e._v(" "),a("li",[a("p",[e._v("Use this PID as part of the route to initiate an access request to the node.")]),e._v(" "),a("p",[e._v("The access request to the node needs to be served through "),a("code",[e._v("API")]),e._v(", the current "),a("code",[e._v("API")]),e._v(" service address is "),a("code",[e._v("127.0.0.1:7003")]),e._v(", so we can initiate the following request: The access route is "),a("code",[e._v("<api server host>/<project chain>/< PID>")]),e._v(" composition, so in this case")]),e._v(" "),a("ul",[a("li",[e._v("The access address for rpc is "),a("code",[e._v("http://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da")])]),e._v(" "),a("li",[e._v("The access address for websocket is "),a("code",[e._v("ws://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da")])])]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('POST http://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da\n\n{\n    "id":1, \n    "jsonrpc":"2.0", \n    "method":"system_chain",\n    "params":[ ]\n}\n')])])]),a("p",[a("code",[e._v("API")]),e._v(" Service is normal and return:")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"jsonrpc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"result"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Polkadot"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("This request will be counted by Elara normally and recorded that project "),a("code",[e._v("5d4ebb40b08f127652ad022f5936b9da")]),e._v(" has one request.")])]),e._v(" "),a("li",[a("p",[e._v("If you want to test whether the api service can satisfy normal node requests, you can add the websocket access link to "),a("a",{attrs:{href:"https://polkadot.js.org/apps/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("Polkadot/Substrate Portal")]),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("ol",[a("li",[e._v("Log in to the Portal web page in the browser")]),e._v(" "),a("li",[e._v("Click on the upper left corner")]),e._v(" "),a("li",[e._v("Click on the "),a("code",[e._v("DEVELOPMENT")]),e._v(" column and click on the "),a("code",[e._v("Custom")]),e._v(" column to fill in "),a("code",[e._v("ws://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da")])]),e._v(" "),a("li",[e._v('Click "Switch"')])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/2844215/100872118-4a5d2580-34dc-11eb-8bf2-a15de4af94c8.png",alt:"image"}})]),e._v(" "),a("p",[e._v("At this point the Portal should be able to work normally, and all access requests are recorded by Elara.")])]),e._v(" "),a("li",[a("p",[e._v("Access the "),a("code",[e._v("Stat")]),e._v(" service to get statistics")]),e._v(" "),a("p",[e._v("Such as listing all the visit statistics of the current project in the day")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("GET http://127.0.0.1:7002/stat/day/5d4ebb40b08f127652ad022f5936b9da\n")])])]),a("p",[e._v("Or list the statistics of this project this week")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("GET http://127.0.0.1:7002/stat/week/5d4ebb40b08f127652ad022f5936b9da\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Visit "),a("code",[e._v("http://127.0.0.1:7002/dashboard")]),e._v(" and you can see the total statistics from the console.")])])]),e._v(" "),a("p",[e._v("At this point, the entire system can operate normally.")]),e._v(" "),a("h2",{attrs:{id:"验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[e._v("#")]),e._v(" 验证")]),e._v(" "),a("ul",[a("li",[a("p",[a("s",[e._v("Developers can use Github account to log in to the developer account space from https://elara.patract.io")])]),e._v(" "),a("blockquote",[a("p",[e._v("Anyone can currently get access to the Polkadot chain through this link.")])])]),e._v(" "),a("li",[a("p",[a("s",[e._v("Developers can create new projects and access related API keys under the account")])]),e._v(" "),a("blockquote",[a("p",[e._v("The above process has introduced the concept of project, and you can log in to github with authorization and create a project at https://elara.patract.io.")])])]),e._v(" "),a("li",[a("p",[e._v("[x] Developers can access the Polkadot node in Elara through Http and web-socket protocols")]),e._v(" "),a("blockquote",[a("p",[e._v("The "),a("code",[e._v("API")]),e._v(" service is used to support this function, and the corresponding operations have been shown above")])])]),e._v(" "),a("li",[a("p",[e._v("[x] Developers can view the monitoring statistics of the projects on the day and the recent weeks")]),e._v(" "),a("blockquote",[a("p",[e._v("The "),a("code",[e._v("/stat/day/<PID>")]),e._v(" and "),a("code",[e._v("/stat/week/<PID>")]),e._v(" interfaces of "),a("code",[e._v("Stat")]),e._v(" service are used to support this function.")])])]),e._v(" "),a("li",[a("p",[e._v("[x] You can view the relevant monitoring statistics from the Elara dashboard")]),e._v(" "),a("blockquote",[a("p",[e._v("You can see the corresponding information from the "),a("code",[e._v("http://127.0.0.1:7002/dashboard")]),e._v(" console.")])])])])])}),[],!1,null,null,null);t.default=o.exports}}]);
"use strict";(self.webpackChunksubstrate_contracts_book=self.webpackChunksubstrate_contracts_book||[]).push([[7524],{3905:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return d}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),u=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),m=u(r),d=o,k=m["".concat(c,".").concat(d)]||m[d]||p[d]||a;return r?n.createElement(k,s(s({ref:t},l),{},{components:r})):n.createElement(k,s({ref:t},l))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=r[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},9770:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return l},default:function(){return m}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),s=["components"],i={},c=void 0,u={unversionedId:"ask/guides/architecture",id:"ask/guides/architecture",isDocsHomePage:!1,title:"architecture",description:"Architecutre",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/ask/guides/architecture.md",sourceDirName:"ask/guides",slug:"/ask/guides/architecture",permalink:"/substrate-contracts-book/en/ask/guides/architecture",editUrl:"https://github.com/patractlabs/substrate-contracts-book/edit/master/docs/ask/guides/architecture.md",version:"current",frontMatter:{},sidebar:"docs",previous:{title:"why-ask",permalink:"/substrate-contracts-book/en/ask/intro/why-ask"},next:{title:"Ask! vs ink!",permalink:"/substrate-contracts-book/en/ask/guides/ask-ink"}},l=[{value:"Architecutre",id:"architecutre",children:[]},{value:"Mechanism",id:"mechanism",children:[{value:"ink! - rust Macros",id:"ink---rust-macros",children:[]},{value:"ask! - Assemblyscript Transform",id:"ask---assemblyscript-transform",children:[]},{value:"ask! - Decorators",id:"ask---decorators",children:[]}]},{value:"How compilation works in ask!",id:"how-compilation-works-in-ask",children:[]}],p={toc:l};function m(e){var t=e.components,i=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,n.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"architecutre"},"Architecutre"),(0,a.kt)("h2",{id:"mechanism"},"Mechanism"),(0,a.kt)("h3",{id:"ink---rust-macros"},"ink! - rust Macros"),(0,a.kt)("p",null,"The way how ask! is implmented is very similar to ink!. Ink utilizes rust Macros to server as an eDSL to write smart contracts. "),(0,a.kt)("h3",{id:"ask---assemblyscript-transform"},"ask! - Assemblyscript Transform"),(0,a.kt)("p",null,"On the other hand, since Assemblyscrit is compiled statically, so code transformation cannot be done at runtime but must instead be performed at complied time. To enable this, the compiler frontend (asc) provides a mechanism to hook into the compilation process before, while and after the module is being compiled.  By implementing a custom transform plugin for Assemblyscript, we make ask! to serve as an eDSL of assemblyscript."),(0,a.kt)("h3",{id:"ask---decorators"},"ask! - Decorators"),(0,a.kt)("p",null,"Since Typescript/AssemblyScript supports decorators, ask! chooses using decorators to achieve the same purpose as rust Macros. Ask! uses decorators to extend the Abstraction Syntax Tree to implement the internal logics with additional code. Using decorators can hide the complex logic of contract execution and interaction with ",(0,a.kt)("inlineCode",{parentName:"p"},"contract-pallet")," to allow developers only focus on contract development alone. "),(0,a.kt)("h2",{id:"how-compilation-works-in-ask"},"How compilation works in ask!"),(0,a.kt)("p",null,"ask! implements ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/patractlabs/ask/tree/master/ts-packages/transform"},"transform")," to interview with Assemblyscript compilation process as follows:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"ask-design",src:r(54).Z})))}m.isMDXComponent=!0},54:function(e,t,r){t.Z=r.p+"assets/images/ask-design-a909c178cc6cf65c330aef9061a69cc9.png"}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{665:function(t,s,a){"use strict";a.r(s);var n=a(6),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("运行Redspot时，它将从当前工作目录开始搜索最接近的redspot.config.js文件。该文件通常位于项目的根目录中。")]),t._v(" "),a("p",[t._v("此文件中包含整个Redspot设置（例如配置，插件和自定义任务等）。")]),t._v(" "),a("h2",{attrs:{id:"配置选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置选项"}},[t._v("#")]),t._v(" 配置选项")]),t._v(" "),a("p",[t._v("要设置配置，需要从 redspot.config.ts 导出对象（object）：")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" RedspotUserConfig "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redspot/types'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  defaultNetwork"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  contract"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ink"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      toolchain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nightly'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      sources"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contracts/**/*'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    solang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      sources"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contracts/**/*.sol'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  networks"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    development"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      endpoint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://127.0.0.1:9944'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      types"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      gasLimit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'400000000000'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    substrate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      endpoint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://127.0.0.1:9944'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      gasLimit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'400000000000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      accounts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//Alice'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tomato mad peasant blush poem obtain inspire distance attitude mercy return marriage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x26aa394eea5630e07c48ae0c9558cef70a98fdbe9ce6c55837576c60c7af3850"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      types"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    artifacts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"artifacts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tests"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tests"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mocha"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60000")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" RedspotUserConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("可以在 js 文件中，通过"),a("code",[t._v("config")]),t._v("获取到配置信息：")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redspot"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"defaultnetwork"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defaultnetwork"}},[t._v("#")]),t._v(" defaultNetwork")]),t._v(" "),a("p",[t._v("您可以通过配置中的 "),a("code",[t._v("defaultNetwork")]),t._v(" 字段来自定义在运行Redspot时默认使用的网络。如果省略此配置，则其默认值为 "),a("code",[t._v("localhost")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"networks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#networks"}},[t._v("#")]),t._v(" networks")]),t._v(" "),a("p",[a("code",[t._v("networks")]),t._v(" 配置字段是一个可选对象，网络名称映射到其配置。")]),t._v(" "),a("p",[t._v("默认的 "),a("code",[t._v("localhost")]),t._v(" 的配置是:")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  localhost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    gasLimit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"400000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    accounts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//Alice"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//Bob"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//Charlie"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//Dave"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//Eve"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//Ferdie"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    endpoint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ws://127.0.0.1:9944"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    types"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("也可以配置其他网络名称，例如配置"),a("code",[t._v("mainnet")]),t._v("，某个网络的名字"),a("code",[t._v("some_network_name")]),t._v("等。")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mainnet"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    some_network_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("以下介绍针对"),a("code",[t._v("network")]),t._v(" 部分的配置选项：")]),t._v(" "),a("h3",{attrs:{id:"network-gaslimit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-gaslimit"}},[t._v("#")]),t._v(" "),a("code",[t._v("[network].gasLimit")])]),t._v(" "),a("p",[t._v("这个配置用于设置实例化或者通过交易调用合约的时候需要提供的"),a("code",[t._v("gaslimit")]),t._v("的默认值。这个值必须是整数，没有精度。")]),t._v(" "),a("p",[t._v("如果这个值过小，将会得到一个 "),a("code",[t._v("contracts.OutOfGas")]),t._v(" 错误。最大的 gaslimit 是这条Substrate的链在Runtime中用于"),a("code",[t._v("DispatchClass::Normal")]),t._v("的最大值。（例如，在Substrate的node节点的配置中是 "),a("code",[t._v("NORMAL_DISPATCH_RATIO * MAXIMUM_BLOCK_WEIGHT = 75% * 2000000000000")]),t._v("）。")]),t._v(" "),a("p",[t._v("所以一般建议设置高一点。")]),t._v(" "),a("h3",{attrs:{id:"network-accounts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-accounts"}},[t._v("#")]),t._v(" "),a("code",[t._v("[network].accounts")])]),t._v(" "),a("p",[a("code",[t._v("accounts")]),t._v("应该是由 "),a("a",{attrs:{href:"https://polkadot.js.org/docs/keyring/start/suri/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("suri")]),a("OutboundLink")],1),t._v(" 或者 "),a("a",{attrs:{href:"https://polkadot.js.org/docs/keyring/start/create/#adding-a-pair",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("KeyringPair")]),a("OutboundLink")],1),t._v(" 组成的一个列表。")]),t._v(" "),a("p",[t._v('accounts 默认为 ["//Alice", "//Bob", "//Charlie", "//Dave", "//Eve", "//Ferdie"]。')]),t._v(" "),a("p",[t._v("具体请查见 runtime-environment")]),t._v(" "),a("h3",{attrs:{id:"network-endpoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-endpoint"}},[t._v("#")]),t._v(" "),a("code",[t._v("[network].endpoint")])]),t._v(" "),a("p",[a("code",[t._v("endpoint")]),t._v("指明了在当前网络配置中开发者想要连接的节点。")]),t._v(" "),a("p",[t._v("当前，只支持 WebSockets 类型的 RPC 连接（即只支持 "),a("code",[t._v("wss://")]),t._v(" 或者 "),a("code",[t._v("ws://")]),t._v("开头的链接协议）。")]),t._v(" "),a("h3",{attrs:{id:"network-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-types"}},[t._v("#")]),t._v(" "),a("code",[t._v("[network].types")])]),t._v(" "),a("p",[t._v("type 是"),a("code",[t._v("polkadotjs")]),t._v("中定义的概念。如果对此有任何疑问，您可以在此处"),a("a",{attrs:{href:"https://polkadot.js.org/docs/api/start/types.extend/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("types.extend")]),a("OutboundLink")],1),t._v("看到。 您还可以设置"),a("code",[t._v("[network].typesbundle")]),t._v("，"),a("code",[t._v("[network].typesSpec")]),t._v("等。 通常，如果遇到类似于“No such variant in enum MultiSignature”的错误，也许应该考虑在 type 中添加 "),a("code",[t._v('{ Address: "AccountId", LookupSource: "AccountId"}')]),t._v("， 请参阅 "),a("a",{attrs:{href:"https://polkadot.js.org/docs/api/start/types.extend/#impact-on-extrinsics",target:"_blank",rel:"noopener noreferrer"}},[t._v("impact-on-extrinsics"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"contract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract"}},[t._v("#")]),t._v(" contract")]),t._v(" "),a("p",[t._v("在 contract 中，你可以设置编译器的选项，目前支持 "),a("a",{attrs:{href:"https://github.com/paritytech/ink",target:"_blank",rel:"noopener noreferrer"}},[t._v("ink"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://github.com/hyperledger-labs/solang",target:"_blank",rel:"noopener noreferrer"}},[t._v("solang"),a("OutboundLink")],1),t._v("。你也可以将 ink合约 和 solang合约放在同一项目下一起编译。")]),t._v(" "),a("p",[t._v("查看多合约的编译示例 https://github.com/patractlabs/redspot/tree/master/examples/multi-contract 。")]),t._v(" "),a("h3",{attrs:{id:"contract-ink-toolchain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract-ink-toolchain"}},[t._v("#")]),t._v(" [contract].ink.toolchain")]),t._v(" "),a("p",[t._v("设置 "),a("a",{attrs:{href:"https://github.com/paritytech/cargo-contract",target:"_blank",rel:"noopener noreferrer"}},[t._v("cargo-contract"),a("OutboundLink")],1),t._v(" 编译合约时，所使用的 toolchain。通常都是 "),a("code",[t._v("nightly")]),t._v("。你也可以指定为 "),a("code",[t._v("nightly-YYYY-MM-DD")])]),t._v(" "),a("h3",{attrs:{id:"contract-ink-sources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract-ink-sources"}},[t._v("#")]),t._v(" [contract].ink.sources")]),t._v(" "),a("p",[t._v("设置编译时查找的 ink 合约的目录。glob 语法。")]),t._v(" "),a("h3",{attrs:{id:"contract-solang-sources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contract-solang-sources"}},[t._v("#")]),t._v(" [contract].solang.sources")]),t._v(" "),a("p",[t._v("设置编译时查找的 solang 合约的目录。glob 语法。")]),t._v(" "),a("h2",{attrs:{id:"paths"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#paths"}},[t._v("#")]),t._v(" Paths")]),t._v(" "),a("p",[t._v("paths 可以设置  artifacts 和 tests 文件的目录名。通常情况下，你无需对此进行更改。")]),t._v(" "),a("h2",{attrs:{id:"mocha"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mocha"}},[t._v("#")]),t._v(" mocha")]),t._v(" "),a("p",[t._v("Redspot 使用 mocha 作为测试框架，这里的所有选项，都将传递给 mocha 。查看 https://mochajs.org/api/mocha ，获取更多的详情。")])])}),[],!1,null,null,null);s.default=r.exports}}]);
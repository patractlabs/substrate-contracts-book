<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Report for Ask! v0.1</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/substrate-contracts-book/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta content="https://www.patract.io/social-preview.png" property="og:image">
    
    <link rel="preload" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css" as="style"><link rel="preload" href="/substrate-contracts-book/assets/js/app.488f6983.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/3.66b4543a.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/1.293685b3.js" as="script"><link rel="preload" href="/substrate-contracts-book/assets/js/12.3d9c1fd1.js" as="script"><link rel="prefetch" href="/substrate-contracts-book/assets/js/10.d378fa38.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/100.e2b9146f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/101.1e3769c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/102.5393ed6e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/103.1d0f07db.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/104.ec59702b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/105.e1c82ef2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/106.79bdf6a0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/107.ae03e01e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/108.58c92bf0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/109.7c40f2a5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/11.3c93daad.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/110.7b17606a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/111.5c23b5f4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/112.a5be63e8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/113.bddd2e27.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/114.67c0f118.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/115.a07b7a10.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/116.5edc4b00.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/117.8fcf34a3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/118.8a5f0b5a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/119.6a506a48.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/120.f067b892.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/121.787d1b80.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/122.a5a611bd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/123.cd8ea40d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/124.cd411d52.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/125.1d0b0cfc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/126.a605a2ab.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/127.72e07267.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/128.881179cc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/129.db3496d3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/13.1049a388.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/130.5a0d07c2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/131.415346ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/132.30dcd25e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/133.5565f793.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/134.3b2fa095.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/135.6c383eec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/136.0273f3ec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/137.7b538351.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/138.014828fa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/139.7c1c82dc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/14.fb4228cb.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/140.f2012d15.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/141.3208960a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/142.717fd043.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/143.0e67e97b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/144.76f6664d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/145.d691d07d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/146.d5dadfa0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/147.f03416ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/148.d49f10bc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/149.f02caa99.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/15.153ddbe9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/150.2ace7c69.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/151.a78c6a00.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/152.a00c03db.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/153.f245ad47.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/154.fa740ba7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/155.96c1af67.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/156.f888f3ba.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/157.4a915330.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/158.9c9506e4.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/159.cb5fb652.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/16.42dde0a2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/160.9c65a9bf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/161.fa603059.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/162.d2903d7b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/163.7e10660a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/164.1dbbab29.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/165.9452a4c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/166.90831ef2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/167.bf65c426.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/168.a2f3a272.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/169.b3e6be19.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/17.f0431e88.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/170.3669dfb8.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/171.402e3eea.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/172.5fb7ab3f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/173.55ac3f8a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/174.06e9a81c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/175.d3bb64e3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/176.4e4a1390.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/177.a0b50bb3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/178.61882827.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/179.63e760f7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/18.7ad8aa6c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/180.f1728e90.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/181.8f85f27d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/182.dc3cfd1c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/183.a75458dc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/184.be9ccf49.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/185.18c090ee.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/186.5530526d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/187.3f7226d0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/188.cee0db96.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/189.2cefb2ae.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/19.4332d471.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/20.c4400ab0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/21.259ebc1d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/22.60e28638.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/23.cc21aafc.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/24.38148646.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/25.f0ec1f1e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/26.3c1b7f4d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/27.4b2f849c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/28.99ae462a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/29.af898c62.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/30.8cb061ec.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/31.16587799.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/32.43b3f420.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/33.efaadc95.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/34.beeabb40.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/35.c692f404.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/36.6fb3f75e.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/37.403862c5.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/38.3a10d692.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/39.fae3351a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/4.0f42cc7f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/40.f817baef.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/41.8f6290b2.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/42.3c61a965.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/43.12298a85.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/44.ae76a3aa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/45.debc6ea9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/46.70777adf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/47.6ce13be0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/48.968f9d01.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/49.9a5b7931.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/5.cd1c6494.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/50.2f15e09a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/51.a34af9cf.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/52.962b9dac.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/53.f67f9ca3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/54.6e0f212b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/55.6a51c802.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/56.e44543e0.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/57.3779a99c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/58.1acc9a26.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/59.010f3c6a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/6.83312519.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/60.b86a4a23.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/61.6ef664f7.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/62.9c277e9d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/63.8f3705b9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/64.f00d9c8d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/65.7231f456.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/66.ed6d3ffa.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/67.7f3b97cd.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/68.0f016857.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/69.0c875676.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/7.c6c67365.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/70.0fcee255.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/71.b4b25221.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/72.0d6a26ab.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/73.6976838c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/74.3727eaff.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/75.2c2db848.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/76.33dc1fde.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/77.7a54af28.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/78.1b813995.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/79.fe0b5e46.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/8.b0e58df3.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/80.473a66b1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/81.b56d6f08.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/82.c81e3344.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/83.1a5956b1.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/84.76b78f9d.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/85.3ce8457a.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/86.8e2f8c49.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/87.2d34eba9.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/88.1d736b60.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/89.6776e035.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/9.344f2c05.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/90.18526865.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/91.8a69d4ce.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/92.8cac047b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/93.39a99e1f.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/94.cbbc2372.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/95.8a170e44.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/96.709dff5b.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/97.68fc85ca.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/98.368cb03c.js"><link rel="prefetch" href="/substrate-contracts-book/assets/js/99.b6ec13b2.js">
    <link rel="stylesheet" href="/substrate-contracts-book/assets/css/0.styles.7869a774.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <p class="description" data-v-4e82dffc data-v-4e82dffc></p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/substrate-contracts-book/en/" class="home-link router-link-active"><img src="/substrate-contracts-book/logo.svg" alt="" class="logo"> <!----></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  Official Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/en/" class="nav-link"><i class="undefined"></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/ask/reports/v0.1Report.html" class="nav-link"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><!----> <h3 class="name" data-v-828910c6>
    patractlabs
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>180</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="https://patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-home"></i>
  Official Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/substrate-contracts-book/en/" class="nav-link"><i class="undefined"></i>
  Doc
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/ask/reports/v0.1Report.html" class="nav-link"><i class="undefined"></i>
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="undefined"></i>
  English
</a></li></ul></div></div> <a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><a href="/substrate-contracts-book/en/" aria-current="page" class="sidebar-link">Summary</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/introduction" class="sidebar-heading clickable"><span>Introduction</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/contracts/overview.html" class="sidebar-link">Contract overview</a></li><li><a href="/substrate-contracts-book/en/contracts/model.html" class="sidebar-link">Contract model</a></li><li><a href="/substrate-contracts-book/en/contracts/language.html" class="sidebar-link">Contract language</a></li><li><a href="/substrate-contracts-book/en/contracts/wasm_first_step.html" class="sidebar-link">Brief introduction of Wasm</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/ink/introduction" class="sidebar-heading clickable"><span>ink!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ink/tutorial.html" class="sidebar-link">ink! tutorial</a></li><li><a href="/substrate-contracts-book/en/ink/framework.html" class="sidebar-link">ink! Framework</a></li><li><a href="/substrate-contracts-book/en/ink/edsl-basic.html" class="sidebar-link">ink! eDSL basic elements</a></li><li><a href="/substrate-contracts-book/en/ink/call-contracts.html" class="sidebar-link">Cross-call for ink!</a></li><li><a href="/substrate-contracts-book/en/ink/ink-solidity.html" class="sidebar-link">Compare ink! and solidity</a></li><li><a href="/substrate-contracts-book/en/ink/cargo-contract.html" class="sidebar-link">cargo-contract</a></li><li><a href="/substrate-contracts-book/en/ink/trap.html" class="sidebar-link">Current problem for ink!</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/ask/introduction" class="sidebar-heading clickable"><span>ask!</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ask/tutorial.html" class="sidebar-link">Getting Started</a></li><li><a href="/substrate-contracts-book/en/ask/design.html" class="sidebar-link">Design</a></li><li><a href="/substrate-contracts-book/en/ask/basics.html" class="sidebar-link">Basics</a></li><li><a href="/substrate-contracts-book/en/ask/decorators.html" class="sidebar-link">Ask! decorator</a></li><li><a href="/substrate-contracts-book/en/ask/storage-data-structure.html" class="sidebar-link">Storage</a></li><li><a href="/substrate-contracts-book/en/ask/ask-cli.html" class="sidebar-link">Ask-cli</a></li><li><a href="/substrate-contracts-book/en/ask/ask-vs-ink.html" class="sidebar-link">Ask! and ink! Comparison of characteristics</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/ask/reports" class="sidebar-heading clickable router-link-active open"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html" aria-current="page" class="active sidebar-link">Report for Ask! v0.1</a></li><li><a href="/substrate-contracts-book/en/ask/reports/v0.2Report.html" class="sidebar-link">Report for Ask! v0.2</a></li></ul></section></li></ul></section></li><li><a href="/substrate-contracts-book/en/solang/introduction.html" class="sidebar-link">Solang</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/redspot/introduction" class="sidebar-heading clickable"><span>Redspot</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/tutorial.html" class="sidebar-link">Redspot tutorial</a></li><li><a href="/substrate-contracts-book/en/redspot/overview.html" class="sidebar-link">Introduction</a></li><li><a href="/substrate-contracts-book/en/redspot/configuration.html" class="sidebar-link">Configuration information</a></li><li><a href="/substrate-contracts-book/en/redspot/tasks.html" class="sidebar-link">Tasks</a></li><li><a href="/substrate-contracts-book/en/redspot/runtime-environment.html" class="sidebar-link">Runtime Environment</a></li><li><a href="/substrate-contracts-book/en/redspot/console.html" class="sidebar-link">Console</a></li><li><a href="/substrate-contracts-book/en/redspot/q-and-a.html" class="sidebar-link">Common problem</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/redspot/plugin" class="sidebar-heading clickable"><span>Plugin</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-decimals.html" class="sidebar-link">@redspot_decimals plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-known-types.html" class="sidebar-link">@redspot_known-types plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-chai.html" class="sidebar-link">@redspot_chai  plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-gas-reporter.html" class="sidebar-link">@redspot_gas-reporter plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-patract.html" class="sidebar-link">@redspot_patract plug-in</a></li><li><a href="/substrate-contracts-book/en/redspot/plugin/redspot-explorer.html" class="sidebar-link">@redspot_explorer plug-in</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/redspot/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/redspot/reports/v0.1Report.html" class="sidebar-link">Report for Redspot v0.1</a></li><li><a href="/substrate-contracts-book/en/redspot/reports/v0.2Report.html" class="sidebar-link">Report for Redspot v0.2</a></li><li><a href="/substrate-contracts-book/en/redspot/reports/v0.3Report.html" class="sidebar-link">Report for Redspot v0.3</a></li><li><a href="/substrate-contracts-book/en/redspot/reports/v0.4Report.html" class="sidebar-link">Report for Redspot v0.4</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/europa/introduction" class="sidebar-heading clickable"><span>Europa</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/europa/tutorial.html" class="sidebar-link">Europa tutorial</a></li><li><a href="/substrate-contracts-book/en/europa/execution_info.html" class="sidebar-link">Europa contract execution log analysis</a></li><li><a href="/substrate-contracts-book/en/europa/sample.html" class="sidebar-link">Europa debugging example</a></li><li><a href="/substrate-contracts-book/en/europa/wasm_executor.html" class="sidebar-link">Europa Wasm executor</a></li><li><a href="/substrate-contracts-book/en/europa/wasm_backtrace.html" class="sidebar-link">Europa's Wasm Backtrace</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/europa/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/europa/reports/v0.1Report.html" class="sidebar-link">Report for Europa v0.1</a></li><li><a href="/substrate-contracts-book/en/europa/reports/v0.2Report.html" class="sidebar-link">Report for Europa v0.2</a></li><li><a href="/substrate-contracts-book/en/europa/reports/v0.3Report.html" class="sidebar-link">Report for Europa v0.3</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/zkmega/introduction" class="sidebar-heading clickable"><span>zkMega</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/zkmega/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/en/zkmega/contract.html" class="sidebar-link">Contract</a></li><li><a href="/substrate-contracts-book/en/zkmega/example.html" class="sidebar-link">Example</a></li><li><a href="/substrate-contracts-book/en/zkmega/benchmark.html" class="sidebar-link">Benchmark</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/zkmega/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/zkmega/reports/v0.1Report.html" class="sidebar-link">Report for zkMega v0.1（original Megaclite v0.1 )</a></li><li><a href="/substrate-contracts-book/en/zkmega/reports/v0.2Report.html" class="sidebar-link">Report for zkMega v0.2（original Megaclite v0.2 )</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/himalia/introduction" class="sidebar-heading clickable"><span>Himalia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/himalia/tutorial.html" class="sidebar-link">tutorial</a></li><li><a href="/substrate-contracts-book/en/himalia/go-patract.html" class="sidebar-link">go-patract</a></li><li><a href="/substrate-contracts-book/en/himalia/py-patract.html" class="sidebar-link">py-patract</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/himalia/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/himalia/reports/v0.1Report.html" class="sidebar-link">Report for  Himalia v0.1 &amp; v0.2</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/metis/introduction" class="sidebar-heading clickable"><span>Metis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/metis/tokens.html" class="sidebar-link">ERC20</a></li><li><a href="/substrate-contracts-book/en/metis/access-control.html" class="sidebar-link">Access Control</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/metis/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/metis/reports/M1Report.html" class="sidebar-link">Patract's proposal about Metis (ink! and Ask! Standard Library)</a></li></ul></section></li></ul></section></li><li><a href="/substrate-contracts-book/en/carpo/introduction.html" class="sidebar-link">Carpo</a></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/elara/introduction" class="sidebar-heading clickable"><span>Elara</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/elara/tutorial.html" class="sidebar-link">Tutorial</a></li><li><a href="/substrate-contracts-book/en/elara/design.html" class="sidebar-link">Design Brief</a></li><li><a href="/substrate-contracts-book/en/elara/API.html" class="sidebar-link">API access</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/substrate-contracts-book/en/elara/reports" class="sidebar-heading clickable"><span>Report</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/elara/reports/v0.1Report.html" class="sidebar-link">Report for Elara v0.1</a></li><li><a href="/substrate-contracts-book/en/elara/reports/v0.2Report.html" class="sidebar-link">Report for Elara v0.2</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/substrate-contracts-book/en/patra-store/introduction" class="sidebar-heading clickable"><span>PatraStore</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/substrate-contracts-book/en/patra-store/overview.html" class="sidebar-link">Overview</a></li><li><a href="/substrate-contracts-book/en/patra-store/getting-starter.html" class="sidebar-link">Getting started</a></li><li><a href="/substrate-contracts-book/en/patra-store/publish-dapps.html" class="sidebar-link">Publish DApp</a></li></ul></section></li><li><a href="/substrate-contracts-book/en/patract/introduction.html" class="sidebar-link">Patract</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>patractlabs</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Report for Ask! v0.1</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>patractlabs</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="report-for-ask-v0-1"><a href="#report-for-ask-v0-1" class="header-anchor">#</a> Report for Ask! v0.1</h1> <p>Ten weeks ago, <a href="https://patract.io" target="_blank" rel="noopener noreferrer">Patract Hub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> submitted the <a href="https://kusama.polkassembly.io/treasury/66" target="_blank" rel="noopener noreferrer">Treasury Proposal #66<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for Ask! v0.1. The goal of this proposal is to provide a contract programming framework based on AssemblyScript (aka AS). In this proposal, we promise to complete the following functions in the v0.1:</p> <blockquote><p><strong>v0.1 Target: being able to use AS to write contracts that can run on FRAME Contract Pallet</strong></p> <ul><li>Define the meaning of <code>@contract</code>, <code>@storage</code>, <code>@constructor</code>, <code>@message</code> annotations and code generation logic used in the contract.</li> <li>Encapsulate the runtime API and provide components for writing contracts: <code>AccountId</code>, <code>Block</code>, <code>Crypto</code>, <code>Gas</code>, etc.</li> <li><code>PreProcessor</code> can parse the four annotations <code>@contract</code>, <code>@storage</code>, <code>@message</code>, <code>@constructor</code>, and generate the corresponding code.</li> <li>PreProcessor can generate the content of <code>metadata.json</code> with the above four annotations.</li> <li>The Ask! contract can run on FRAME Contract Pallet.</li></ul></blockquote> <blockquote><p><strong>v0.1 Verification: GitHub source code &amp; contract example</strong></p> <ul><li>The basic data types can be stored and called in the contract: <code>u8</code>/<code>i8</code>, <code>u16</code>/<code>i16</code>, <code>u32</code>/<code>i32</code>, <code>u64</code>/<code>i64</code>, <code>u128</code>/<code>i128</code>, <code>string</code>, <code>bool</code>, without collection types.</li> <li>Ability to define callable <code>messages</code>.</li> <li>Able to generate a full format <code>metadata.json</code> file.</li> <li>Able to generate correct Wasm code.</li></ul></blockquote> <p>So far, we have implemented all the content of the proposal except the array&amp;map data type access function. Because array&amp;map involves the rules for generating metadata.json in the scale-info project, but this generation has no public specification documents for reference in ink!, so the support for array&amp;map needs to be implemented later. We had contacted Robin from ink!, and this issue is on his agenda.</p> <p>The source code we have implemented is in the <a href="https://github.com/patractlabs/ask" target="_blank" rel="noopener noreferrer">Ask!<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> repo, and the example contract is in [examples](https://github.com/patractlabs/ask/tree/master/ examples) directory.</p> <h2 id="design-and-implementation-of-v0-1"><a href="#design-and-implementation-of-v0-1" class="header-anchor">#</a> Design and Implementation of v0.1</h2> <p>Ask!'s design starting point is to use annotations to simplify the contract writing process and separate the business logic of the contract from the contract runtime; at the same time, annotations and their sub-annotations are also used to generate the metadata.json file of the contract.</p> <p>At the contract runtime layer, Ask! provides objects such as <code>AccountId</code>, <code>Block</code>, <code>Crypto</code>, <code>Gas</code>. These objects encapsulate the underlying logic and API calls, and provide upper-level semantics and methods for writing contracts and preprocessors.</p> <p>At the Preprocessor level, it needs to compile the written contract into the target contract WebAssembly bytecode.</p> <p>From the perspective of the compiler, the work of Preprocessor is divided into the following steps (the code used in the example is selected from the following <code>How to use Ask! v0.1</code>):</p> <ol><li>Use <code>asc</code> to compile the contract into a Program object to obtain code syntax information.</li></ol> <ul><li>The code is a program written in accordance with the contract structure, so the syntax information of the program can be obtained through compilation.</li></ul> <ol start="2"><li>After the Program is compiled, the semantic information of the program can be obtained. By analyzing the annotations in the semantic information, the points in the contract that require code injection and the structural information of the contract can be obtained.</li></ol> <ul><li>The <code>@contract</code> annotation indicates that the class is a contract entry.</li> <li>The <code>@storage</code> annotation indicates that the class object is a contract storage object.</li> <li>The <code>@message</code> annotation indicates that this method is a contract method that can be called externally.</li> <li>The <code>@constructor</code> annotation indicates that this is a contract construction method, which can instantiate the contract by setting different parameters.</li></ul> <ol start="3"><li>For different annotations, obtain the relevant structural information that needs to generate the target contract code.</li></ol> <ul><li>When a class contains the annotation <code>@contract</code>, such as:</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  @contract
  <span class="token keyword">class</span> <span class="token class-name">SolarSystem</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Then the method of getting annotation as <code>@constructor</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  @<span class="token keyword">constructor</span>
  <span class="token keyword">default</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Earth&quot;</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> u32 <span class="token operator">=</span> <span class="token number">6300</span><span class="token punctuation">,</span> isdwarf<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>isdwarf <span class="token operator">=</span> isdwarf<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Through semantic information, the <code>FunctionPrototype</code> information of the default function can be obtained, and the description information <code>declaration</code> of the Function can be obtained by parsing the <code>FunctionPrototype</code> object. Then get the function information of <code>FunctionDef</code> such as methodName, method parameter list and return value.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FunctionDef</span> <span class="token punctuation">{</span>  
      <span class="token keyword">private</span> funcProto<span class="token operator">:</span> FunctionPrototype<span class="token punctuation">;</span>
      methodName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
           parameters<span class="token operator">:</span> ParameterNodeDef<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       isReturnable<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
       returnType<span class="token operator">:</span> NamedTypeNodeDef <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>According to the exported <code>FunctionDef</code> information, the main.tpl (see below) is rendered through <code>Handlebar</code> to generate the deploy function. In the way of templates, you can easily adjust, deploy function structure and implementation.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> i32 <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>contract<span class="token punctuation">.</span>instanceName<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>contract<span class="token punctuation">.</span>className<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">{</span><span class="token punctuation">{</span>#each contract<span class="token punctuation">.</span>cntrFuncDefs<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>methodName<span class="token punctuation">}</span><span class="token punctuation">}</span>Selector<span class="token operator">:</span> u8<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>#selector methodName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span>u8Arr<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>selector<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">isSelector</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>methodName<span class="token punctuation">}</span><span class="token punctuation">}</span>Selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>#neq parameters<span class="token punctuation">.</span>length <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token keyword">const</span> fnParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FnParameters</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>neq<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span><span class="token punctuation">{</span>#each parameters<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token keyword">let</span> p<span class="token punctuation">{</span><span class="token punctuation">{</span>_index<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> fnParameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>codecType<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>contract<span class="token punctuation">.</span>instanceName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>methodName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>#joinParams parameters<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>joinParams<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span>ctrDefaultVals<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>The deploy method obtained after rendering:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deploy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> i32 <span class="token punctuation">{</span>
    <span class="token keyword">let</span> solarSystem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SolarSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">const</span> defaultSelector<span class="token operator">:</span> u8<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0xed</span><span class="token punctuation">,</span><span class="token number">0x4b</span><span class="token punctuation">,</span><span class="token number">0x9d</span><span class="token punctuation">,</span><span class="token number">0x1b</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">isSelector</span><span class="token punctuation">(</span>defaultSelector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> fnParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FnParameters</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> p0 <span class="token operator">=</span> fnParameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span>ScaleString<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> p1 <span class="token operator">=</span> fnParameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span>UInt32<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> p2 <span class="token operator">=</span> fnParameters<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token operator">&lt;</span>Bool<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      solarSystem<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">(</span>p0<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p1<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>p2<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>In the same way, to obtain the method annotated as <code>@message</code>, obtain the method name, method parameter list and return value and other information by analyzing the <code>FunctionPrototype</code>, and generate the call distribution logic of the <code>call</code> entry function.</p> <ul><li>When a class is marked with <code>@storage</code>. Need to get the field information in the class. By analyzing the <code>FieldPrototype</code> to obtain the field parameter name, field type and other information <code>FieldDef</code>, where storeKey is used to store the object key. The key will be generated by the blake2 hash.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FieldDef</span> <span class="token punctuation">{</span>
     <span class="token keyword">protected</span> fieldPrototype<span class="token operator">:</span> FieldPrototype<span class="token punctuation">;</span>
      layout<span class="token operator">:</span> LayoutDef <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LayoutDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">type</span><span class="token operator">:</span> NamedTypeNodeDef <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      storeKey<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      varName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      path<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>The field needs to be packaged in this place. The original is TypeScript basic types, i8/u8, etc. need to be packaged into IInt8, Uint8 etc in codec, making it convenient to serialize and deserialize when storing and reading. Then generate getter/setter methods that meet the read and write requirements for each field. The same is generated by the <code>Handlebar</code> rendering template. The template is as follows:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>    <span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span><span class="token punctuation">{</span>#each fields<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token keyword">private</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>codecType<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>#each fields<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>originalType<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>codecType<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;{{storeKey}}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>#eq <span class="token keyword">type</span><span class="token punctuation">.</span>codecType <span class="token string">'ScaleString'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>eq<span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>#neq <span class="token keyword">type</span><span class="token punctuation">.</span>codecType <span class="token string">'ScaleString'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>neq<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>originalType<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>codecType<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">type</span><span class="token punctuation">.</span>codecType<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;{{storeKey}}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          st<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>varName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre></div><p>The generated code：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>    <span class="token keyword">class</span> <span class="token class-name">Planets</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> _name<span class="token operator">:</span> ScaleString <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> _radius<span class="token operator">:</span> UInt32 <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">private</span> _isdwarf<span class="token operator">:</span> Bool <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span>ScaleString<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Planetsname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScaleString</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span>ScaleString<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Planetsname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          st<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">get</span> <span class="token function">radius</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> u32 <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_radius <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span>UInt32<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Planetsradius&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_radius <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_radius<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span> <span class="token function">radius</span><span class="token punctuation">(</span>v<span class="token operator">:</span> u32<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>_radius <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UInt32</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span>UInt32<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Planetsradius&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          st<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_radius<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">get</span> <span class="token function">isdwarf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_isdwarf <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span>Bool<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Planetsisdwarf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_isdwarf <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_isdwarf<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">set</span> <span class="token function">isdwarf</span><span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>_isdwarf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bool</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage<span class="token operator">&lt;</span>Bool<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&quot;Planetsisdwarf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          st<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_isdwarf<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre></div><ul><li>Expand all the annotations to generate the final contract file for compilation.</li></ul> <ol start="4"><li><p>According to the contract structure information, the metadata.json file is generated through the template engine</p> <ul><li>According to different contract structure information, generate the code of each section in metadata.json. Generate the information of the <code>storage</code> field in metadata.json through the <code>@storage</code> object information; generate the information of the <code>messages</code> field through <code>@message</code>; Generate the information of the <code>constructor</code> field through <code>@constructor</code>. The code generation logic is completed by the <code>Handlebar</code> template engine. When the target code structure needs to be adjusted, you only need to adjust the template.</li></ul></li> <li><p>Compile the expanded contract file to generate the contract wasm bytecode.</p> <ul><li>Use <code>asc</code> to compile the expanded target code. Compile command: <code>asc --importMemory --initialMemory 2 --maximumMemory 16 --noExportMemory --runtime half --use abort= extension.ts -O2 -b target .wasm</code>, get the bytecode that can be run on the wasm virtual machine.</li></ul></li></ol> <p>From the perspective of the contract developer, starting from calling the <code>ask</code> command, the workflow of the Preprocessor is as follows:</p> <div class="language-text extra-class"><pre class="language-text"><code>                               +-------------+
                           +--&gt;+metadata.json|
                           |   +-------------+
                           |
   +-----------------+     |
   | ./ask sample.ts +-----|
   +-----------------+
                           |   +------------+       +------------+
                           +--&gt;+extension.ts+-------&gt;target.wasm |
                               +------------+       +------------+
</code></pre></div><p>Below we will use an example to illustrate how to write a contract using Ask! v0.1.</p> <h2 id="how-to-use-ask-v0-1"><a href="#how-to-use-ask-v0-1" class="header-anchor">#</a> How to use Ask! v0.1</h2> <p>The Ask! project is not yet released, so we need to clone the source code locally.<code>git clone https://github.com/patractlabs/ask</code></p> <p>In the project, we have established two projects <code>flipper</code> and <code>increment</code> in the examples directory for your reference. Below we will use a new project <code>solar</code> to illustrate how to use Ask!, the complete source code is located <code>example/solar/</code> directory.</p> <ol><li>Write the contract</li></ol> <ul><li><p>Define what storage needs to store: The <code>@storage</code> annotation is used in the class to indicate that the data members defined in this class are state variables, and the read and write operations of these data members need to be persistently stored.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@storage
<span class="token keyword">class</span> <span class="token class-name">Planets</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    radius<span class="token operator">:</span> u32<span class="token punctuation">;</span>
    isdwarf<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The above code defines a storage, which has three variables: <code>name</code>, <code>radius</code>, and <code>isdwarf</code>.</p></li> <li><p>Write contract content</p> <ul><li>The <code>@contract</code> annotation is used in the class, which means that this class is the entry point of the contract. Ask! only supports a single contract entry point.</li> <li>The <code>@constructor</code> annotation is used in the method, which means that this method is only triggered when the contract transaction <code>instantiate</code> or <code>instantiate_with_code</code> is called, and can be called to set some initialization parameters.</li> <li>The <code>@message</code> annotation is used in the method, which means that this method is called when calling the contract transaction <code>call</code>.</li></ul> <div class="language-typescript extra-class"><pre class="language-typescript"><code>@contract
<span class="token keyword">class</span> <span class="token class-name">SolarSystem</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> stored<span class="token operator">:</span> Planets<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stored <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Planets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @<span class="token keyword">constructor</span>
    <span class="token keyword">default</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Earth&quot;</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> u32 <span class="token operator">=</span> <span class="token number">6300</span><span class="token punctuation">,</span> isdwarf<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>isdwarf <span class="token operator">=</span> isdwarf<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @message
    <span class="token keyword">set</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> u32<span class="token punctuation">,</span> isdwarf<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>name <span class="token operator">!=</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>radius <span class="token operator">=</span> radius<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>isdwarf <span class="token operator">=</span> isdwarf<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    @<span class="token function">message</span><span class="token punctuation">(</span>mutates <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> selector <span class="token operator">=</span> <span class="token string">&quot;0x0a0b0c0d&quot;</span><span class="token punctuation">)</span>
    <span class="token function">getRadius</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> u32 <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stored<span class="token punctuation">.</span>radius<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <ol start="2"><li>Compile the contract</li></ol> <p>Compiling the contract needs to be carried out in the terminal environment. Open a terminal and enter the ask project directory. Before compiling the contract, you first need to install the compilation dependencies, execute the following command to install the dependent projects</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre></div><p>After the dependent project is installed, execute the following command to compile:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./assembly/codegen/bin/ask examples/solar/solar.ts
</code></pre></div><p>After successful compilation, files with the following structure will be generated in the <code>example/solar/</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">.</span>
├── extension.ts
├── solar.ts
└── target
    ├── metadata.json
    └── target.wasm
</code></pre></div><p>Among them, the <code>extension.ts</code> file is the file after all the annotations in the contract <code>solar.ts</code> are expanded, and <code>target/metadata.json</code> and <code>target/target.wasm</code> are the abi and wasm files generated by compilation.</p> <ol start="3"><li>Deployment and calling</li></ol> <p>We deploy and test contract functions in the <a href="https://github.com/patractlabs/europa" target="_blank" rel="noopener noreferrer">Europa<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> sandbox environment, using <a href="https://github.com/polkadot-js/apps" target="_blank" rel="noopener noreferrer">polkadot-js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on the front end as an interactive interface. The test steps are as follows:</p> <ul><li><p>First, we follow the instructions of <code>Europa</code> and <code>plokadot-js</code> to start nodes and services.</p></li> <li><p>In the contract interface of <code>polkadot-js</code>, upload the <code>metadata.json</code> and <code>target.wasm</code> files under <code>solar/target</code>.
<img src="/substrate-contracts-book/assets/img/v0.1Report_upload.3a90b897.png" alt="upload"></p></li> <li><p>Deploy the uploaded contract.
According to the operation process, we deploy the <code>solar</code> contract to the Europa node.
<img src="/substrate-contracts-book/assets/img/v0.1Report_deploy.0d164635.png" alt="deploy">
After successful deployment, you will get the following results:
<img src="/substrate-contracts-book/assets/img/v0.1Report_deploy_result.422623ea.png" alt="deploy-result"></p></li> <li><p>Call the <code>set</code> method to set a new <code>radius</code> value.
After that, we call the <code>set</code> method, and set <code>name</code> to <code>Mars</code>, and set the value of <code>radius</code> to <code>5200</code>. After successful execution, the <code>getRadius</code> method will return the new <code>radius</code> value.
<img src="/substrate-contracts-book/assets/img/v0.1Report_call.31ee52ac.png" alt="call"></p></li></ul> <p>So far, we have completed the contract upload, deployment, and call operations, and got the expected results.</p> <h2 id="about-ask-v0-2"><a href="#about-ask-v0-2" class="header-anchor">#</a> About Ask! v0.2</h2> <p>As mentioned above, we have implemented everything in the proposal except array&amp;map. At the same time, the v0.2 design has been completed, please refer to [Treasury proposal for Ask! v0.2](https://github.com/patractlabs /proposals/blob/main/%E6%8F%90%E6%A1%88/As-ink/v0.2ProposalCN.md).</p></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/patractlabs/substrate-contracts-book/edit/master/en/ask/reports/v0.1Report.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/30/2021, 5:11:52 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/substrate-contracts-book/en/ask/ask-vs-ink.html" class="prev">
            Ask! and ink! Comparison of characteristics
          </a></span> <span class="next"><a href="/substrate-contracts-book/en/ask/reports/v0.2Report.html">
            Report for Ask! v0.2
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html#design-and-implementation-of-v0-1" class="sidebar-link reco-side-design-and-implementation-of-v0-1" data-v-70334359>Design and Implementation of v0.1</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html#how-to-use-ask-v0-1" class="sidebar-link reco-side-how-to-use-ask-v0-1" data-v-70334359>How to use Ask! v0.1</a></li><li class="level-2" data-v-70334359><a href="/substrate-contracts-book/en/ask/reports/v0.1Report.html#about-ask-v0-2" class="sidebar-link reco-side-about-ask-v0-2" data-v-70334359>About Ask! v0.2</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/substrate-contracts-book/assets/js/app.488f6983.js" defer></script><script src="/substrate-contracts-book/assets/js/3.66b4543a.js" defer></script><script src="/substrate-contracts-book/assets/js/1.293685b3.js" defer></script><script src="/substrate-contracts-book/assets/js/12.3d9c1fd1.js" defer></script>
  </body>
</html>

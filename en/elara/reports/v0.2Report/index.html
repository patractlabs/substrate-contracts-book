<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Report for Elara v0.2 | Substrate Contracts Book</title><meta data-react-helmet="true" property="og:url" content="https://docs.patract.io/substrate-contracts-book/en/elara/reports/v0.2Report"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Report for Elara v0.2 | Substrate Contracts Book"><meta data-react-helmet="true" name="description" content="5 weeks ago, Patract Hub applied a treasury proposal for Elara v0.2. Now, we have finished all the development work on time. Please review our design, work, and enjory the seperated free services (1M requests per day) online at https//polkadot.elara.patract.io and https//polkadot.js.org/apps."><meta data-react-helmet="true" property="og:description" content="5 weeks ago, Patract Hub applied a treasury proposal for Elara v0.2. Now, we have finished all the development work on time. Please review our design, work, and enjory the seperated free services (1M requests per day) online at https//polkadot.elara.patract.io and https//polkadot.js.org/apps."><link data-react-helmet="true" rel="shortcut icon" href="/substrate-contracts-book/en/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.patract.io/substrate-contracts-book/en/elara/reports/v0.2Report"><link data-react-helmet="true" rel="alternate" href="https://docs.patract.io/substrate-contracts-book/elara/reports/v0.2Report" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://docs.patract.io/substrate-contracts-book/en/elara/reports/v0.2Report" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.patract.io/substrate-contracts-book/elara/reports/v0.2Report" hreflang="x-default"><link rel="stylesheet" href="/substrate-contracts-book/en/assets/css/styles.4aa6c65a.css">
<link rel="preload" href="/substrate-contracts-book/en/assets/js/runtime~main.d9b0143f.js" as="script">
<link rel="preload" href="/substrate-contracts-book/en/assets/js/main.ba73d1ed.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/substrate-contracts-book/en/"><img src="/substrate-contracts-book/en/img/logo.svg" alt="Substrate Contracts Book" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/substrate-contracts-book/en/img/logo.svg" alt="Substrate Contracts Book" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">My Site</b></a><a href="https://www.patract.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://blog.patract.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/patractlabs/substrate-contracts-book" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/substrate-contracts-book/elara/reports/v0.2Report" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ä¸­æ–‡</a></li><li><a href="/substrate-contracts-book/en/elara/reports/v0.2Report" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/en/">Summary</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/contracts/introduction">Substrate contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/contracts/overview">Contract overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/contracts/model">Contract model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/contracts/language">Contract language</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/contracts/wasm_first_step">Brief introduction of Wasm</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ink!</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ask!</a></li><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/en/solang/introduction">Solang</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Redspot</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Europa</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">zkMega</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Himalia</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Metis</a></li><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/en/carpo/introduction">Carpo</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Elara</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/elara/introduction">Elara</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/elara/tutorial">Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/elara/design">Design Brief</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/elara/API">API access</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Reports</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/elara/reports">Report for Elara proposals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/substrate-contracts-book/en/elara/reports/v0.1Report">v0.1Report</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/substrate-contracts-book/en/elara/reports/v0.2Report">Report for Elara v0.2</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Jupiter</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">PatraStore</a></li><li class="menu__list-item"><a class="menu__link" href="/substrate-contracts-book/en/patract/introduction">Patract</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Report for Elara v0.2</h1></header><p>5 weeks ago, <a href="https://patract.io" target="_blank" rel="noopener noreferrer">Patract Hub</a> applied a <a href="https://polkadot.polkassembly.io/motion/33" target="_blank" rel="noopener noreferrer">treasury proposal</a> for Elara v0.2. Now, we have finished all the development work on time. Please review our design, work, and enjory the seperated free services (1M requests per day) online at <a href="https://elara.patract.io." target="_blank" rel="noopener noreferrer">https://elara.patract.io.</a> We have also privided a shared limited bandwidth node RPC service for Polkadot (wss://polkadot.elara.patract.io and <a href="https://polkadot.elara.patract.io" target="_blank" rel="noopener noreferrer">https://polkadot.elara.patract.io</a>), you can add it directly into your project and <a href="https://polkadot.js.org/apps" target="_blank" rel="noopener noreferrer">https://polkadot.js.org/apps</a>.</p><blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="recap-of-the-detailed-design-of-elara-v02"></a>Recap of the detailed design of Elara v0.2<a class="hash-link" href="#recap-of-the-detailed-design-of-elara-v02" title="Direct link to heading">#</a></h3><ul><li>Implement the account space features, supporting developers to use Github as a third-party login system to create an account space.</li><li>Support the creating and management of multiple projects under the developerâ€™s account space</li><li>Provide developers with detailed access statistics features on the single project dimension, showing statistical indicators such as daily and weekly requests, calling methods, and source of user groups.</li><li>Officially launch <a href="https://elara.patract.io" target="_blank" rel="noopener noreferrer">https://elara.patract.io</a>, providing the community with public access services to the Polkadot mainnet</li></ul></blockquote><p>Now, let&#x27;s show you the design and implementation of v0.2, and how to run and verify the work. <strong> With this micro-service architecture described blow, we can provide 5K requests per second and 500M requests per day for now. In the future, we will upgrade this architecture for 10 times improvements. </strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="architecture-of-elara-v02"></a>Architecture of Elara v0.2<a class="hash-link" href="#architecture-of-elara-v02" title="Direct link to heading">#</a></h2><p>We had learned from Infura&#x27;s work model, so that each development account can apply for multiple <code>Projects</code> to divide different <code>Workspace</code>, and then assign different <code>Provider</code> to access chain nodes. Therefore, the user&#x27;s smallest resource unit is a <code>Project</code>. We have assigned an independent <code>PID</code> for each project. In the index of all resources, the developer can use this <code>PID</code> to find the information corresponding to this <code>Project</code>, such as detailed information, daily or weekly access statistics, etc.</p><p>Therefore, the architecture of Elara v0.2 is roughly as follows:</p><p><img src="https://user-images.githubusercontent.com/5023721/100614013-6a5fde00-3350-11eb-882f-43efe02e1ecd.jpg" alt="elara"></p><p>As can be seen from the above, in the backend management platform of Elara v0.2, the entire system is divided into 3 main modules:</p><ul><li><code>Developer-Account</code>: The module to manage the user&#x27;s account login status.</li><li><code>Stat</code>: The module for management and data statistics of <code>Project</code>.</li><li><code>API</code>: The <code>Route</code> module to manage user&#x27;s <code>Requests</code>.</li></ul><p>In the overall design, the three modules are designed into a microservice architecture system, which can be independently extended. Because these three modules all run in independent processes after they are started, in the future, individual modules can be upgraded in parallel, such as expansion, reconstruction, and replacement. Among them, the <code>Developer-Account</code> module and the <code>Stat</code> module share data through a shared database, and the <code>Stat</code> and <code>API</code> are decoupled through the message queue <code>kafka</code>. In the future, it will be easy to add more complex functional modules based on this design to make Elara play a more powerful effect.</p><p>These three modules are responsible for different functions:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-developer-account-module"></a>1. <code>Developer-Account</code> Module<a class="hash-link" href="#1-developer-account-module" title="Direct link to heading">#</a></h3><p>This module manages user account information and maintains login status. This module currently uses <code>Redis</code> to cache user information and maintain the user&#x27;s login status. This login status is shared with the <code>Stat</code> module. Currently, this module uses Github&#x27;s <code>AccountID</code> information to request authorization to access Github to create users.</p><p>Therefore, the external access interfaces provided by the module after running are:</p><ul><li>GET <code>/auth/login</code>: Get login status information</li><li>GET <code>/auth/logout</code>: logout, remove the user&#x27;s login information.</li><li>GET <code>/auth/github</code>: request authorization information from github</li><li>GET <code>/auth/github/callback</code>: processing of callbacks authorized to github</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-stat-module"></a>2. <code>Stat</code> Module<a class="hash-link" href="#2-stat-module" title="Direct link to heading">#</a></h3><p>This module is mainly responsible for the management of <code>Project</code>, and counts the request information initiated by users from the <code>API</code> module in the dimensions of Project and users. This module is <code>Consumer</code> of <code>kafka</code> Message Middleware, which accepts request information sent from the <code>API</code> module and performs processing statistics. At the same time, the module shares the user&#x27;s login status information with <code>Developer-Account</code> to check whether the user is still connected to Elara&#x27;s webpage. In this module, each user can apply for the allocation of multiple <code>Projects</code>, representing a restricted resource unit in Elara, such as limiting the amount of requests and total bandwidth that a Project can accept per day.</p><p>The access interface of the <code>Stat</code> module uses <code>PID</code> as the basic element, and the <code>PID</code> of a project will be used as the specific node <code>Provider</code> of this project in the <code>API</code> module. In the process of using this <code>PID</code> to raise a node access request to the <code>API</code>, the developer will consume the resources managed under the project corresponding to this <code>PID</code> and accumulate the statistical information of this project.</p><p>Based on the above discussion, the <code>Stat</code> module is designed as follows:</p><ul><li>GET <code>/project/list</code>: List all project information under the currently logged-in user, and return:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;b78a79f98a2bb1a991a357504a5b04c1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Active&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;chain&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;substrate&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;thedao&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;uid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;secret&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;createtime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1600398327&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;lasttime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1600398327&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><span class="token property">&quot;allowlist&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;false&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>id</code> in the returned information is the <code>PID</code> of a <code>Project</code>.</p><ul><li>GET <code>/project/&lt;PID&gt;</code>: Returns the detailed information associated with this <code>Project</code>.</li><li>POST <code>/project/create</code>: Create a new <code>Project</code> based on the information of the currently logged in user</li></ul><p>Parametersï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">chain:&lt;Polkdaot|Kusama&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">name:&lt;Validation rules /[a-zA-Z]{4,32}/&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>GET <code>/stat/day/&lt;PID&gt;</code>: Get the statistics of a <code>Project</code> in one day</li><li>GET <code>/stat/day/&lt;PID&gt;</code>: Get the statistical information of a <code>Project</code> within one week</li><li>See the document for other interface definitions: <a href="https://github.com/patractlabs/elara/tree/master/packages/stat" target="_blank" rel="noopener noreferrer">Stat README</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-api-module"></a>3. <code>API</code> Module<a class="hash-link" href="#3-api-module" title="Direct link to heading">#</a></h3><p>After receiving requests from different users, the <code>API</code> module distinguishes which request to a <code>Project</code> according to the <code>PID</code> carried in the routing information, sends the corresponding information to the <code>kafka</code> queue, and forwards the user request to the corresponding node. Therefore, for the <code>API</code> module, Elara designed the following two access interfaces, among which the parameters of <code>&lt;chain&gt;</code> can currently be filled in <code>Polkadot</code> and <code>Kusama</code>.</p><ul><li>HTTPS, POST <code>/&lt;chain&gt;/&lt;PID&gt;</code>: Accept the RPC request initiated by the user. The parameters of the request are all RPC interfaces that the node provides external services</li><li>Websocket <code>/&lt;chain&gt;/&lt;PID&gt;</code>: Accept the Websocket request initiated by the user. The parameters of the request are all RPC interfaces that the node provides external services</li></ul><p>The above three modules work together to provide Elara&#x27;s back-end components. Adding a front-end kit on top of it can become a complete Elara product to provide external services: <a href="https://elara.patract.io/" target="_blank" rel="noopener noreferrer">https://elara.patract.io/</a> The sample screenshot is as follows:</p><p>This module is used to provide node services. It is mainly responsible to proxy user&#x27;s node access request (RPC &amp; websocket) to the node, and as the Producer of the <code>kafka</code> message queue, it sends the relevant information of the user request to the <code>Stat</code> module. In the <code>API</code> module, the user composes the <code>PID</code> created in the <code>Stat</code> module into the URL of the access node <code>Provider</code>, and then initiates a node access request to the <code>API</code> module.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-summary"></a>4. Summary<a class="hash-link" href="#4-summary" title="Direct link to heading">#</a></h3><p>The above three modules work together to provide Elara&#x27;s back-end components. Adding a front-end kit on top of it can become a complete Elara product to provide external services: <a href="https://elara.patract.io/" target="_blank" rel="noopener noreferrer">https://elara.patract.io/</a> The sample screenshot is as follows:</p><p><img src="https://user-images.githubusercontent.com/21072025/100822117-aa2be000-348c-11eb-9198-815ab2a5ebd5.png" alt="elara1">
<img src="https://user-images.githubusercontent.com/21072025/100822212-d5163400-348c-11eb-9e37-cdc3f5dd960c.png" alt="elara2">
<img src="https://user-images.githubusercontent.com/21072025/100822302-042ca580-348d-11eb-9f70-756c2cc9265f.png" alt="elara3"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-elara"></a>Run Elara<a class="hash-link" href="#run-elara" title="Direct link to heading">#</a></h2><p>The processes corresponding to the above 3 modules need to be started <strong>in sequence</strong> in the following order to make Elara work properly: 1, <code>Developer-Account</code>, 2, <code>Stat</code>, 3.<code>API</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="environment-preparation"></a>Environment preparation<a class="hash-link" href="#environment-preparation" title="Direct link to heading">#</a></h3><p>Elara&#x27;s operating environment requires <code>redis</code> and <code>kafka</code> support. Therefore, before running the following commands, first ensure that there is a running <code>redis</code> instance in the running environment and the executable file of <code>kafka</code> has been installed. The 3 processes of Elara are run by <code>node</code>, so you need to install the corresponding dependencies with the <code>yarn</code> command before running.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="start-services"></a>Start Services<a class="hash-link" href="#start-services" title="Direct link to heading">#</a></h3><ol><li><p>Start <code>Developer-Account</code> Service</p><ol><li>Enter <code>elara/packages/account</code> directory<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> package/account</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Install dependence<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Modify the configuration file of the <code>Developer-Account</code> service, including the <code>redis</code> field and the <code>github</code> field. The default port is set to <code>7001</code>, so if the <code>port</code> domain is not modified, the service will occupy the <code>7001</code> port after startup.<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> ./config/env/dev.env.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Start the service, and the log output by the process is located in the <code>./logs</code> directory.<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ node app.js</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># or use pm2 to manage process</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ pm2 start pm2.json --env dev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ol></li><li><p>Start <code>Stat</code> Service</p><ol><li>Enter <code>elara/packages/stat</code> directoryï¼ˆIf you are in <code>account</code> directoryï¼‰<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">/stat</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Install dependence<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Switch to the <code>kafka</code> directory, start the <code>kafka</code> directory and set the <code>topic</code><ol><li>Start <code>kafka</code> and related processes. If the configuration file of <code>kafka</code> is not modified, port <code>9092</code> will be occupied by default.<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">the root directory of kafka</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ bin/zookeeper-server-start.sh config/zookeeper.properties</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ bin/kafka-server-start.sh config/server.propertiesã€€</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Add <code>elara-dev</code> topic to <code>kafka</code><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># add `elara-dev` topic to kafka</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ bin/kafka-topics.sh --create --topic elara-dev --bootstrap-server localhost:9092</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># check whethere this topic is initted</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">bin/kafka-topics.sh --describe --topic elara-dev --bootstrap-server localhost:9092</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ol></li><li>Switch to <code>elara/packages/stat</code> directoryï¼Œmodify the configration file of <code>Stat</code> module.<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> ./config/env/dev.env.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol><li>Since <code>Stat</code> and <code>Developer-Account</code> share the same <code>redis</code> instance, the configuration of the <code>redis</code> field in this configuration file should be consistent with the configuration of <code>redis</code> in the <code>Developer-Account</code> configuration file .</li><li>The <code>kafka</code> domain here needs to be consistent with the configuration of starting <code>kafka</code> in the previous step.</li><li><strong>If it is only used for local testing, please modify the <code>test:false</code> in the default configuration to <code>test:true</code></strong>. After enabling this flag, when accessing the interface provided by <code>stat</code>, the login status of the login account will not be verified, and all interfaces can be directly accessed. In a production environment, please ensure that the value of the <code>test</code> field is <code>false</code>.</li><li>The default <code>port</code> domain in the configuration file is <code>7002</code>, so if you do not modify this value, it will occupy the <code>7002</code> port to provide services after startup.</li></ol></li><li>Start Services<ol><li>Start the <code>stat</code> service. If you do not modify the port after startup, the <code>7002</code> port will be occupied. The following text uses <code>127.0.0.1:7002</code> as the service address performed by <code>stat</code>. The log output by the process is located in the <code>./logs</code> directory.<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ node app.js</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># or use pm2 to manage process</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ pm2 start pm2.json --env dev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Start <code>kafka</code> consumer service<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ node ./kafka/consumer.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>If you need to see the console information, you need to start the <code>dashboard</code> service<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ node ./timer/dashboard.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div>At this point, you can open <code>http://127.0.0.1:7002/dashboard</code> in the browser to see the statistics information of the monitoring station.</li></ol></li></ol></li><li><p>Start <code>API</code> Service</p><ol><li><p>Enter <code>elara/packages/api</code> directoryï¼ˆif you are in <code>stat</code>ï¼‰</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">/api</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Install dependence</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Modify the configuration file of the <code>API</code> module</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">vim</span><span class="token plain"> ./config/env/dev.env.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>The <code>chain</code> field is used to configure the real chain node, where the name of the chain is part of the route provided by the <code>api</code> to the developer. For example, if there are the following configurations in the default, the access method of <code>/Polkadot/&lt;PID&gt;</code> is supported in the routing supported by the API.<div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;Polkadot&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &#x27;rpc&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&#x27;****</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">**&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//configure as node http://IP: RPC port in step 2</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &#x27;ws&#x27;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&#x27;****</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">**&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//configure as node ws://IP: WS port in step 2</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>The <code>kafka</code> field is used to configure the information of the <code>kafka</code> process started in the <code>stat</code> section. Note that the configured topic is the topic <code>elara-dev</code> registered to <code>kafka</code> when the <code>stat</code> part is configured. ,</li><li><code>startServer</code> filed is used to configure the ip and port of the <code>stat</code> process. For example, if <code>api</code> and <code>stat</code> are on the same host and the default configuration is used (that is, <code>stat</code> occupies port 7002 by default), then The value here is <code>127.0.0.1:7002</code></li><li><code>port</code> field is used to configure the port occupied by the <code>api</code> service process, the default configuration is 7003</li></ul></li><li><p>Start Services</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ node app.js</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># or use pm2 to manage process</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ pm2 start pm2.json --env dev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>At this time the service has been started, if the port is not modified, the port <code>7003</code> will be occupied. The following text uses the port <code>127.0.0.1:7003</code> as the host for user access. The log output by the process is located in the <code>./logs</code> directory.</p></li></ol></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="call-elara"></a>Call Elara<a class="hash-link" href="#call-elara" title="Direct link to heading">#</a></h3><p>Since the configuration of <code>test:true</code> is used when starting <code>stat</code> in the above case, the process of user login is skipped in the following process, and the process of creating <code>Project</code> is directly started.</p><ol><li><p>Create Projectï¼š</p><p>Send a request to create a project to the service address <code>127.0.0.1:7002</code> of <code>stat</code>: This project is a request for access to the <code>Polkadot</code> chain, so the value of the parameter <code>chain</code> is specified as <code>Polkadot</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">POST http://127.0.0.1:7002/project/create</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chain:Polkadot</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">name:hello</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Returnï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;mssage&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5d4ebb40b08f127652ad022f5936b9da&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Active&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;chain&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Polkadot&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;uid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Only  For Test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;secret&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0b89a386965bfe4dcb19f724ecb41890&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;createtime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1606581366&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;lasttime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1606581366&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;allowlist&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;false&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can get the detailed information of creating <code>Project</code> and <code>PID</code>, here is <code>5d4ebb40b08f127652ad022f5936b9da</code></p></li><li><p>List all the <code>Projects</code> for this user</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://127.0.0.1:7002/project/list</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Return:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5d4ebb40b08f127652ad022f5936b9da&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Active&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;chain&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Polkadot&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;uid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Only  For Test&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;secret&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0b89a386965bfe4dcb19f724ecb41890&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;createtime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1606581366&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;lasttime&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1606581366&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;allowlist&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;false&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Since testing is currently enabled, all <code>Project</code> information will be listed. If the test is not turned on, only the information list of <code>Project</code> for the current login will be listed.</p></li><li><p>Use this PID as part of the route to initiate an access request to the node.</p><p> The access request to the node needs to be served through <code>API</code>, the current <code>API</code> service address is <code>127.0.0.1:7003</code>, so we can initiate the following request: The access route is <code>&lt;api server host&gt;/&lt;project chain&gt;/&lt; PID&gt;</code> composition, so in this case</p><ul><li>The access address for rpc is <code>http://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da</code></li><li>The access address for websocket is <code>ws://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da</code></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">POST http://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;:1, </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;jsonrpc&quot;:&quot;2.0&quot;, </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;method&quot;:&quot;system_chain&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;params&quot;:[ ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>API</code> Service is normal and return:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;jsonrpc&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2.0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;result&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Polkadot&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This request will be counted by Elara normally and recorded that project <code>5d4ebb40b08f127652ad022f5936b9da</code> has one request.</p></li><li><p>If you want to test whether the api service can satisfy normal node requests, you can add the websocket access link to <a href="https://polkadot.js.org/apps/" target="_blank" rel="noopener noreferrer"><code>Polkadot/Substrate Portal</code></a>ã€‚</p><ol><li><p>Log in to the Portal web page in the browser</p></li><li><p>Click on the upper left corner</p></li><li><p>Click on the <code>DEVELOPMENT</code> column and click on the <code>Custom</code> column to fill in <code>ws://127.0.0.1:7003/Polkadot/5d4ebb40b08f127652ad022f5936b9da</code></p></li><li><p>Click &quot;Switch&quot;</p><p><img src="https://user-images.githubusercontent.com/2844215/100872118-4a5d2580-34dc-11eb-8bf2-a15de4af94c8.png" alt="image"></p></li></ol><p>At this point the Portal should be able to work normally, and all access requests are recorded by Elara.</p></li><li><p>Access the <code>Stat</code> service to get statistics</p><p>Such as listing all the visit statistics of the current project in the day</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://127.0.0.1:7002/stat/day/5d4ebb40b08f127652ad022f5936b9da</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or list the statistics of this project this week</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://127.0.0.1:7002/stat/week/5d4ebb40b08f127652ad022f5936b9da</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Visit <code>http://127.0.0.1:7002/dashboard</code> and you can see the total statistics from the console.</p></li></ol><p>At this point, the entire system can operate normally.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="éªŒè¯"></a>éªŒè¯<a class="hash-link" href="#éªŒè¯" title="Direct link to heading">#</a></h2><ul class="contains-task-list"><li><p><del>Developers can use Github account to log in to the developer account space from <a href="https://elara.patract.io" target="_blank" rel="noopener noreferrer">https://elara.patract.io</a></del></p><blockquote><p>Anyone can currently get access to the Polkadot chain through this link.</p></blockquote></li><li><p><del>Developers can create new projects and access related API keys under the account</del></p><blockquote><p>The above process has introduced the concept of project, and you can log in to github with authorization and create a project at <a href="https://elara.patract.io" target="_blank" rel="noopener noreferrer">https://elara.patract.io</a>.</p></blockquote></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> Developers can access the Polkadot node in Elara through Http and web-socket protocols</p><blockquote><p>The <code>API</code> service is used to support this function, and the corresponding operations have been shown above</p></blockquote></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> Developers can view the monitoring statistics of the projects on the day and the recent weeks</p><blockquote><p>The <code>/stat/day/&lt;PID&gt;</code> and <code>/stat/week/&lt;PID&gt;</code> interfaces of <code>Stat</code> service are used to support this function.</p></blockquote></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> You can view the relevant monitoring statistics from the Elara dashboard</p><blockquote><p>You can see the corresponding information from the <code>http://127.0.0.1:7002/dashboard</code> console.</p></blockquote></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/patractlabs/substrate-contracts-book/docs/elara/reports/v0.2Report.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/substrate-contracts-book/en/elara/reports/v0.1Report"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« v0.1Report</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/substrate-contracts-book/en/jupiter/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jupiter testnet Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture-of-elara-v02" class="table-of-contents__link">Architecture of Elara v0.2</a><ul><li><a href="#1-developer-account-module" class="table-of-contents__link">1. <code>Developer-Account</code> Module</a></li><li><a href="#2-stat-module" class="table-of-contents__link">2. <code>Stat</code> Module</a></li><li><a href="#3-api-module" class="table-of-contents__link">3. <code>API</code> Module</a></li><li><a href="#4-summary" class="table-of-contents__link">4. Summary</a></li></ul></li><li><a href="#run-elara" class="table-of-contents__link">Run Elara</a><ul><li><a href="#environment-preparation" class="table-of-contents__link">Environment preparation</a></li><li><a href="#start-services" class="table-of-contents__link">Start Services</a></li><li><a href="#call-elara" class="table-of-contents__link">Call Elara</a></li></ul></li><li><a href="#éªŒè¯" class="table-of-contents__link">éªŒè¯</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/substrate-contracts-book/en/assets/js/runtime~main.d9b0143f.js"></script>
<script src="/substrate-contracts-book/en/assets/js/main.ba73d1ed.js"></script>
</body>
</html>
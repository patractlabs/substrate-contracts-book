"use strict";(self.webpackChunksubstrate_contracts_book=self.webpackChunksubstrate_contracts_book||[]).push([[6806],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,k=d["".concat(c,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(k,s(s({ref:t},l),{},{components:n})):r.createElement(k,s({ref:t},l))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2040:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return l},default:function(){return d}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),s=["components"],i={},c="Quick Start",p={unversionedId:"redspot/intro/quick-start",id:"redspot/intro/quick-start",isDocsHomePage:!1,title:"Quick Start",description:"This guide will cover the basics of creating a Redspot project. The barebone without plugins allows you to run tasks, compile wasm contract and run tests automatically.",source:"@site/docs/redspot/intro/quick-start.md",sourceDirName:"redspot/intro",slug:"/redspot/intro/quick-start",permalink:"/substrate-contracts-book/redspot/intro/quick-start",editUrl:"https://github.com/patractlabs/substrate-contracts-book/edit/master/docs/redspot/intro/quick-start.md",version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Setup Enviroment",permalink:"/substrate-contracts-book/redspot/intro/installation"},next:{title:"Integrate into an existing contract project",permalink:"/substrate-contracts-book/redspot/intro/integrate"}},l=[{value:"Running Tasks",id:"running-tasks",children:[]},{value:"Create your first Redspot project:",id:"create-your-first-redspot-project",children:[{value:"Use Redspot template",id:"use-redspot-template",children:[]},{value:"Clone an existing project",id:"clone-an-existing-project",children:[]},{value:"Compile your contract",id:"compile-your-contract",children:[]},{value:"Deploy your contract",id:"deploy-your-contract",children:[]}]},{value:"Congrats! You now know the basic of Redspot! Let&#39;s dive deep.",id:"congrats-you-now-know-the-basic-of-redspot-lets-dive-deep",children:[]}],u={toc:l};function d(e){var t=e.components,n=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"quick-start"},"Quick Start"),(0,a.kt)("p",null,"This guide will cover the basics of creating a Redspot project. The barebone without plugins allows you to run tasks, compile wasm contract and run tests automatically."),(0,a.kt)("h2",{id:"running-tasks"},"Running Tasks"),(0,a.kt)("p",null,"To get a quick a look of what's availabe in redspot, run ",(0,a.kt)("inlineCode",{parentName:"p"},"npx redspot")," in your project directory:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ npx redspot\nRedspot version 0.11.4\n\nUsage: redspot [GLOBAL OPTIONS] <TASK> [TASK OPTIONS]\n\nGLOBAL OPTIONS:\n\n  --config              A Redspot config file. \n  --help                Shows this message, or a task's help if its name is provided \n  --log-level           Set log levels 1-5 (default: \"2\")\n  --max-memory          The maximum amount of memory that Redspot can use. \n  --network             The network to connect to. \n  --show-stack-traces   Show stack traces. \n  --tsconfig            Reserved redspot argument -- Has no effect. \n  --verbose             Enables Redspot verbose logging \n  --version             Shows redspot's version. \n\n  AVAILABLE TASKS:\n\n  check     Check whatever you need\n  clean     Clears the cache and deletes all artifacts\n  compile   Compiles the entire project, building all artifacts\n  console   Opens a redspot console\n  explorer  Start redspot explorer\n  help      Prints this message\n  run       Runs a user-defined script after compiling the project\n  test      Runs mocha tests\n  testnet   Running the test network\n\nTo get help for a specific task run: npx redspot help [task]\n\n")),(0,a.kt)("h2",{id:"create-your-first-redspot-project"},"Create your first Redspot project:"),(0,a.kt)("h3",{id:"use-redspot-template"},"Use Redspot template"),(0,a.kt)("p",null,"Redspot provide built-in contract templates to help developers start coding their own wasm contract without knowing all details of Redspot.\nTo start a Redspot project for erc20"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npx redspot-new erc20\n")),(0,a.kt)("p",null,"Once the command runs, you will see the following directory tree"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"+-- contracts\n|   +-- Cargo.lock\n|   +-- Cargo.toml\n    +-- lib.rs\n+-- scripts\n|   +-- deploy.ts\n+-- tests\n|   +-- erc20.test.ts\n+-- redspot.config.ts\n+-- package.json\n")),(0,a.kt)("h3",{id:"clone-an-existing-project"},"Clone an existing project"),(0,a.kt)("p",null,"You can also clone an ",(0,a.kt)("strong",{parentName:"p"},"existing redspot")," project. For example, you can clone this ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/atenjin/redspot-ink-example2"},"project")," "),(0,a.kt)("p",null,"And then, do ",(0,a.kt)("inlineCode",{parentName:"p"},"yarn")," to build the dependencies for Redspot project, then the ",(0,a.kt)("inlineCode",{parentName:"p"},"npx redspot")," command will exist in this project."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd <project>\nyarn\nnpx redspot\n")),(0,a.kt)("h3",{id:"compile-your-contract"},"Compile your contract"),(0,a.kt)("p",null,"Netx, taking a look at ",(0,a.kt)("inlineCode",{parentName:"p"},"contracts/"),", you should find ",(0,a.kt)("inlineCode",{parentName:"p"},"lib.rs"),".This is the sample codes for a erc20 contract written in ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"},"ink!")),"  with off-chain tests. For details, please refer ",(0,a.kt)("a",{parentName:"p",href:"https://substrate.dev/substrate-contracts-workshop/#/0/setup"},"ink!")),(0,a.kt)("p",null,"To compile it, simply run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npx redspot compile\n")),(0,a.kt)("p",null,"You might see error like this"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ERROR: Building the contract in debug mode requires an ink! version newer than `3.0.0-rc3`!\nAn unexpected error occurred:\n")),(0,a.kt)("p",null,"This is cargo-contract complaining about the ink version. To fix this, edit ",(0,a.kt)("inlineCode",{parentName:"p"},"contracts/Cargo.toml"),"\nchange the ink dependency from ",(0,a.kt)("inlineCode",{parentName:"p"},"3.0.0-rc3")," to ",(0,a.kt)("inlineCode",{parentName:"p"},'"3.0.0-rc4'),". It should look like"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'[package]\nname = "erc20"\nversion = "3.0.0-rc4"\nauthors = ["Parity Technologies <admin@parity.io>"]\nedition = "2018"\n\n[dependencies]\nink_primitives = { version = "3.0.0-rc4", git = "https://github.com/paritytech/ink", default-features = false }\nink_metadata = { version = "3.0.0-rc4", git = "https://github.com/paritytech/ink", default-features = false, features = ["derive"], optional = true }\nink_env = { version = "3.0.0-rc4", git = "https://github.com/paritytech/ink", default-features = false }\nink_storage = { version = "3.0.0-rc4", git = "https://github.com/paritytech/ink", default-features = false }\nink_lang = { version = "3.0.0-rc4", git = "https://github.com/paritytech/ink", default-features = false }\n')),(0,a.kt)("p",null,"Another possible error"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ERROR: Your wasm-opt version is 91, but we require a version >= 99.\n")),(0,a.kt)("p",null,"To fix this, download the latest binary release for ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/WebAssembly/binaryen"},"bianryen")),(0,a.kt)("p",null,"After compilation, you should see a new dir "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"artifacts\n  \u2514\u2500 erc20.contracts\n  \u2514\u2500 erc20.json\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"artifacts/erc20.contract")," is the compiled contract source code to deployed to blockchain node"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"artifacts/erc20.json")," describes all the interfaces that can be used to interact with your contract which acts the same as ",(0,a.kt)("inlineCode",{parentName:"p"},"ABI")," in ethereum."),(0,a.kt)("h3",{id:"deploy-your-contract"},"Deploy your contract"),(0,a.kt)("p",null,"Redspot automates the deploy process, so users won't need to update the contract file themselves."),(0,a.kt)("p",null,"First, make sure you have started the blockchain node, here we use canvas for demo:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"canvas --dev --tmp\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"}," Config endpoint in ",(0,a.kt)("inlineCode",{parentName:"em"},"deploy.ts"),", this points to websocket of the blockchain node "))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"{\n        ...\n        networks: {\n    development: {\n      endpoint: 'ws://127.0.0.1:9944', // \n      types: {},\n      ...\n    },\n  },\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"}," Deploy "))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npx redspot run scripts/deploy.ts --no-compile\n")),(0,a.kt)("p",null,"Making sure add ",(0,a.kt)("inlineCode",{parentName:"p"},"--no-compile")," at the end since Redspot will compile every time by default "),(0,a.kt)("p",null,"After the contract is successfully deployed, you can get information similar to this."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Deploy successfully. The contract address:  5CqB5Mh9UdVbTE1Gt5PJfWSiCHydJaJsA31HjKGti1Z2fn78\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"}," Test your contract "))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npx redspot test --no-compile\n")),(0,a.kt)("p",null,"The result will be looking like this"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"   \u2713 Assigns initial balance (9189ms)\n    \u2713 Transfer adds amount to destination account (23906ms)\n    \u2713 Transfer emits event (17993ms)\n    \u2713 Can not transfer above the amount (17997ms)\n    \u2713 Can not transfer from empty account (24001ms)\n\n\n  5 passing (2m)\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          \u2502          \u2502 Min                      \u2502 Max                       \u2502 Avg                      \u2502       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Contract \u2502 Message  \u2502 EstimateGas \u2502 Weight     \u2502 EstimateGas \u2502 Weight      \u2502 EstimateGas \u2502 Weight     \u2502 Calls \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 erc20    \u2502 transfer \u2502 4782870832  \u2502 5280208832 \u2502 9451855260  \u2502 10397508443 \u2502 7604329958  \u2502 8280994032 \u2502 5     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n")),(0,a.kt)("h2",{id:"congrats-you-now-know-the-basic-of-redspot-lets-dive-deep"},"Congrats! You now know the basic of Redspot! Let's dive deep."))}d.isMDXComponent=!0}}]);
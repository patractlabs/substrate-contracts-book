(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{545:function(s,t,a){"use strict";a.r(t);var e=a(6),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"tutorial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tutorial"}},[s._v("#")]),s._v(" tutorial")]),s._v(" "),a("blockquote",[a("p",[s._v("当前 Ask! 只进行了Kusama国库议案的第一期的开发。因此还未发布到npm等公开仓库中。")])]),s._v(" "),a("h2",{attrs:{id:"简单运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单运行"}},[s._v("#")]),s._v(" 简单运行：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("clone 项目")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/patractlabs/ask\n")])])])]),s._v(" "),a("li",[a("p",[s._v("案例合约")]),s._v(" "),a("p",[s._v("在Ask!项目中准备了一些案例合约例如"),a("code",[s._v("flipper")]),s._v("，"),a("code",[s._v("incrementer")]),s._v("等，在"),a("code",[s._v("/example")]),s._v("目录下。开发者可以直接参考这些项目，也可以通过新建一个typescript文件(*.ts)来执行下列过程。以下示例过程的最终代码位于"),a("code",[s._v("/example/solar")]),s._v(" 目录下。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("新建文件 "),a("code",[s._v("solar.ts")])])]),s._v(" "),a("li",[a("p",[s._v("定义合约存储")]),s._v(" "),a("p",[s._v("Ask! 采用注解 "),a("code",[s._v("@storage")]),s._v(" 定义一个合约的存储。这个过程类似于ink!中的 "),a("code",[s._v("#[ink(storage)]")]),s._v("宏。例如在这个案例中，我们定义下面3个合约存储变量：")]),s._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[s._v("@storage\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Planets")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    radius"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" u32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    isdwarf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("定义合约的范围及可调用方法：")]),s._v(" "),a("p",[s._v("Ask! 采用"),a("code",[s._v("@contract")]),s._v("注解来指定一个class为合约类。这个过程类似于ink!中的 "),a("code",[s._v("#[ink::contract]")]),s._v("宏。")]),s._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[s._v("@contract\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SolarSystem")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("Ask! 提供了"),a("code",[s._v("@constructor")]),s._v(" 和 "),a("code",[s._v("@message")]),s._v(" 注解修饰合约类中的方法，类似于ink!中的 "),a("code",[s._v("#[ink(constructor)]")]),s._v(" 和 "),a("code",[s._v("#[ink(message)]")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[s._v("@contract\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SolarSystem")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    @"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constructor")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*...*/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    @"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mutates "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" selector "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0x0a0b0c0d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRadius")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" u32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*...*/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("编译 Ask! 合约")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("安装依赖环境：")]),s._v(" "),a("p",[s._v("进入Ask!项目的根目录，执行命令：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("编译")]),s._v(" "),a("p",[s._v("在 Ask! 项目的"),a("strong",[s._v("根目录")]),s._v("下编译合约。假设当前合约的路径位于"),a("code",[s._v("examples/solar/solar.ts")]),s._v("（开发者可以替换为自己合约文件的路径），则编译命令是：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./assembly/codegen/bin/ask examples/solar/solar.ts\n")])])]),a("p",[s._v("执行了这个命令后，会在合约文件的目录下生成一个扩展文件"),a("code",[s._v("extension.ts")]),s._v("，且合约的编译产物位于合约文件目录下的"),a("code",[s._v("target")]),s._v("目录。")])]),s._v(" "),a("li",[a("p",[s._v("测试")]),s._v(" "),a("p",[s._v("开发者可以采用 Patract 提供的合约执行环境沙盒 "),a("RouterLink",{attrs:{to:"/europa/introduction.html"}},[s._v("Europa")]),s._v(" 进行合约的部署调用和测试。")],1),s._v(" "),a("p",[s._v("启动 Europa后，开发者可以通过 "),a("a",{attrs:{href:"https://polkadot.js.org/apps",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://polkadot.js.org/apps"),a("OutboundLink")],1),s._v(" 将"),a("code",[s._v("target")]),s._v("目录下的合约进行部署和调用，这个过程和 ink! 合约的操作过程一致。")])])])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);
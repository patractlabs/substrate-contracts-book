(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{762:function(t,e,a){"use strict";a.r(e);var s=a(6),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"redspot-v0-1-æŠ¥å‘Š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redspot-v0-1-æŠ¥å‘Š"}},[t._v("#")]),t._v(" Redspot v0.1 æŠ¥å‘Š")]),t._v(" "),a("h2",{attrs:{id:"proposal-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proposal-overview"}},[t._v("#")]),t._v(" Proposal overview")]),t._v(" "),a("p",[t._v("Patract Labs ("),a("a",{attrs:{href:"https://patract.network/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://patract.network"),a("OutboundLink")],1),t._v(") provides solutions for Polkadot's parachain smart contract ecosystem. Three weeks ago, we applied a "),a("a",{attrs:{href:"https://polkadot.polkassembly.io/motion/7",target:"_blank",rel:"noopener noreferrer"}},[t._v("treasury proposal"),a("OutboundLink")],1),t._v(" for Redspot v0.1. Here is a "),a("a",{attrs:{href:"https://youtu.be/oPsD2W0mAQs",target:"_blank",rel:"noopener noreferrer"}},[t._v("youtube video"),a("OutboundLink")],1),t._v(" for overall demonstration. Now, we have finished all the features on time. We ask the councillors to check our work and give feedbacks. Welcome to our "),a("a",{attrs:{href:"https://app.element.io/#/room/!RZjiuwwssNFJZxaTjg:matrix.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("riot room"),a("OutboundLink")],1),t._v(" to talk about smart contract development.")]),t._v(" "),a("p",[t._v("Redspot is inspired by Ethereum's Truffle. Redspot is a development environment, testing framework and asset pipeline for pallet-contracts. Redspot is trying to let the development of ink! be projectized and simplify the testing and interacting with contracts. The source code is in https://github.com/patractlabs/redspot.")]),t._v(" "),a("p",[t._v("Jupiter is a long term Substrate testnet, dedicated in WASM smart contract development. We also host a public node in develop mode for deploying and testing smart contract. The source code is in https://github.com/patractlabs/jupiter.")]),t._v(" "),a("h2",{attrs:{id:"redspot-v0-1-introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redspot-v0-1-introduction"}},[t._v("#")]),t._v(" Redspot v0.1 introduction")]),t._v(" "),a("p",[t._v("Except the requirements in the proposal, "),a("strong",[t._v("we have provided an objectified way to operate with contracts, which has not been implemented in Polkadot-js SDK yet")]),t._v(". For more information, please check out "),a("a",{attrs:{href:"https://github.com/patractlabs/Redspot#contractapi",target:"_blank",rel:"noopener noreferrer"}},[t._v("contractApi"),a("OutboundLink")],1),t._v(". Most of the requirements are finished, expect some issues because ink! is a little unstable.")]),t._v(" "),a("p",[t._v("Redspot's "),a("code",[t._v("migration")]),t._v(" and "),a("code",[t._v("test")]),t._v(" can be used just like web3.js. Developer can write scripts like this rather than using raw "),a("code",[t._v("call")]),t._v(" to build raw extrinsic or RPC parameters.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// contractApi can be obtained by contract.load and contract.deployed, it can call the methods of the contract.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// It calls the balanceOf method of the contract and returns the corresponding type by rpc.")]),t._v("\ncontractApi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Alice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("publicKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// It sends a contract transfer to the chain and get a Result type.")]),t._v("\ncontractApi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Bob"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("publicKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),a("p",[t._v("And then, We will show you the details about how Redspot works:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/69485494/92663743-34651c00-f356-11ea-8b30-facff1958d04.gif",alt:"how Redspot works"}})]),t._v(" "),a("p",[t._v("Currently, Redspot only support macOS and Linux, without Windows (waiting for ink! to support).")]),t._v(" "),a("h2",{attrs:{id:"using-redspot-on-your-computer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-redspot-on-your-computer"}},[t._v("#")]),t._v(" Using Redspot on your computer")]),t._v(" "),a("p",[t._v("Now, let's assume that you are a new developer for "),a("code",[t._v("pallet-contracts")]),t._v(". You know nothing about Substrate, hasn't prepared the developing environment for contracts. But, you had read some guides or cookbooks, and known a little about ink!. Then, you try to write WASM contracts for "),a("code",[t._v("pallet-contracts")]),t._v(".")]),t._v(" "),a("p",[t._v("Just follow us to use Redspot and build your own contracts!")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("You "),a("strong",[t._v("do not need to clone Redspot project")]),t._v(", just need to check whether there is a "),a("code",[t._v("npx")]),t._v(" command on your machine.")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("npx")]),t._v(" is a package running tool that comes with "),a("code",[t._v("npm")]),t._v(" 5.2+ and higher, it ensures that you always install the latest version.")]),t._v(" "),a("p",[t._v("if you don't have "),a("code",[t._v("npx")]),t._v(" command, just do "),a("code",[t._v("npm install -g npx")])])]),t._v(" "),a("p",[t._v("If you have installed "),a("code",[t._v("npx")]),t._v(", you must already have "),a("code",[t._v("npm")]),t._v(", or you could install "),a("code",[t._v("yarn")]),t._v(" command, which is also what we recommend to use.")])]),t._v(" "),a("li",[a("p",[t._v("Install and use Redspot to pull a contract project template")]),t._v(" "),a("blockquote",[a("p",[t._v("npx redspot-new <app-name> --template <template-name>")])]),t._v(" "),a("p",[a("code",[t._v("npx")]),t._v(" would automatically download the newest "),a("code",[t._v("redspot-now")]),t._v(" on your machine, and could use it in any place. So, you do not need to compile or build Redspot project.")]),t._v(" "),a("p",[t._v("For example, if you want to create a contract project named "),a("code",[t._v("myerc20")]),t._v(" and use the erc20 template as initial contract project framework, you could use the following command:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx redspot-new myerc20 --template erc20\n")])])]),a("p",[t._v("If you don't add "),a("code",[t._v("--template")]),t._v(", Redspot would use "),a("code",[t._v("flipper")]),t._v(" as default template.")]),t._v(" "),a("p",[t._v("Awesome, the "),a("code",[t._v("myerc20")]),t._v(" is your own contract project, you could start developing contracts from now!")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ npx Redspot-new myerc20 --template erc20\nnpx: installed "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("43")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".664s\n   \nâœ¨  Creating a new Project "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /myerc20.\nInstalling packages. This might take a while.\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" v1.22.5\ninfo No lockfile found.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Resolving packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\nDone "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".80s.\n   \nðŸŽ‰  Success"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Created myerc20 at /myerc20\nðŸ‘‰  Inside that directory, you can run several commands to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" you develop the contract:\n   \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n    Compile the contract.\n   \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n    Test the contract.\n   \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" Migrate\n    Migrate the contract\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Then, there is a template contract project in you current directory.")]),t._v(" "),a("p",[t._v("The directory structure is similar with the directory that truffle generated, including "),a("code",[t._v("migartions")]),t._v(", "),a("code",[t._v("tests")]),t._v(", "),a("code",[t._v("Redspot-config.js")]),t._v(" and so on. But currently, We can't support a "),a("code",[t._v("contracts")]),t._v(" directory due to "),a("code",[t._v("ink!")]),t._v("'s limit. After "),a("code",[t._v("ink!")]),t._v(" become stable in the future, we will move all the contracts into "),a("code",[t._v("contracts")]),t._v(" directory and organise contracts. About more information, please refer to this "),a("a",{attrs:{href:"https://github.com/paritytech/cargo-contract/issues/60",target:"_blank",rel:"noopener noreferrer"}},[t._v("ink Issue"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("Same with Truffle, the config file "),a("code",[t._v("Redspot-config.js")]),t._v(" is the most important file in the project, which would let Redspot to identity the contract project.")]),t._v(" "),a("ul",[a("li",[t._v("If you want to know more about config file, please refer to "),a("a",{attrs:{href:"https://github.com/patractlabs/Redspot#project-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("Project config"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("li",[t._v("For the project structure, please refer to "),a("a",{attrs:{href:"https://github.com/patractlabs/Redspot#directory-tree",target:"_blank",rel:"noopener noreferrer"}},[t._v("Directory tree"),a("OutboundLink")],1),t._v(".")])])]),t._v(" "),a("li",[a("p",[t._v("Now, "),a("code",[t._v("lib.rs")]),t._v(" is your contract file in your directory.")]),t._v(" "),a("p",[t._v("This file will be changed in the future. You can just write you custom contract logic in it. For more information, please refer to "),a("code",[t._v("ink!")]),t._v(", and we advice new developers to look through all example in "),a("code",[t._v("ink!")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Compile your contract!")]),t._v(" "),a("p",[t._v("In the current directory, you could use those commands to compile you contract:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n")])])]),a("p",[a("em",[t._v("That means you could use "),a("code",[t._v("npm run")]),t._v(" or "),a("code",[t._v("yarn")]),t._v(" to do the same operation. Later, we will use "),a("code",[t._v("yarn")]),t._v(" to represent all cases for "),a("code",[t._v("npm run")])])]),t._v(" "),a("p",[t._v("However you may haven't installed contract compile toolchain, then you would get:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n   \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" myerc20@0.1.0 build /myerc20\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Redspot build\n   \n/bin/sh: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(": cargo: not found\nERROR: No "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("cargo-contract"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" found\nRun the following "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" it:\n$ cargo "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --git https://github.com/paritytech/cargo-contract cargo-contract --force\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" code ELIFECYCLE\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" errno "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" myerc20@0.1.0 build: "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("Redspot build"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Exit status "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Failed at the myerc20@0.1.0 build script.\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" This is probably not a problem with npm. There is likely additional logging output above.\n   \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" A complete log of this run can be found in:\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("     /root/.npm/_logs/2020-09-11T10_03_43_152Z-debug.log\n")])])]),a("p",[t._v("Currently we just print some errors to advice developers to download toolchain, because "),a("code",[t._v("ink!")]),t._v(" and "),a("code",[t._v("cargo-contract")]),t._v(" is not stable now. In the future, we would automatically download all toolchains and install them, without bothering developers.")]),t._v(" "),a("p",[t._v("After installing all toolchains, you could continue following steps.")]),t._v(" "),a("p",[t._v("If compilation is done, you could get the artifacts in "),a("code",[t._v("artifacts")]),t._v(" directory.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" run v1.22.4\n$ Redspot build\nâœ¨  Detect contracts: erc20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./myerc20/Cargo.toml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Compile erc20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n   \ncargo +nightly contract build\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building cargo project\n   Compiling serde_derive v1.0.116\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n   Compiling erc20 v2.1.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/tmp/cargo-contract_OOAxF6"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Finished release "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("optimized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(".86s\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Post processing wasm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("/3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Optimizing wasm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n Original wasm size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("59")]),t._v(".8K, Optimized: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),t._v(".6K\n   \nYour contract is ready. You can "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" it here:\n/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./erc20/target/erc20.wasm\n   \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Generate metadata erc20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n   \ncargo +nightly contract generate-metadata\n  Generating metadata\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Building cargo project\n    Finished release "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("optimized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(".03s\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Post processing wasm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("/3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Optimizing wasm "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n Original wasm size: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("59")]),t._v(".8K, Optimized: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("37")]),t._v(".6K\n    Updating "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" repository "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("https://github.com/paritytech/ink"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n    Updating crates.io index\n   Compiling serde v1.0.116\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n   Compiling metadata-gen v0.1.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/tmp/cargo-contract_VQK5N3/.ink/metadata_gen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Finished release "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("optimized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),t._v(".21s\n     Running "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("target/release/metadata-gen"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n        Your metadata "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" is ready.\nYou can "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" it here:\n/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./myerc20/target/metadata.json\n   \nðŸšš  Copy wasm files: erc20.wasm\nðŸšš  Copy abi files: metadata.json\nðŸŽ‰  Compile successfully"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" You can "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" them at /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("./myerc20/artifacts\n   \nDone "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("59")]),t._v(".94s.\n")])])]),a("p",[t._v("In our case, the "),a("code",[t._v("artifacts")]),t._v(" directory contains:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("artifacts\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("- erc20.json\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("- erc20.wasm\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Deploy your contracts.")]),t._v(" "),a("p",[t._v("After development, it's time to deploy you contracts. "),a("strong",[t._v("But before your deployment, please checkout "),a("code",[t._v("Redspot-config.js")])]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  outDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./artifacts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  networks"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this is the network config, same to truffle, the migaration/test command would connect network dependent on this config.")]),t._v("\n    development"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `types` is related to connected chain, this is important for polkadot.js")]),t._v("\n      types"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        Address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AccountId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        LookupSource"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AccountId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//`prefix` is the ss58check Version for chain address, this would affect the scripts in migrations/tests")]),t._v("\n      prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      endpoints"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ws://127.0.0.1:9944'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// please check endpoints, it's the websocket address for blockchain")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// accounts is the key pair for migrations/tests")]),t._v("\n      accounts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'alice'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          publicKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0xd43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          secretKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0x98319d4ff8a9508c4bb0cf0b5a78d760a0b2082c02775e6e82370816fedfff48925a225d97aa00682d6a59b95b18780c10d7032336e88f3442b42361f4a66011'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("p",[a("code",[t._v("networks")]),t._v(" is as same as Truffle, will be used when set "),a("code",[t._v("--network")]),t._v(" parameter for migaration/test commands.")]),t._v(" "),a("p",[t._v("However, developers should be concerned with "),a("code",[t._v("types")]),t._v(" and "),a("code",[t._v("prefix")]),t._v(". Those two parts are related to the connected blockchain. For example, If you want to connect with polkadot mainnet work, you should set "),a("code",[t._v("types")]),t._v(" as "),a("code",[t._v("{}")]),t._v(" and set "),a("code",[t._v("prefix")]),t._v(" as "),a("code",[t._v("1")]),t._v(" . If you want to connect with a custom Substrate blockchain, I should set "),a("code",[t._v("types")]),t._v(" and "),a("code",[t._v("prefix")]),t._v(" to matching value. For the types, please refer to "),a("a",{attrs:{href:"https://polkadot.js.org/api/start/types.extend.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("this link"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v('We recommend developers to use "'),a("a",{attrs:{href:"https://github.com/patractlabs/jupiter",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jupiter"),a("OutboundLink")],1),t._v('" as the testnet, because Jupiter contains a node in develop mode, which '),a("strong",[t._v("doesn't need interval time to produce blocks.")]),t._v(" This feature will save lot of time for developing contracts.")]),t._v(" "),a("blockquote",[a("p",[t._v("Note: if you use Jupiter as the testnet, please make sure the "),a("code",[t._v("types")]),t._v(" is the correct json.")])]),t._v(" "),a("p",[t._v("If we assume the node is running on your machine, now you could deploy the myerc20 contract by doing "),a("code",[t._v("yarn migarate")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" migrate\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" run v1.22.4\n$ Redspot migrate\nðŸ‘‰  Running migration: 1_deploy_contracts.js\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PutCode erc20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\nWasmCode: 0x0061736d01000000015f1060027f7f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("000006000000070041b080040b0102\nâž¤ erc20 codeHash: 0x9e05d9d5119b97343e69ed8ca68182639242c278ba04a753c36eeb44ba760fb1\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Instantiate erc20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\nEndowment:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50000000000")]),t._v("\nGasRequired: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000000")]),t._v("\nCodeHash:    0x9e05d9d5119b97343e69ed8ca68182639242c278ba04a753c36eeb44ba760fb1\nInputData:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80,65")]),t._v(",230,145,252,0,0,100,167,179,182,224,13,0,0,0,0,0,0,0,0\nâž¤ erc20 contract address: 5D2z2wBACmwVCFBzSGjWbEhtQnxQuFiJNXoEJZeMyzeDd1rk\nDone "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".73s.\n")])])]),a("p",[t._v("Please notice that this command would automatically find the WASM file in "),a("code",[t._v("artifacts")]),t._v(" directory, find the deploy script in "),a("code",[t._v("migarations")]),t._v(" directory, and executive it. The node where the WASM would be deployed is the "),a("code",[t._v("endpoint")]),t._v(" in "),a("code",[t._v("Redspot-config.js")]),t._v(" file.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Test your contracts.")]),t._v(" "),a("p",[t._v("The most important thing in contract development is testing. "),a("code",[t._v("ink!")]),t._v(" has already provided a way to write unit case to test contracts. However, simple unit test can't cover many complex situations, like multiple contracts project, the contracts related to block height, and so on. Thus, there must be a way for integration testing.")]),t._v(" "),a("p",[a("code",[t._v("yarn test")]),t._v(" is the command for contract integration test. It would execute all scripts in "),a("code",[t._v("tests")]),t._v(" directory.")]),t._v(" "),a("p",[t._v("Please notice that the default logic for contract address determiner is currently dependent on "),a("code",[t._v("code_hash")]),t._v(", "),a("code",[t._v("data_hash")]),t._v(" and "),a("code",[t._v("origin")]),t._v(" (refer to "),a("a",{attrs:{href:"https://github.com/paritytech/substrate/blob/master/frame/contracts/src/lib.rs#L389",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("SimpleAddressDeterminer")]),a("OutboundLink")],1),t._v("), so that "),a("strong",[t._v("using same code and same init data from same sender")]),t._v(" could only "),a("code",[t._v("instantiate")]),t._v(" "),a("strong",[t._v("once")]),t._v(" for a contract, so that the testing scripts should be careful to handle "),a("code",[t._v("instantiate")]),t._v("(meaning deploy a contract) , like using different sender in different tests or using same deployed contract address when the contract could call more than once.")]),t._v(" "),a("p",[t._v("Redspot hasn't implemented the same feature yet, which is like "),a("code",[t._v("migration.sol")]),t._v(" in truffle, so Redspot can't automatically distinguish whether current contract has already been deployed. In the future, we would support this feature to help testing and instantiating (deploying).")]),t._v(" "),a("p",[t._v("But now, if the tests are not complex, developers could start blockchain node using "),a("code",[t._v("--tmp")]),t._v(" parameter. This parameter would start new chain without old data, thus developers could restart the blockchain node each time when they test.")])]),t._v(" "),a("li",[a("p",[t._v("objectified way to operate contracts")]),t._v(" "),a("p",[t._v("Developer could use an objectified way to operate contracts in "),a("code",[t._v("migarate")]),t._v(" and "),a("code",[t._v("test")]),t._v(" scripts. In the future, this feature could be used in interactive console. Currently, we show an example like this:")])])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// load contractApi from artifacts, this would auto parse information from contract abi file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" erc20 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" artifacts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'erc20'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contract test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Alice "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pairs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Bob "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pairs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// call put_code in low level (note currently if upload same code would not cause extrinsic failed)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" erc20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("putCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Alice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" erc20Api "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" erc20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deployed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    Alice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    erc20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("abi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1000000000000000016'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// instantiate parameters\t")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// endowment")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100000000000"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gas limit")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// call rpc `call` to run contracts and get value")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" totalSupply "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" erc20Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalSupply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// create an extrinsic and wait to block to pack and return the result of extrinsic result.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" transferResult "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" erc20Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Bob"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("publicKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Alice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    gasLimit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100000000000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("From the example, we could see that developers do not need to care about how to parse ABI files and build call parameters, just operate a contract like an object.")]),t._v(" "),a("h2",{attrs:{id:"what-we-have-done-in-this-version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-we-have-done-in-this-version"}},[t._v("#")]),t._v(" What we have done in this version")]),t._v(" "),a("p",[t._v("As we described above, we have implemented all features required in the proposal. Except some issues due to the unstable "),a("code",[t._v("ink!")]),t._v(". Redspot could achieve a basic contract developing framework like how Truffle does in Ethereum. Maybe some features need to be improved. But currently, Redspot is a complete tool framework which could help developers to improve developing process for contracts.")]),t._v(" "),a("p",[t._v("We hope all contract developers could benefit from Redspot!")]),t._v(" "),a("h2",{attrs:{id:"what-features-we-will-add-in-the-next-proposals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-features-we-will-add-in-the-next-proposals"}},[t._v("#")]),t._v(" What features we will add in the next proposals")]),t._v(" "),a("p",[t._v("We will apply a new detailed proposal for "),a("strong",[t._v("Redspot v0.2")]),t._v(". Briefly, we will add a migrations framework to control whether a contracts has beed deployed. We will find a way to solve repeat instantiate and do not need to restart the blockchain. We will provide an interactive console for directly interact with contract.")]),t._v(" "),a("p",[t._v("We will apply a new detailed proposal for "),a("strong",[t._v("Europa v0.1")]),t._v(" (firstly introduced in "),a("a",{attrs:{href:"https://polkadot.polkassembly.io/post/15",target:"_blank",rel:"noopener noreferrer"}},[t._v("Post #15"),a("OutboundLink")],1),t._v('). Europa is a sandbox of Substrate runtime environment, which would be used to simplify the developing, debugging, and integration test when developers develop Substrate runtime applications and test pallet-contracts. We will provide an independent runtime execution environment, allowing developers to use some special operation to operate the blockchain, like "jump to height" and "revert to height". We will provide an independent database for blockchain to establish other indexes, like index for extrinics. We will export stored key/value directly.')])])}),[],!1,null,null,null);e.default=n.exports}}]);